<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2004-10-b</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200410a.html">
<link rel="next" href="200410c.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2004年10月中旬〜</p>
<hr>
<div>
<a href="200410a.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200410c.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2004/10/11 start -->
<h2><a name="20041011" href="200410b.html#20041011">2004-10-11 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200410111" title="200410111" href="200410b.html#200410111">■</a> 
<a href="http://rsync.samba.org/">[Soft] rsync 2.6.3</a></h3>
<p>
security fixということで。<br>

<a href="http://rsync.samba.org/ftp/rsync/rsync-2.6.3-NEWS">http://rsync.samba.org/ftp/rsync/rsync-2.6.3-NEWS</a>
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410112" title="200410112" href="200410b.html#200410112">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/116044">[Quiz] Ruby Quiz</a></h3>
<p>
すでに興味をなくしたRuby Quizではあるが、やっぱネタ次第？
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200410113" title="200410113" href="200410b.html#200410113">■</a> 
[Diary] CSS変更</h3>
<p>
&lt;pre&gt;を囲むのをやめてみる。

<a href="http://namazu.org/~satoru/diary/">高林さんとこ</a>のまね。
</p>
<!-- section end -->
</div>
<!-- 2004/10/11 end -->



<hr class="hide">
<!-- 2004/10/12 start -->
<h2><a name="20041012" href="200410b.html#20041012">2004-10-12 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200410121" title="200410121" href="200410b.html#200410121">■</a> 
[Mail] rdeliverが安定してきた？</h3>
<p>
requireを先頭に持っていくことでエラーは起きなくなったようだ。
すでに10日以上経つが全然問題ない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410122" title="200410122" href="200410b.html#200410122">■</a> 
<a href="http://www.python.org/">[Soft] Python 2.3.4</a></h3>
<p>
最新版に上げてみる。

<a href="http://www.python.org/2.3.4/NEWS.html">http://www.python.org/2.3.4/NEWS.html</a>
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200410123" title="200410123" href="200410b.html#200410123">■</a> 
<a href="http://www.mikihoshi.com/d/2004-10-11.html#200410112329290">[Soft] CVS repository</a></h3>
<p>
ついでにlilyも公開してくれるとうれしいな。
</p>

<!-- section end -->
</div>
<!-- 2004/10/12 end -->



<hr class="hide">
<!-- 2004/10/13 start -->
<h2><a name="20041013" href="200410b.html#20041013">2004-10-13 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200410131" title="200410131" href="200410b.html#200410131">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/116359">[Ruby] YPATH</a></h3>
<p>
XMLにXPathがあるように、YAMLにもYPathがあるらしい。
まだ実験的か。
</p><blockquote class="cite"><p>
This method is EXPERIMENTAL and much of the
YPath syntax isn't supported. YPath is still
being defined by YAML implementors and this
is all subject to change.
</p></blockquote><p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410132" title="200410132" href="200410b.html#200410132">■</a> 
[Mail] 突然spamがすりぬけるようになった</h3>
<p>
どういうわけか最近spamが目立つ。
Bogofilterのログを確認してみるとhamもspamもspamicityが0.5ぐらいというのが多い。
データベースが壊れたか？
幸いなことに先日Berkeley DBからQDBMへ変更した際にdumpしたテキストファイルが残っていたので、
</p>
<pre>
% bogoutil -l wordlist.qdbm.new &lt; wordlist.txt
% mv wordlist.qdbm{.new,}
</pre>
<p>
と実行して作りなおし。いい感じに戻った。
たまに
</p>
<pre>
% bogoutil -d wordlist.qdbm &gt; wordlist.txt
</pre>
<p>
とdumpしたものを保存しておくか。最初から訓練しなおすのも面倒だし。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200410133" title="200410133" href="200410b.html#200410133">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/116492">[Ruby] Is it possible to unsubscribe from a thread?</a></h3>
<p>
なかなかすごい要求だ。
</p>
<!-- section end -->
</div>
<!-- 2004/10/13 end -->



<hr class="hide">
<!-- 2004/10/14 start -->
<h2><a name="20041014" href="200410b.html#20041014">2004-10-14 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200410141" title="200410141" href="200410b.html#200410141">■</a> 
<a href="http://www.taiyo.co.jp/~gotoh/diary/?200410b&amp;to=200410132#200410132">[Firefox] firefox + xkeymacs</a></h3>
<p>
C-sの挙動はうちでも起きてます。
面倒なのと根がviなので/で代用。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410142" title="200410142" href="200410b.html#200410142">■</a> 
<a href="http://www.busybox.net/">[Soft] BusyBox 1.00</a></h3>
<p>
やっと1.00が出た。
</p><blockquote class="cite"><p>
Over three years in development, BusyBox 1.00 represents a tremendous
improvement over the old 0.60.x stable series. Now featuring a Linux
KernelConf based configuration system (as used by the Linux kernel),
Linux 2.6 kernel support, many many new applets, and the development
work and testing of thousands of people from around the world.
</p></blockquote><p>
というわけでLinuxのkernelをmakeするときにように、
make configやmake menuconfigでいろいろ設定できるわけだね。
含めたいcommandも選べる。
<!-- section end -->
</div>
<!-- 2004/10/14 end -->



<hr class="hide">
<!-- 2004/10/15 start -->
<h2><a name="20041015" href="200410b.html#20041015">2004-10-15 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200410151" title="200410151" href="200410b.html#200410151">■</a> 
[Ruby] RDoc問題</h3>
<p>
先日ext/もRDocで処理するようになった。
1.8ではまだinstall-docがdefaultではないため、まだ気づいてない人が多いかもしれない。
まあ、試しにmake install-docしてみてくれ。時間が半端じゃなくかかる。
Pentium 4 2.6GHzですら5分かかる。
</p>
<pre>
Files:   742
Classes: 707
Modules: 535
Methods: 8031
Elapsed: 309.499s
</pre>
<p>
topでどのくらいメモリを食うか見てたら600MBを越えたあたりでやっと終了。
</p>

<p>
で、できあがりは
</p>
<pre>
% du -ms /usr/local/share/ri/1.8
36      /usr/local/share/ri/1.8
</pre>
<p>
36MBだ。これも結構でかいね。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410152" title="200410152" href="200410b.html#200410152">■</a> 
<a href="http://desktop.google.com/">[Google] Google Desktop Search</a></h3>
<p>
頼むからLinux版を作ってくれ。
</p>
<!-- section end -->
</div>
<!-- 2004/10/15 end -->



<hr class="hide">
<!-- 2004/10/16 start -->
<h2><a name="20041016" href="200410b.html#20041016">2004-10-16 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200410161" title="200410161" href="200410b.html#200410161">■</a> 
<a href="http://www.howtocreate.co.uk/tutorials/slopes.html">[CSS] Using borders to produce angled shapes</a></h3>
<p>
CSSでここまでできるんだなあ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410162" title="200410162" href="200410b.html#200410162">■</a> 
<a href="http://www.uclibc.org">[Soft] uClibc 0.9.26</a></h3>
<p>
BusyBoxyをglibcでstatic版を作ると700KBとかなりでかくなる。
しかもglibcはstaticで作っても
<a href="200210a.html#200210061">内部でこっそりdlopen相当の処理をしている</a>
ので非常時用にはあまり使いたくない。
というわけでuClibcを更新。最近freshmeat.netに出てこなくなったな。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200410163" title="200410163" href="200410b.html#200410163">■</a> 
<a href="http://www.busybox.net">[Soft] static版BusyBox</a></h3>
<p>
Busyboxのstatic版を作るにはmake menuconfigして、
Build Options - Build BusyBox as a static binary (no shared libs)
をチェックすればいい。その後
</p>
<pre>
% make CC=/usr/i386-linux-uclibc/usr/bin/gcc
</pre>
<p>
と実行すればuClibc版BusyBoxのできあがり。
のはずだけどエラーになってしまった。
</p>
<pre>
In file included from applets/applets.c:48:
include/applets.h:551: error: `sysctl_main' undeclared here \
  (not in a function)
</pre>
<p>
該当する行は
</p>
<pre>
#ifdef CONFIG_SYSCTL
        APPLET(sysctl, sysctl_main, _BB_DIR_SBIN, _BB_SUID_NEVER)
#endif
</pre>
<p>
で、なんで？CONFIG_SYSCTLか。そんなの選んでないよな。
あ、そうか。kernelのheaderで定義されてるんだ。
LinuxのKernelConfがbaseなだけに同じルールだもんな。
たまたまぶつかってしまったんだろう。
調べてみるとuClibcの&lt;param.h&gt;が最終的に&lt;linux/config.h&gt;をincludeしてしまうのが原因と判明。
というわけで簡単な解決方法としてはmake menuconfigでProcess Utilitiesのsysctlをチェックしてしまえばいい。
</p>

<p>
サイズは312KBと半分以下。まずまずか。
</p>
<pre>
Currently defined functions:
        [, ash, basename, bunzip2, busybox, bzcat, cat, chgrp, chmod,
        chown, chroot, chvt, clear, cmp, cp, cut, date, dd, deallocvt,
        df, dirname, dmesg, du, echo, egrep, env, expr, false, fgrep,
        find, free, grep, gunzip, gzip, halt, head, hexdump, hostname,
        id, ifconfig, init, install, kill, killall, klogd, linuxrc, ln,
        logger, ls, mkdir, mknod, mktemp, more, mount, mv, openvt, pidof,
        ping, pivot_root, poweroff, ps, pwd, readlink, reboot, reset,
        rm, rmdir, route, sed, sh, sleep, sort, strings, swapoff, swapon,
        sync, sysctl, syslogd, tail, tar, tee, test, time, touch, true,
        tty, umount, uname, uniq, unzip, uptime, usleep, vi, wc, wget,
        which, whoami, xargs, yes, zcat
</pre>
<p>
これだけあればたぶん困ることもないだろう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410164" title="200410164" href="200410b.html#200410164">■</a> 
[Movie] THE DAY AFTER TOMORROW</h3>
<p>
最後にday after tomorrowのmore than a million milesが流れてちょっとびっくりした。
あ、日本語の吹替えにだけ入っているのか。
</p>
<!-- section end -->
</div>
<!-- 2004/10/16 end -->



<hr class="hide">
<!-- 2004/10/17 start -->
<h2><a name="20041017" href="200410b.html#20041017">2004-10-17 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200410171" title="200410171" href="200410b.html#200410171">■</a> 
[w3m] sf.net.cgi</h3>
<p>

<a href="200410a.html#200410042">http proxy</a>を作ったはいいけど、ふだんは動かしてないから残念な結果になったりすることが多い。
どうせw3mで見てるのでlocal cgiを作ってみよう。

<a href="http://www.sic.med.tohoku.ac.jp/~satodai/w3m-dev/200302.month/3783.html">utf8.cgi</a>
を参考にこんな感じにしてみた。
</p>
<pre>
#! /usr/bin/env ruby

require 'cgi'
require 'nkf'
require 'zlib'

url = ENV['W3M_URL']
content_type = ENV['W3M_TYPE']
sourcefile = ENV['W3M_SOURCEFILE']
print &quot;Content-Type: #{content_type}; charset=iso-2022-jp;\n\n&quot;
print &quot;&lt;base href=\&quot;#{url}\&quot;&gt;\n&quot;;
body = ''
begin
  Zlib::GzipReader.open(sourcefile) do |r|
    body = r.read
  end
rescue Zlib::GzipFile::Error
  body = File.read(sourcefile)
end
body.gsub!(/\e\$B(.+?)\e\(B/) do
  CGI::unescapeHTML($&amp;)
end
body.gsub!(/=\?ISO-2022-JP\?[QB]\?.+?\?=/i) do
  NKF.nkf('', $&amp;)
end
print body
</pre>
<p>
これを~/.w3m/cgi-bin/sf.net.cgiに置いて、~/.w3m/keymapに
</p>
<pre>
keymap &quot;x s&quot; GOTO file:///cgi-bin/sf.net.cgi
</pre>
<p>
を追加すれば準備ok。これで後からxsで変換可能だ。
</p>
<!-- section end -->
</div>
<!-- 2004/10/17 end -->



<hr class="hide">
<!-- 2004/10/18 start -->
<h2><a name="20041018" href="200410b.html#20041018">2004-10-18 (Mon)</a></h2>
<!-- 2005-02-28 01:50:33 -->

<div class="entry1">
<h3><a name="200410181" title="200410181" href="200410b.html#200410181">■</a> 
[w3m] sf.net.cgiで広告をカット</h3>
<p>
どうせフィルタリングするなら要らない広告もカットしてしまおう。

<a href="../files/sf.net.txt">sf.net.cgi</a>のprint bodyの前に
</p>
<pre>
body.gsub!(/&lt;!-- begin OSTG navbar --&gt;.+?&lt;H3&gt;/im, &quot;&lt;H3&gt;&quot;)
body.gsub!(/&lt;!-- begin OSTG Footer --&gt;.+&lt;!-- done with OSDN Footer --&gt;/im, &quot;&quot;)
</pre>
<p>
を追加することで結構いい感じになった。
</p>
<!-- section end -->
</div>
<!-- 2004/10/18 end -->



<hr class="hide">
<!-- 2004/10/19 start -->
<h2><a name="20041019" href="200410b.html#20041019">2004-10-19 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200410191" title="200410191" href="200410b.html#200410191">■</a> 
<a href="http://bogofilter.sf.net/">[Soft] Bogofilter 0.92.7</a></h3>
<p>
--with-database=qdbmをつけ忘れたのにもかかわらず、~/.bogofilter/wordlist.dbを残しておいたおかげで何事もなく数時間動いていた。
さすがだ。いずれ消すつもりだったけど、やっぱこのまま残しとこう。
というか、ディスクはいっぱい余ってるんだからむやみに消すこともない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410192" title="200410192" href="200410b.html#200410192">■</a> 
[電車] ダイヤ快晴</h3>
<p>
誤変換ではない。
そういうコピーで東武野田線がダイヤ改正したわけだが、
今日たまたま乗った新宿21:08発湘南新宿ライン宇都宮線小金井行きだと、
大宮の乗り継ぎが非常にうまくいくようだ。
昨日までの大宮21:42発だとかなりぎりぎりっぽい。
そのつもりで急いで歩いていたわけだが、案内板を見て拍子抜けしたというか、
一瞬なにが起こったのかわからず、数秒間立ち止まったというか(嘘)。
</p>

<p>
JRのように月曜日からではなく火曜日の今日からというのも謎だ。
</p>
<!-- section end -->
</div>
<!-- 2004/10/19 end -->



<hr class="hide">
<!-- 2004/10/20 start -->
<h2><a name="20041020" href="200410b.html#20041020">2004-10-20 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200410201" title="200410201" href="200410b.html#200410201">■</a> 
[Mail] DomainKey-Signature</h3>
<p>
なんか最近gmailから来るメールのspamicityが高いような気がする。
DomainKey-Signatureのせいじゃないよね。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200410202" title="200410202" href="200410b.html#200410202">■</a> 
<a href="http://sourceforge.net/projects/sudosh/">[Soft] sudosh 1.2.3</a></h3>
<p>
About:
</p><blockquote class="cite"><p>
sudosh is a filter that takes advantage of PTY devices in order to sit
between the user's keyboard and a program, in this case a shell. It
was designed specifically to be used in conjunction with sudo, and
allows the execution of a root shell with logging. It is basically a
VCR and will record root shell sessions and also has the ability to
play back the sessions as they were originally recorded. It records
all input/output, keyboard input, and timing information so that the
session can be played back in the original format.
</p></blockquote><p>
sudosh-replayで
<a href="http://namazu.org/~satoru/ttyrec/">ttyrec</a>のような再生が可能。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200410203" title="200410203" href="200410b.html#200410203">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/117167">[Ruby] ruby -version</a></h3>
<p>

<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/116512">[ruby-talk:116512]</a>に続いて二人目。どこかに嘘を書いてる人がいるんだろうか？
</p>
<!-- section end -->
</div>
<!-- 2004/10/20 end -->

<hr>
<div>
<a href="200410a.html">&lt;Prev(,)</a> | 
<a href="200410c.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="https://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="https://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
