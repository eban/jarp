<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2007-6-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200705c.html">
<link rel="next" href="200706b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2007年6月上旬〜</p>
<hr>
<div>
<a href="200705c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200706b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2007/06/01 start -->
<h2><a name="20070601" href="200706a.html#20070601">2007-06-01 (Fri)</a></h2>
<!-- 2007-06-02 01:30:08 -->

<div class="entry1">
<h3><a name="200706011" title="200706011" href="200706a.html#200706011">■</a> 
5月のspam</h3>
<p>
149通。Gmail側約4000スレッド。あれ？なんかやけに少ない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200706012" title="200706012" href="200706a.html#200706012">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/253837">[Ruby] [QUIZ] FizzBuzz (#126)</a></h3>
<p>
今週のRuby QuizはFizzBuzz。
</p>
<!-- section end -->
</div>
<!-- 2007/06/01 end -->



<hr class="hide">
<!-- 2007/06/02 start -->
<h2><a name="20070602" href="200706a.html#20070602">2007-06-02 (Sat)</a></h2>
<!-- 2007-06-03 02:47:28 -->

<div class="entry1">
<h3><a name="200706021" title="200706021" href="200706a.html#200706021">■</a> 
<a href="http://w3m.sf.net/">[Soft] w3m 0.5.2</a></h3>
<p>
w3m 0.5.2が出たようなので
<a href="200608a.html#200608051">WM3_TITLEの件</a>を確認してみたら直ってなかった。<br>
まあ、そんなもんか。結局使ってないので困ってないしなあ。<br>
yumでgtk2-develをインストールしたから、<br>
ちゃんと画像が表示されるようになった。なんか久し振り。
</p>
<!-- section end -->
</div>
<!-- 2007/06/02 end -->



<hr class="hide">
<!-- 2007/06/03 start -->
<h2><a name="20070603" href="200706a.html#20070603">2007-06-03 (Sun)</a></h2>
<!-- 2007-06-04 01:57:30 -->

<div class="entry1">
<h3><a name="200706031" title="200706031" href="200706a.html#200706031">■</a> 
<a href="http://freshmeat.net/projects/mtools/">[Soft] mtools 3.9.11</a></h3>
<p>
MinGWとかCygwinでmtoolsを使う意味がよくわからん。
</p><blockquote><dl>
<dt>
Changes:
<dd>
This is mostly a maintainance release which fixes a couple of
bugs, addresses warnings raised by gcc4, and merges some platform-specific
patches (MingW, NetBSD, Redhat/Fedora, Cygwin, Solaris). 
</dl></blockquote>
<!-- section end -->
</div>
<!-- 2007/06/03 end -->



<hr class="hide">
<!-- 2007/06/04 start -->
<h2><a name="20070604" href="200706a.html#20070604">2007-06-04 (Mon)</a></h2>
<!-- 2007-06-05 01:22:31 -->

<div class="entry1">
<h3><a name="200706041" title="200706041" href="200706a.html#200706041">■</a> 
<a href="http://golf.shinh.org/p.rb?Circle+Art">[穴] Circle Art</a></h3>
<p>

<a href="http://www.nmt.ne.jp/~ysas/diary/?200706a&amp;to=200706032#200706032">AWKがPostScriptに抜かれて</a>

悔しかったんで、<br>

<a href="http://golf.shinh.org/p.rb?Circle+Art">Circle Art</a>
でもやるかとRuby版から移植作業を開始するも、<br>
ふと気づくとなぜかAWKそっちのけでRuby版を縮めることに熱中してたりで、<br>
なんでこうなるの？
</p>

<p>
この問題は
<a href="http://codegolf.com/bob-ross-the-joy-of-ascii-art">ASCII Art</a>
と違って手抜きができるんだな。
</p>
<!-- section end -->
</div>
<!-- 2007/06/04 end -->



<hr class="hide">
<!-- 2007/06/05 start -->
<h2><a name="20070605" href="200706a.html#20070605">2007-06-05 (Tue)</a></h2>
<!-- 2007-06-06 02:12:08 -->

<div class="entry1">
<h3><a name="200706051" title="200706051" href="200706a.html#200706051">■</a> 
[Linux] yumでFedora Core 6からFedora 7へアップグレード</h3>
<p>
先日FC6をインストールしたばかりのマシンなら失敗しても被害が少ないので、<br>
早速yumでアップグレード実験。しかもssh越しで。<br>
まずは
<a href="http://download.fedora.redhat.com/pub/fedora/linux/releases/7/Fedora/i386/os/Fedora/">Fedoraのリポジトリ</a>
から
</p>
<pre>
fedora-release-7-3.noarch.rpm
fedora-release-notes-7.0.0-1.noarch.rpm
</pre>
<p>
を取ってきてrpm -Uvhでインストール。しかし
</p>
<pre>
error: Failed dependencies:
        fedora-release = 6 is needed by \
        (installed) yum-fedorafaq-6-2007.02.03.noarch
</pre>
<p>
と言われてしまう。yum-fedorafaqという名前からして要らなそうなので消す。<br>
これでfedora-release関係はインストールできた。
</p>

<p>
あとは
</p>
<pre>
% sudo yum clean all
% sudo yum -y upgrade
</pre>
<p>
して待つ。2時間ほどでComplete!と出て終了。ここまではすんなり。
</p>

<p>
再起動してみるとなぜか立ち上がる様子がない。<br>
このマシンは離れたサーバルームにあるんだが、<br>
その鍵を持ってる人はすでに帰宅した後だった。<br>
というのが実は昨日の夜の話。
</p>

<p>
結局立ち上がらないのは/etc/fstabのデバイス名を間違えていたのが原因だった。<br>
増設したHDDはSCSIなのに/dev/hdb1とか書いてあるし。<br>
コメントアウトして無事立ち上がった。
</p>

<p>
ここで注意。rescue modeでのshellではroでmountされてるので、
</p>
<pre>
# mount -o remount /
</pre>
<p>
と実行してrwでmountしなおさないと/etc/fstabを書き換えることができない。
</p>

<p>
その後yum updateしたらfirefoxが2.0.0.4に更新された。<br>
なんかyumが速くなった気がする。DBがXMLからSQLiteになったからか？
</p>

<p>
家のマシンも週末にはと思ったが、今週末はRubyKaigi2007だった。来週だな。
</p>
<!-- section end -->
</div>
<!-- 2007/06/05 end -->



<hr class="hide">
<!-- 2007/06/06 start -->
<h2><a name="20070606" href="200706a.html#20070606">2007-06-06 (Wed)</a></h2>
<!-- 2007-06-07 01:21:45 -->

<div class="entry1">
<h3><a name="200706061" title="200706061" href="200706a.html#200706061">■</a> 
[Linux] Fedora 7とIDEのデバイス名(/dev/hda vs. /dev/sda)</h3>
<p>
今日も1台yum upgrade。しかもまた/dev/hdb1がないと文句言って立ち上がらない。<br>
さすがに変だと思い(いやSCSIつながってないし)、ぐぐってみたところ、<br>
Fedora 7ではIDEでも/dev/hd*じゃなくて/dev/sd*になったらしい。<br>
ああ、なんか去年そんな記事を読んだような？<br>
で、昨日のサーバルームのマシンも確認したらIDEだった。<br>
/etc/fstabが間違っていたわけじゃないんだな。
</p>

<p>
なぜ起動はできてチェックで失敗してたかというと、<br>
/や/bootはLVMだったりLABEL=で指定してあったりで、<br>
hd*というデバイス名が出てこないのでうまいこと回避できていたのであった。
</p>

<p>
というわけでHDDを増設してるときは要注意。
</p>

<p>
さらに調べたら
<a href="http://fedoraproject.org/wiki/YumUpgradeFaq#head-460f102d94a78a6ce69225eec564f00403ff02a4">Upgrading Fedora Using Yum</a>
に書いてあった。
</p><blockquote><ul>
<li>Fedora 7 replaces the old IDE subsystem with libata. Drive device
names which previously started /dev/hd.. will become /dev/sd.. after
the upgrade. /dev/hda1 will usually become /dev/sda1 although there
may not be a direct relationship between the old and new device names,
hdd will not necessarily become sdd for example. Be sure to change all
references to /dev/hd.. in your config, especially /etc/fstab before
you reboot. It may be simpler to refer to filesystems by label (check
out the programs blkid, tune2fs, and mlabel).
<ul>
<li>LVM Volumes are not affected. 
</ul>
</ul></blockquote>
<!-- section end -->
</div>
<!-- 2007/06/06 end -->



<hr class="hide">
<!-- 2007/06/07 start -->
<h2><a name="20070607" href="200706a.html#20070607">2007-06-07 (Thu)</a></h2>
<!-- 2007-06-08 02:22:44 -->

<div class="entry1">
<h3><a name="200706071" title="200706071" href="200706a.html#200706071">■</a> 
[Blog] wgetやcurlでBlog Ping</h3>
<p>

<a href="http://www.xmlrpc.com/weblogsCom">Weblogs.Com XML-RPC interface</a>を見ると
</p>
<pre>
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;methodCall&gt;
 &lt;methodName&gt;weblogUpdates.ping&lt;/methodName&gt;
 &lt;params&gt;
  &lt;param&gt;
   &lt;value&gt;サイトの名前&lt;/value&gt;
  &lt;/param&gt;
  &lt;param&gt;
   &lt;value&gt;サイトのURL&lt;/value&gt;
  &lt;/param&gt;
 &lt;/params&gt;
&lt;/methodCall&gt;
</pre>
<p>
をPOSTで送ればpingできるらしいので、
<a href="http://pingoo.jp/">http://pingoo.jp/</a>で実験。
</p>
<pre>
#!/bin/sh
# http://www.xmlrpc.com/weblogsCom

site_name='Just another Ruby porter,'
site_url='https://jarp.does.notwork.org/jarp/diary/'

xmlrpc=&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;
&lt;methodCall&gt;
 &lt;methodName&gt;weblogUpdates.ping&lt;/methodName&gt;
 &lt;params&gt;
  &lt;param&gt;
   &lt;value&gt;$site_name&lt;/value&gt;
  &lt;/param&gt;
  &lt;param&gt;
   &lt;value&gt;$site_url&lt;/value&gt;
  &lt;/param&gt;
 &lt;/params&gt;
&lt;/methodCall&gt;
&quot;
#curl -v -s -H &quot;Content-Type: text/xml&quot; -d &quot;$xmlrpc&quot; http://pingoo.jp/ping/
wget -O - -d -q --header=&quot;Content-Type: text/xml&quot; --post-data=&quot;$xmlrpc&quot; http://pingoo.jp/ping/
</pre>
<p>
注意する点はContent-Typeをtext/xmlにすること。<br>
サイト名を日本語にするときはUTF-8で。<br>
curl用もコメントで一応用意してみた。<br>
-vとか-dはデバッグ用なので必要ない。
</p>
<!-- section end -->
</div>
<!-- 2007/06/07 end -->



<hr class="hide">
<!-- 2007/06/08 start -->
<h2><a name="20070608" href="200706a.html#20070608">2007-06-08 (Fri)</a></h2>
<!-- 2007-06-09 02:04:35 -->

<div class="entry1">
<h3><a name="200706081" title="200706081" href="200706a.html#200706081">■</a> 
<a href="http://rubyforge.org/projects/nanoc/">[Ruby] nanoc</a></h3>
<blockquote><p>
nanoc is a tiny Ruby CMS (Content Management System) that runs on your
local computer (not on the server) and outputs static files (usually
HTML) ready for uploading to the server.
</p></blockquote>
<!-- section end -->
</div>
<!-- 2007/06/08 end -->



<hr class="hide">
<!-- 2007/06/09 start -->
<h2><a name="20070609" href="200706a.html#20070609">2007-06-09 (Sat)</a></h2>
<!-- 2007-06-11 00:44:14 -->

<div class="entry1">
<h3><a name="200706091" title="200706091" href="200706a.html#200706091">■</a> 
<a href="http://jp.rubyist.net/RubyKaigi2007/">[Ruby] 日本Ruby会議2007</a></h3>
<p>
1日目。とても楽しかった。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200706092" title="200706092" href="200706a.html#200706092">■</a> 
[Linux] 家のPCもFedora 7へアップグレード</h3>
<p>
どうせRubyKaigiに行くわけで、<br>
時間がかかるyum upgradeを実行し放っておいて、<br>
帰ってきたらちゃんとCompleted!まで到達していた。えらい。
</p>

<p>
しかしyumが変。
</p><blockquote><p>
Could not find any working storages.<br>
Exception exceptions.AttributeError: &quot;'YumRepository' object has no attribute 'sack'&quot; in &lt;bound method YumRepository.__del__ of &lt;yum.yumRepo.YumRepository object at 0x9b3324c&gt;&gt; ignored
</p></blockquote><p>
と言われちゃう。emacsも22.0.990.1となっていろいろ動かなくなったし、<br>
21へ戻そうかと思ってたり。いやそれより、yumはどうしたもんかな。
</p>
<!-- section end -->
</div>
<!-- 2007/06/09 end -->



<hr class="hide">
<!-- 2007/06/10 start -->
<h2><a name="20070610" href="200706a.html#20070610">2007-06-10 (Sun)</a></h2>
<!-- 2007-06-13 02:13:44 -->

<div class="entry1">
<h3><a name="200706101" title="200706101" href="200706a.html#200706101">■</a> 
<a href="http://jp.rubyist.net/RubyKaigi2007/">[Ruby] 日本Ruby会議2007</a></h3>
<p>
2日目。楽しかったがさすがに疲れた。Tkのあたりで疲労のピークに。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200706102" title="200706102" href="200706a.html#200706102">■</a> 
[Linux] emacs 21をmakeするも</h3>
<p>
これは困ったことに。
</p>

<pre>
% make
&lt;途中略&gt;
Finding pointers to doc strings...
Finding pointers to doc strings...done
Wrote /pub/emacs/emacs-21.4/lib-src/fns-21.4.1.el
Dumping under names emacs and emacs-21.4.1
make[1]: *** [emacs] セグメンテーション違反です
make[1]: *** ファイル `emacs' を削除します
make[1]: ディレクトリ `/pub/emacs/emacs-21.4/src' から出ます
make: *** [src] エラー 2
</pre>

<p>
しかたなくGmailで読んではいるがあまりあのビューアは好きじゃない。<br>
昨日のyumの件も実はthunderbirdを入れようとしたら
<a href="200706a.html#200706092">ああ</a>なってしまったわけで。
</p>
<!-- section end -->
</div>
<!-- 2007/06/10 end -->

<hr>
<div>
<a href="200705c.html">&lt;Prev(,)</a> | 
<a href="200706b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
