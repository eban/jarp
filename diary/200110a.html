<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2001-10-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eban.github.io/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200109c.html">
<link rel="next" href="200110b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2001年10月上旬〜</p>
<hr>
<div>
<a href="200109c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200110b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2001/10/01 start -->
<h2><a name="20011001" href="200110a.html#20011001">2001-10-01 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200110011" title="200110011" href="200110a.html#200110011">■</a> 
Netscape6 sidebar</h3>
<p>

<a href="http://mozilla.to/mozx/sb/index.php3?lang=ja">/.jpのsidebar</a>
はgoogleで簡単に見つかったが、yendotのはどこなんだろう？
と思ったら
<a href="http://www.weatherlight.org/~crouton/journal/?200011B#t200011183">croutonさんのとこ</a> に情報があった。
実は既にsidebar自体はaddされてるんだけど、
どこから持ってきたのかすっかり忘れてて、
他のマシンに入れられなくて困っていたというか。
</p>

<p>
あ、sidebarじゃなくてサイドバーで探さなきゃいけない？
</p>


<!-- section end -->
</div>
<!-- 2001/10/01 end -->



<hr class="hide">
<!-- 2001/10/02 start -->
<h2><a name="20011002" href="200110a.html#20011002">2001-10-02 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200110021" title="200110021" href="200110a.html#200110021">■</a> 
version.h</h3>
<p>
なんか久し振りにversion.hが更新された。1.6.5リリース以来か。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110022" title="200110022" href="200110a.html#200110022">■</a> 
RubyUnit 0.4.2, Win32OLE 0.3.1</h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200110023" title="200110023" href="200110a.html#200110023">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/21872">Let's work on Windows support</a></h3>
<p>
爆発してるね。
</p>

<p>
Cygwinが2倍速いって話は
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/27694">[ruby-list:27694]</a>
だと思う。1.7ならそんなに差はないはず。
</p>

<p>
それはそれとして、InstallShield版はVC++かMinGWを使ったほうがいいんだろう。
こうなるとforkが使えないなんて些細な問題に思える。
</p>
<!-- section end -->
</div>
<!-- 2001/10/02 end -->



<hr class="hide">
<!-- 2001/10/03 start -->
<h2><a name="20011003" href="200110a.html#20011003">2001-10-03 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200110031" title="200110031" href="200110a.html#200110031">■</a> 
mswin32版の拡張ライブラリをMinGWで作る</h3>
<p>
昼間一応作りかたを書いて送ったんだが、なぜか届かないなあ。
思い出してここに書いとこう。
</p>

<h4><a name="200110031S1" href="200110a.html#200110031S1">_</a> <strong>mswin32-ruby16.lib</strong>: </h4>
<div class="sub">
<p>
肝はlibmingw32-ruby16.aの代わりにmswin32-ruby16.libを使うだけ。
なのでMinGW版をインストールして
</p>
<pre>
% cp mswin32-ruby16.lib d:/usr/local/lib/libmingw32-ruby16.a
</pre>
<p>
のようにしてしまえばいい。で肝心のmswin32-ruby16.libは

<a href="http://www.dm4lab.to/~usa/ruby/#download">うささんのとこ</a> から取ってこよう。
</p>

</div>
<h4><a name="200110031S2" href="200110a.html#200110031S2">_</a> <strong>Win32OLE</strong>: </h4>
<div class="sub">
<p>
dllwrap時に-L.もしてるのでln -sするのもありだ。こっちをメールに書いた。
</p>
<pre>
% mkdir mswin32; cd mswin32
% unzip ../ruby-1.6.5-i586-mswin32.zip
% unzip ../win32ole-0.3.1.zip
% cd win32ole
% ln -s ../lib/mswin32-ruby16.lib libmingw32-ruby16.a
% d:/usr/local/bin/ruby extconf.rb
% ruby -i~ -pe 'sub(/-bmingw/,&quot;-mno-cygwin&quot;)' Makefile
% make
% ../bin/ruby -r./win32ole -ve 'p $&quot;'
ruby 1.6.5 (2001-09-19) [i586-mswin32]
[&quot;./win32ole.so&quot;]
</pre>

</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110032" title="200110032" href="200110a.html#200110032">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/22005">Windows installer 1.6.5 beta testers needed</a></h3>
<p>
うーむ。Andyさん自身は議論に加わってないようだし、Cygwinのままなのかな？
</p>


<!-- section end -->
</div>
<!-- 2001/10/03 end -->



<hr class="hide">
<!-- 2001/10/04 start -->
<h2><a name="20011004" href="200110a.html#20011004">2001-10-04 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200110041" title="200110041" href="200110a.html#200110041">■</a> 
Apache on Solaris</h3>
<p>
Solaris 2.5なマシンにApacheをインストールした。
</p>
<pre>
% ./configure --enable-shared=max
% make
% su
# make install
</pre>
<p>
で、問題なくインストールできたはいいが、
</p>
<pre>
# /usr/local/apache/bin/apachectl start
</pre>
<p>
するとmod_env.soをロードするとこでundefinedになる。
ってことはhttpd自身のsymbolがexportされてないからか。
httpdを作るとこで-Wl,-Eを入れたらすんなり立ち上がった。
gcc 2.8.1とかbinutilsが古いのか？
ちゃんとこっちもメンテせんとまずいな。
</p>


<!-- section end -->
</div>
<!-- 2001/10/04 end -->



<hr class="hide">
<!-- 2001/10/05 start -->
<h2><a name="20011005" href="200110a.html#20011005">2001-10-05 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200110051" title="200110051" href="200110a.html#200110051">■</a> 
<a href="http://www.tux.org/pub/people/kent-robotti/looplinux/rip/">RIP</a></h3>
<p>

<a href="http://freshmeat.net/">freshmeat</a> でreiserfs, floppyをキーに検索すると、

<a href="http://www.tux.org/pub/people/kent-robotti/looplinux/rip/">RIP</a>
が見つかった。これでReiserFSなパーティションを作ることが可能。
rescue diskとしても使えるので一枚用意しておくことにしよう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110052" title="200110052" href="200110a.html#200110052">■</a> 
<a href="http://freshmeat.net/projects/slackreiser/">SlackReiser</a></h3>
<p>
これを使えば無理矢理PlamoもReiserFSにインストールできるかなあ？
</p>


<!-- section end -->
</div>
<!-- 2001/10/05 end -->



<hr class="hide">
<!-- 2001/10/06 start -->
<h2><a name="20011006" href="200110a.html#20011006">2001-10-06 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200110061" title="200110061" href="200110a.html#200110061">■</a> 
setup.exe</h3>
<p>
Cygwinでクロス環境を作っているから、
setup.exeも当然同時に作られていると思ったらできてない。
不思議に思い確認してみるとcygwin-1.1.8-2-src.tar.gzにはそもそも
cinstall/がないのであった。って

<a href="200104c.html#200104251">そう</a> 自分で答えてるじゃん。
だが、cygwin-1.3.3-2-src.tar.bz2にはちゃんと入っているのであった。
つうわけで、1.3.3-2で試すことにする。
</p>
<pre>
% tar xfv cygwin-1.3.3-2-src.tar.bz2
% cd cygwin-1.3.3-2
% mkdir obj; cd obj
% CFLAGS=-Os CXXFLAGS=-Os ../configure \
  --target=i686-pc-cygwin \
  --host=i686-pc-cygwin \
  --build=$(../config.guess) \
  --prefix=/usr/local/cygwin
% make
..../bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status
</pre>
<p>
あれ？肝心のsetup.exeを作るとこでエラーだ。
mingw32用のlibstdc++.aはMinGW Projectから取ってくる必要があるよね。
Cygwinで完結してないんだけど、これでいいの？
とりあえず/usr/local/cygwin/lib/mingwに用意して解決させる。
</p>

<p>
cinstallは1.3.3になって初めて含まれるようになったようだ。
1.3.2-1には入ってない。
</p>


<!-- section end -->
</div>
<!-- 2001/10/06 end -->



<hr class="hide">
<!-- 2001/10/07 start -->
<h2><a name="20011007" href="200110a.html#20011007">2001-10-07 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200110071" title="200110071" href="200110a.html#200110071">■</a> 
Cygwin or MinGW?</h3>
<p>
例のruby-talk MLでの議論が元で、CygwinとMinGWはどっちがいいと思う？
socketのEINVAL問題とかなぜCygwin版のほうが速いんだみたいな感じの内容のメールが来た。
とりあえず俺自身は会社でCygwinを使ってるが、
常に不安定だしMinGW版のほうがいいんじゃない？
でも家ではWindowsは使ってないし、
Ruby Binariesはすべてクロスコンパイルしてるから、
本格的には使ってないんだけど、と返しといた。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110072" title="200110072" href="200110a.html#200110072">■</a> 
ruby-talk ML</h3>
<pre>
1750: ruby-talk.0101
1608: ruby-talk.0102
1609: ruby-talk.0103
1048: ruby-talk.0104
1629: ruby-talk.0105
1026: ruby-talk.0106
1776: ruby-talk.0107
1737: ruby-talk.0108
1208: ruby-talk.0109
</pre>
<p>
不思議なことに1800通/月までは行かない。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200110073" title="200110073" href="200110a.html#200110073">■</a> 
spam</h3>
<p>
最近やけにspamが多い。英語が多いということはcomp.lang.rubyがらみか？
</p>


<!-- section end -->
</div>
<!-- 2001/10/07 end -->



<hr class="hide">
<!-- 2001/10/08 start -->
<h2><a name="20011008" href="200110a.html#20011008">2001-10-08 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200110081" title="200110081" href="200110a.html#200110081">■</a> 
SlackReiserでPlamoをインストール</h3>
<p>
setupする前にPlamoのCD-ROMをmountしておけば、
sourceでpre-mountを選んで先に進める。
文字は当然化けるが、何度かPlamoをインストールしてればわかる。
パッケージ名はasciiだし。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110082" title="200110082" href="200110a.html#200110082">■</a> 
mingw(mswin32)版Ruby 1.7は遅いのか？</h3>
<p>
例の人と何度かやりとりをしたらうささんとこの1.7は遅いと言われてしまった。
</p>
<pre>
Yikes! I tried my little benchamrk, and the 1.71 snapshot ran *very*
slowly: 4min21s VS 18s (1.65 cygwin) or 36s (1.65 mswin32)
Maybe this is a debug build? Anyway, it's not released yet, so let's
not complain prematurely.
</pre>
<p>
うーむ。これは尋常じゃない遅さだ。どんなbenchmarkなのかわからないが。
</p>

<p>
で、mingwで試そうと思ったら、
</p>
<pre>
% ./miniruby -ve 'system &quot;date&quot;'
ruby 1.7.1 (2001-10-05) [i386-mingw32]
Mon Oct  8 14:17:22  2001
-e:1:in `system': undefined method `allocate' for false (NoMethodError)
        from -e:1
</pre>
<p>
てな感じで、ext/以下がmakeできなくなってた。
allocate機構が導入されてからできないのかなあ。
これはcrossでmakeしてるとわからないから、
たまにはnativeでmakeしないといけないね。
</p>

<p>
それはそれとして、とりあえずminirubyでbenchmarkしてみる。
単に-nを使いgetsするだけの簡単なものだ。
</p>
<pre>
% ls -l ruby-talk.0101
-rw-r--r--    1 watanabe ruby      5663931 Oct  8 14:21 ruby-talk.0101
% time cygwin16/miniruby -vne '' ruby-talk.0101
ruby 1.6.5 (2001-10-05) [i386-cygwin]
2.75s real  0.00s user  0.00s sys  0% cpu
% time cygwin/miniruby -vne '' ruby-talk.0101 
ruby 1.7.1 (2001-10-05) [i386-cygwin]
3.13s real  0.00s user  0.00s sys  0% cpu
% time mingw16/miniruby -vne '' ruby-talk.0101
ruby 1.6.5 (2001-10-05) [i386-mingw32]
89.86s real  0.00s user  0.00s sys  0% cpu
% time mingw/miniruby -vne '' ruby-talk.0101
ruby 1.7.1 (2001-10-05) [i386-mingw32]
6.37s real  0.00s user  0.00s sys  0% cpu
% time mswin32/bin/ruby -vne '' ruby-talk.0101
ruby 1.7.1 (2001-09-01) [i586-mswin32]
6.04s real  0.00s user  0.00s sys  0% cpu
</pre>
<p>
1.7.1では格段に速くなってる。Cygwinには負けるが。
やっぱどんなbenchmarkをしたのか聞いてみないとだめか。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200110083" title="200110083" href="200110a.html#200110083">■</a> 
`system': undefined method `allocate' for false (NoMethodError)</h3>
<p>
結局このエラーは2001-10-04から出るようになったようだ。
process.cの最後の#ifndef NTの中でrb_cProcStatusを初期化してるのが原因か？
と思ったらprocess.cは最近いじられてないな。
単に#ifndef NTを外しちゃってもいい感じだが、
いずれにしてもここはちょっと変？
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200110084" title="200110084" href="200110a.html#200110084">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/22225">ruby-gtk: freq of mouse events: linux vs win nt</a></h3>
<p>
いやdjgppじゃ無理だって。何を持って行ったんだろう？
てゆかmouse eventsの頻度はGIMPを移植した人に聞いたほうがいいでしょう。
</p>


<!-- section end -->
</div>
<!-- 2001/10/08 end -->



<hr class="hide">
<!-- 2001/10/09 start -->
<h2><a name="20011009" href="200110a.html#20011009">2001-10-09 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200110091" title="200110091" href="200110a.html#200110091">■</a> 
benchmark</h3>
<p>
例の人というのは実は
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/21955">この人</a> で、
benchmarkはその最後に示されている
<a href="http://www.bdelmee.easynet.be/lilshoot/">URL</a>
だそうだ。
</p>

<p>
試してみるとmswin32,mingw32には関係なく1.7.1だと確かに遅くなる。
</p>


<!-- section end -->
</div>
<!-- 2001/10/09 end -->



<hr class="hide">
<!-- 2001/10/10 start -->
<h2><a name="20011010" href="200110a.html#20011010">2001-10-10 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200110101" title="200110101" href="200110a.html#200110101">■</a> 
<a href="http://www.isc.org/products/DHCP/">DHCP 3.0</a></h3>
<p>
なるほど
</p>
<pre>
ddns-update-style interim;
</pre>
<p>
でDynamic DNSってわけか。
</p>

<p>
Linux 2.4.xでconfigureすると
</p>
<pre>
System Type: linux-2.2
</pre>
<p>
と表示される。見た感じだと気にしなくてもよさそう。
</p>

<p>
kill -HUPが効かないのはなぜ？と思ったらman dhcpdに書いてあった。
</p>
<pre>
Note:  We get a lot of complaints about this.   We realize
that it would be nice if one could send a  SIGHUP  to  the
server  and  have  it  reload  the database.   This is not
technically impossible, but it would require a great  deal
of work, our resources are extremely limited, and they can
be better spent  elsewhere.    So  please  don't  complain
about  this  on the mailing list unless you're prepared to
fund a project to implement this feature, or  prepared  to
do it yourself.
</pre>
<!-- section end -->
</div>
<!-- 2001/10/10 end -->

<hr>
<div>
<a href="200109c.html">&lt;Prev(,)</a> | 
<a href="200110b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
