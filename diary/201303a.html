<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "https://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2013-3-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="201302c.html">
<link rel="next" href="201303b.html">

<link rel="stylesheet" type="text/css" href="https://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css">
<script type="text/javascript" src="https://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
<script type="text/javascript">
<!--       
$(document).ready(function() {
  prettyPrint();
});
-->
</script>
</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2013年3月上旬〜</p>
<hr>
<div>
<a href="201302c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="201303b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2013/03/01 start -->
<h2><a name="20130301" href="201303a.html#20130301">2013-03-01 (Fri)</a></h2>

<div class="entry1">
<h3><a name="201303011" title="201303011" href="201303a.html#201303011">■</a> 
カットバッファとコピーバッファ</h3>
<p>
Xにはなぜ2つクリップボード的なものがあるのか知らないけど、これは正直うっとうしい。<br>
たとえばブラウザでリンクをコピーしても端末で中クリックじゃペーストできないし。<br>
1個にまとめて欲しい。というわけでautocutselを入れてみたが、どうにも同期してくれない。<br>
autocutsel -f; autocutsel -f -s PRIMARYと2つ起動すればいけるようだけど、それはなんか納得いかない。<br>
いろいろぐぐったらparcelliteというのがいいというので試した。<br>
設定でプライマリ・セクション（選択）を使用(P)とクリップボード同士を同期(Y)をチェックすればOK。<br>
これでどちらも同じ内容になる。そうそうこれだよ。<br>
履歴もさかのぼれるし地味に便利だ。
</p>
<!-- section end -->
</div>
<!-- 2013/03/01 end -->



<hr class="hide">
<!-- 2013/03/02 start -->
<h2><a name="20130302" href="201303a.html#20130302">2013-03-02 (Sat)</a></h2>

<div class="entry1">
<h3><a name="201303021" title="201303021" href="201303a.html#201303021">■</a> 
<a href="http://at-aka.blogspot.jp/2013/03/ruby-substitute-string.html">Re: Ruby で文字列置換 〜 正規表現を使わずに</a></h3>
<p>
ここでは&amp;&amp;=を使うのがぴったり。
</p>
<pre>
str[&quot;perl&quot;] &amp;&amp;= &quot;ruby&quot;
</pre>
<p>
&amp;&amp;=は
</p>
<pre>
str[&quot;perl&quot;] = str[&quot;perl&quot;] &amp;&amp; &quot;ruby&quot;
</pre>
<p>
ではなく
</p>
<pre>
str[&quot;perl&quot;] &amp;&amp; str[&quot;perl&quot;] = &quot;ruby&quot;
</pre>
<p>
の構文糖であることに注意。これで&quot;perl&quot;が含まれてなくてもエラーにならない。
</p>
<!-- section end -->
</div>
<!-- 2013/03/02 end -->



<hr class="hide">
<!-- 2013/03/03 start -->
<h2><a name="20130303" href="201303a.html#20130303">2013-03-03 (Sun)</a></h2>

<div class="entry1">
<h3><a name="201303031" title="201303031" href="201303a.html#201303031">■</a> 
zopfliはだいたい10%ぐらいgzipよりも小さくなる</h3>
<p>
ということはそれをPNGに適用すればスキャン画像も10%ぐらい小さくなるわけで。<br>
これは結構いいかもしれない。時間は100倍近くかかるが。<br>
ImageOptimが使えればよさげではあるがどう見てもMac用だ。
</p>
<p>
参考:
<a href="http://blog.livedoor.jp/imaya_js/archives/6334344.html">Zopfli を使って PNG の再圧縮を行ってみた</a></p>
<!-- section end -->
</div>
<!-- 2013/03/03 end -->



<hr class="hide">
<!-- 2013/03/04 start -->
<h2><a name="20130304" href="201303a.html#20130304">2013-03-04 (Mon)</a></h2>

<div class="entry1">
<h3><a name="201303041" title="201303041" href="201303a.html#201303041">■</a> 
<a href="http://www.commandlinefu.com/commands/view/11904/generate-30-x-30-matrix">generate 30 x 30 matrix</a></h3>
<p>
hexdump, fold, head, sedを使っているが、hexdumpだけで十分。
</p>
<pre>
hexdump -v -e '&quot;%u&quot;' &lt;/dev/urandom|fold -60|head -n 30|sed 's/\(.\{2\}\)/\1 /g'
</pre>
<p>
は
</p>
<pre>
hexdump -n900 -e '30/1 &quot;%02x &quot;&quot;\n&quot;' /dev/urandom
</pre>
<p>
と書ける。
</p>
<!-- section end -->
</div>
<!-- 2013/03/04 end -->



<hr class="hide">
<!-- 2013/03/05 start -->
<h2><a name="20130305" href="201303a.html#20130305">2013-03-05 (Tue)</a></h2>

<div class="entry1">
<h3><a name="201303051" title="201303051" href="201303a.html#201303051">■</a> 
花粉</h3>
<p>
本格的に花粉のシーズンになったようだが症状が軽い。モーニングアタックもない。<br>
ここ数年だんだん軽くなってる気がする。毎日食べてるヨーグルトか？
</p>
<!-- section end -->
</div>
<!-- 2013/03/05 end -->



<hr class="hide">
<!-- 2013/03/06 start -->
<h2><a name="20130306" href="201303a.html#20130306">2013-03-06 (Wed)</a></h2>

<div class="entry1">
<h3><a name="201303061" title="201303061" href="201303a.html#201303061">■</a> 
lighttpdでLTSVなログ</h3>
<p>
なぜかlighttpdだけ仲間外れになってるので作った。まあほとんどApacheと同じだけど。
</p>
<pre>
accesslog.format = &quot;host:%h	ident:%l	user:%u	time:%t	req:%r	status:%&gt;s	size:%b	referer:%{Referer}i	ua:%{User-Agent}i&quot;
</pre>
<p>
\tだとほんとに\tと表示されてしまう。エスケープはできないようだ。
</p>
<!-- section end -->
</div>
<!-- 2013/03/06 end -->



<hr class="hide">
<!-- 2013/03/07 start -->
<h2><a name="20130307" href="201303a.html#20130307">2013-03-07 (Thu)</a></h2>

<div class="entry1">
<h3><a name="201303071" title="201303071" href="201303a.html#201303071">■</a> 
<a href="http://golf.shinh.org/p.rb?A005836">A005836</a></h3>
<p>
3進数で2を含まないものを列挙しろという問題。<br>
素直に取ればそうなんだけど、2を含まないということは0と1しか残らないわけで、それは2進数なのだ。<br>
だから2進数を3進数だと見做して10進数に変換しろという問題でもある。
</p>
<pre>
% ruby -e '10.times.reject{|i|/2/=~(x=i.to_s(3))||printf(&quot;%04d\n&quot;, x)}'
0000
0001
0010
0011
0100
</pre>
<p>
だからi.to_s(2).to_i(3)でいいわけだ。これを短くすると(&quot;%b&quot;%i).to_i 3になる。
</p>
<p>
zshに移植するとこうなる
</p>
<pre>
repeat 105 a=$[[#2]i++]&amp;&amp;echo $[${a/2/3}]
</pre>
<!-- section end -->
</div>
<!-- 2013/03/07 end -->



<hr class="hide">
<!-- 2013/03/08 start -->
<h2><a name="20130308" href="201303a.html#20130308">2013-03-08 (Fri)</a></h2>

<div class="entry1">
<h3><a name="201303081" title="201303081" href="201303a.html#201303081">■</a> 
<a href="http://dotinstall.com/lessons/basic_awk">AWK入門</a></h3>
<p>
これは週末にでも見ねば。それにしても全然見てないよな。
</p>
<!-- section end -->
</div>
<!-- 2013/03/08 end -->



<hr class="hide">
<!-- 2013/03/09 start -->
<h2><a name="20130309" href="201303a.html#20130309">2013-03-09 (Sat)</a></h2>

<div class="entry1">
<h3><a name="201303091" title="201303091" href="201303a.html#201303091">■</a> 
podcastのmp3を静止画像を背景にmp4へ</h3>
<p>
わざわざ何のためにmp3をmp4へ変換するのかというと、PS3で1.5速で聴くため。<br>
背景は何もないとさびしいのでついでに。最初は
</p>
<pre>
% avconv -y -loop 1 -r 1 -shortest -i foo.jpg -i podcast.mp3 -ac 1 -acodec copy podcast.mp4 
</pre>
<p>
でいいと思ったんだけど、なぜかPS3では音が出ず。いろいろ試行錯誤の結果こうなった。
</p>
<pre>
% avconv -y -loop 1 -r 1 -shortest -i foo.jpg -i podcast.mp3 -ac 1 -acodec libvo_aacenc -ar 44100 -b:a 64k podcast.mp4
</pre>
<p>
音声はAACにした。どうせ元は64kなのでその指定も。-shortestをつけないとなぜか終了しない。
</p>
<!-- section end -->
</div>
<!-- 2013/03/09 end -->

<hr>
<div>
<a href="201302c.html">&lt;Prev(,)</a> | 
<a href="201303b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="https://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="https://validator.w3.org/check?uri=referer"><img
          src="https://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="https://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
