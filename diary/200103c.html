<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2001-3-c</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200103b.html">
<link rel="next" href="200104a.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2001年3月下旬〜</p>
<hr>
<div>
<a href="200103b.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200104a.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2001/03/21 start -->
<h2><a name="20010321" href="200103c.html#20010321">2001-03-21 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200103211" title="200103211" href="200103c.html#200103211">■</a> 
stat</h3>
WinNT/2kだと
<pre>
\\host\share\.
</pre>
ではだめで
<pre>
\\host\share\
</pre>
にする必要がある。
つまり\\host\shareという階層かどうかを判断しないとだめだ。
<pre>
\\host\share\
</pre>
ならWin9X/MEでもok。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103212" title="200103212" href="200103c.html#200103212">■</a> 
stat余談</h3>
それにしてもstat(&quot;c:/autoexec.bat/.&quot;, &amp;statbuf)が0を返すのは不気味だ。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103213" title="200103213" href="200103c.html#200103213">■</a> 
gcc 2.95.3</h3>
いつのまにかgcc 2.95.3が出てる。
数日中にはCygwin版も出るらしい。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103214" title="200103214" href="200103c.html#200103214">■</a> 
JARH</h3>
'uJtsa onhtreR bu yahkcre,'.scan(/(.)(.?)/){|x,y| print y+x}
<!-- section end -->
</div>
<!-- 2001/03/21 end -->



<hr class="hide">
<!-- 2001/03/22 start -->
<h2><a name="20010322" href="200103c.html#20010322">2001-03-22 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200103221" title="200103221" href="200103c.html#200103221">■</a> 
release</h3>
結局releaseしないと試してくれないわけか。
CVSもstable-snapshotも用意してるのに。
今わかってるバグを潰してからreleaseと考えても、
未知のbugが待ち構えている。
つまりreleaseを先送りしてもあまり意味はなく、
enbugの発見が遅れるだけなのかもしれない。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103222" title="200103222" href="200103c.html#200103222">■</a> 
出張</h3>
疲れた。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103223" title="200103223" href="200103c.html#200103223">■</a> 
JARH</h3>
print 'Just another Ruby hacker,'['Just another Ruby hacker,']
<!-- section end -->
</div>
<!-- 2001/03/22 end -->



<hr class="hide">
<!-- 2001/03/23 start -->
<h2><a name="20010323" href="200103c.html#20010323">2001-03-23 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200103231" title="200103231" href="200103c.html#200103231">■</a> 
[Cygwin] gcc-2.95.3-1</h3>
テストリリース。これで問題なければそのままリリースされるらしい。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103232" title="200103232" href="200103c.html#200103232">■</a> 
[Cygwin] /dev/clipboard</h3>
最新のsnapshotで/dev/clipboardを経由してクリップボードのデータがやりと
りできるようになった。いままでも可能だったが書き込むことができなかった。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103233" title="200103233" href="200103c.html#200103233">■</a> 
<a href="http://cgi.NetLaputa.ne.jp/~kose/diary/index.cgi?200103c&amp;to=200103212#200103212">emacs 21.0.100</a></h3>
そうすべきかなという気もしたけど、なんか億劫になってしまって…。
花粉症の所為か？

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103234" title="200103234" href="200103c.html#200103234">■</a> 
<a href="http://cgi.NetLaputa.ne.jp/~kose/diary/index.cgi?200103c&amp;to=200103212S1#200103212S1">cab file</a></h3>
です。たぶんextrac32.exeで取り出せます。
psdk-x86.49.cabはすでに消してしまったらしい。
しょうがないのでlocate .cabして別のファイルで実験。
「
<a href="http://mayu.sourceforge.net/ja/index.html">窓使いの憂鬱</a>」のソースがcabになってて
<pre>
% /c/windows/extrac32 source.cab
Microsoft (R) Cabinet Extraction Tool - Version (32G) 4.11.0603.3 (12/31/97)
Copyright (c) Microsoft Corp 1994-1997. All rights reserved.

 Cabinet source.cab

05-09-2000 11:28:44p A---           473 Makefile
05-09-2000 11:28:28p A---         1,550 bcc.mak
05-21-2000  3:20:50a A---           691 mayu-bcc.mak
&lt;後略&gt;
</pre>
てな感じでリストを見ることができました。
<pre>
% /c/windows/extrac32 source.cab Makefile  
Microsoft (R) Cabinet Extraction Tool - Version (32G) 4.11.0603.3 (12/31/97)
Copyright (c) Microsoft Corp 1994-1997. All rights reserved.

 Cabinet source.cab

Extracting Makefile
Extracting s\Makefile
Extracting d\Makefile
Extracting d\nt4\Makefile
</pre>
あらら。全部出ちゃうのか。

<h4><a name="200103234S1" href="200103c.html#200103234S1">_</a> <strong>CABの圧縮率</strong>: </h4>
<div class="sub">
展開してtar+gzip(-9),tar+bzip2してみた。
<pre>
% ls -l mayu.tar.* source.cab
-rw-r--r--   1 watanabe ruby        95360 Mar 24 00:45 mayu.tar.bz2
-rw-r--r--   1 watanabe ruby       111386 Mar 24 00:44 mayu.tar.gz
-rw-r--r--   1 watanabe ruby        95586 Mar 24 00:31 source.cab
</pre>
なんか圧縮率もいいなあ。

</div>
<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103235" title="200103235" href="200103c.html#200103235">■</a> 
JARH</h3>
print 'Just another Ruby hacker,'[/.*/]
<!-- section end -->
</div>
<!-- 2001/03/23 end -->



<hr class="hide">
<!-- 2001/03/24 start -->
<h2><a name="20010324" href="200103c.html#20010324">2001-03-24 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200103241" title="200103241" href="200103c.html#200103241">■</a> 
[Cygwin] MO</h3>
gcc-2.95.3-1を試そうとMOから取り出そうとしたらそこだけ壊れてた。
また来週だな。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103242" title="200103242" href="200103c.html#200103242">■</a> 
w3m 0.2.1</h3>
無条件でrand48系を使われるとCygwinで困る。
面倒だからsrand48をsrandへlrand48をrandへ置換。
<pre>
% ruby -i~ -pe 'gsub /srand48/, &quot;srand&quot;' main.c url.c
% ruby -i~ -pe 'gsub /lrand48/, &quot;rand&quot;' local.c url.c
</pre>
それはそれとして、WinNTで実行するとSEGVる気がする。
そのうち調べてみよう。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103243" title="200103243" href="200103c.html#200103243">■</a> 
JARH</h3>
<pre>
#\
print 'Just another Ruby hacker,';\
__END__
all:
	@ruby Makefile
</pre>
<!-- section end -->
</div>
<!-- 2001/03/24 end -->



<hr class="hide">
<!-- 2001/03/25 start -->
<h2><a name="20010325" href="200103c.html#20010325">2001-03-25 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200103251" title="200103251" href="200103c.html#200103251">■</a> 
ri 0.6, rubyunit 0.3.5a, win32ole 0.2.6</h3>
更新。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103252" title="200103252" href="200103c.html#200103252">■</a> 
cross-compiling</h3>
クロスでconfigureするとset/getpgrpのチェックのところでエラーになるんだけど、
どうしたらいいの？助けてという感じのメールを英語でもらう。
なぜかLinuxでmakeしてるのがばれてる。
そういえばRuby自身はどうやってるか書いてない気もする。

<h4><a name="200103252S1" href="200103c.html#200103252S1">_</a> <strong>i386-cygwin</strong>: </h4>
<div class="sub">
<pre>
% env CFLAGS=-Os CC='i686-pc-cygwin-gcc' \
  ac_cv_func_getpgrp_void=yes \
  ac_cv_func_setpgrp_void=yes \
  ac_cv_sizeof_long_long=8 \
  ac_cv_func_memcmp_clean=yes \
  ac_cv_func_getrlimit=no \
  ./configure \
  --target=i386-cygwin \
  --host=i686-pc-cygwin \
  --build=i586-pc-linux-gnu \
  --program-prefix='' \
  --includedir=/usr/local/cygwin-local/include \
  --with-tcl-dir=/usr/local/mingw \
  --with-tk-dir=/usr/local/mingw \
  --enable-tcltk_stubs \
  --with-tcllib=tclstub83 \
  --with-tklib=tkstub83 \
  --with-curses-dir=/usr/local/cygwin-local/ncurses \
  --with-opt-dir=/usr/local/cygwin-local \
  --enable-shared
</pre>
あ、Cygwin 1.1.8になったんだから
<a href="200101c.html#200101222">getrlimitはno</a>にする必要はないんだった。

</div>
<h4><a name="200103252S2" href="200103c.html#200103252S2">_</a> <strong>i386-mingw32</strong>: </h4>
<div class="sub">
<pre>
% env CFLAGS=-Os CC=&quot;i686-pc-cygwin-gcc -bmingw&quot; \
  ac_cv_func_getpgrp_void=yes \
  ac_cv_func_setpgrp_void=yes \
  ac_cv_c_bigendian=no \
  ac_cv_sizeof_long_long=8 \
  ac_cv_func_memcmp_clean=yes \
  ./configure \
  --target=i386-mingw32 \
  --host=i686-pc-cygwin \
  --build=i586-pc-linux-gnu \
  --includedir=/usr/local/mingw/include \
  --enable-tcltk_stubs \
  --with-tcllib=tclstub83 \
  --with-tklib=tkstub83 \
  --with-opt-dir=/usr/local/mingw \
  --enable-shared
</pre>

</div>
<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103253" title="200103253" href="200103c.html#200103253">■</a> 
JARH</h3>
print [].push 'Just ', 'another ', 'Ruby ', 'hacker,'
<!-- section end -->
</div>
<!-- 2001/03/25 end -->



<hr class="hide">
<!-- 2001/03/26 start -->
<h2><a name="20010326" href="200103c.html#20010326">2001-03-26 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200103261" title="200103261" href="200103c.html#200103261">■</a> 
[Cygwin] gcc-2.95.3-2</h3>
<a href="200103b.html#20010313">crtdll2.oが見つからない問題</a>も解決したらしい。snapshotもこれを使いだした。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103262" title="200103262" href="200103c.html#200103262">■</a> 
青いイナズマ</h3>
<a href="200103c.html#200103241">例のMOディスク</a>を会社のWinNTでフォーマットしエラーチェックしたら問題ないようなので、
lftpでmirrorした。が、途中でBlueThunderのおでましだ。
1年振りぐらいで見た気がする。
Officeとか使わないからふだんは非常に安定してるんだけど。
やっぱ例のMOディスクはもうだめだな。<br>
VNCのおかげでremoteのLinux側で起動してたemacsには何の被害もなし。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103263" title="200103263" href="200103c.html#200103263">■</a> 
lftp</h3>
あおきさんとこはlftpでどーんと取ってくると楽。
<pre>
% lftp http://www9.xdsl.ne.jp/~aamine/soft/
icrosoft FTP Service: .
cd ok, cwd=~aamine/soft                             
lftp www9.xdsl.ne.jp:~aamine/soft&gt; ls
drwxr-xr-x  --  ../ja/softica
drwxr-xr-x  --  ../en
-rw-r--r--  --  amstd-1.9.7.tar.gz
-rw-r--r--  --  inetc-1.3.3.tar.gz
-rw-r--r--  --  mailest-0.0.8.tar.gz
-rw-r--r--  --  net-1.1.34.tar.gz
-rw-r--r--  --  net-1.2.0.tar.gz
-rw-r--r--  --  racc-1.3.8.tar.gz
-rw-r--r--  --  setup-2.0.2.tar.gz
-rw-r--r--  --  setup-2.0.3.tar.gz
-rw-r--r--  --  strscan-0.6.2.tar.gz
-rw-r--r--  --  textbuf-0.3.8.tar.gz
-rw-r--r--  --  tmail-0.9.3.tar.gz
&lt;途中略&gt;
-rw-r--r--           -  2001-0KB-20 00:00  rut
-rw-r--r--           -  2001-3KB-20 00:00  sseruby.rb
lftp www9.xdsl.ne.jp:~aamine/soft&gt; 
</pre>
ここでmget *.tar.gzできるのがlftpのいいところ。
この0KBとか3KBはlftpが理解できない形式だからか？
てゆうかlftpはそんなとこまで見るんだ。
そうか。FancyIndexing対応か。
<pre>
% lftp http://www.ruby-lang.org/~eban/ruby/
cd ok, cwd=~eban/ruby                                 
lftp www.ruby-lang.org:~eban/ruby&gt; ls
drwxr-xr-x           -  2001-01-08 04:00  ..
drwxr-xr-x           -  2001-01-15 22:10  binaries
-rw-r--r--          1k  2001-01-22 00:02  fake-TARGET.rb
-rw-r--r--          1k  2001-01-22 00:02  fake_TARGET.rb
lftp www.ruby-lang.org:~eban/ruby&gt; cd binaries
cd ok, cwd=~eban/ruby/binaries           
lftp www.ruby-lang.org:~eban/ruby/binaries&gt; ls
drwxr-xr-x           -  2001-03-12 00:02  ..
drwxr-xr-x           -  2001-03-19 21:00  cygwin
drwxr-xr-x           -  2001-03-19 22:25  djgpp
drwxr-xr-x           -  2001-03-19 20:55  mingw
lftp www.ruby-lang.org:~eban/ruby/binaries&gt; cd cygwin
cd ok, cwd=~eban/ruby/binaries/cygwin  
lftp www.ruby-lang.org:~eban/ruby/binaries/cygwin&gt; ls
-rw-r--r--  --  cygwin-1.1.8-2.dll.bz2
-rw-r--r--  --  cygwin-1.1.8-2-src.tar.gz
drwxr-xr-x           -  2001-02-19 23:33  ..
-rw-r--r--        263k  2001-02-01 00:09  cygwin1-1.1.8-2.dll.bz2
drwxr-xr-x           -  2001-03-20 00:18  ext
-rw-r--r--        651k  2001-01-22 02:42  ruby-1.6.2-i386-cygwin.tar.gz
-rw-r--r--  --  /en/download.html
-rw-r--r--        704k  2001-03-19 22:07  ruby-1.6.3-i386-cygwin.tar.gz
-rw-r--r--        127k  2001-01-26 18:05  xdelta.exe
lftp www.ruby-lang.org:~eban/ruby/binaries/cygwin&gt; 
</pre>
そういうことみたいだ。<br>
wwwoffleのcacheがかなり古い気もするというか古いよ。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103264" title="200103264" href="200103c.html#200103264">■</a> 
「無道編」と「GNU Autoconf/Automake/Libtool」</h3>
足したら5000円なのでamazonで注文。
なぜ今頃無道編かというといつも行く本屋には置いてなかったから。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103265" title="200103265" href="200103c.html#200103265">■</a> 
JARH</h3>
<pre>
morse=eval &lt;&lt;'+'.unpack(&quot;m&quot;)[0]
SGFzaFsqJXcoLi0gYQotLi4uIGIKLS4tLiBjCi0uLiBkCi4gZQouLi0uIGYK
LS0uIGcKLi4uLiBoCi4uIGkKLi0tLSBqCi0uLSBrCi4tLi4gbAotLSBtCi0u
IG4KLS0tIG8KLi0tLiBwCi0tLi0gcQouLS4gcgouLi4gcwotIHQKLi4tIHUK
Li4uLSB2Ci4tLSB3Ci0uLi0geAotLi0tIHkKLS0uLiB6CnwgXCAKKV0K
+
&lt;&lt;'+'.split.map{|x|morse[x]||x}.join.gsub(/\b[jr]/){|x|x.upcase}.display
.--- ..- ... - | .- -. --- - .... . .-. | .-. ..- -... -.-- | .... .- -.-. -.- . .-. ,
+
</pre>
<!-- section end -->
</div>
<!-- 2001/03/26 end -->



<hr class="hide">
<!-- 2001/03/27 start -->
<h2><a name="20010327" href="200103c.html#20010327">2001-03-27 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200103271" title="200103271" href="200103c.html#200103271">■</a> 
[Cygwin] w3m</h3>
-lncursesじゃなくて-ltermcapにするとWinNTではSEGVらない。
これは意外だ。とするとterminfoかな？
text vs. binary modeあたりが怪しいかも。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103272" title="200103272" href="200103c.html#200103272">■</a> 
<a href="http://homepage2.nifty.com/zn/nnikki/200103.html#26">shebang</a></h3>
#!はexecve(2)
<a href="#20010327F1"><sup><small>*1</small></sup></a>が解釈するので/bin/shが解釈する必要はないんですけど？
そういうメッセージも見たことないし。<br>
ところでみんなよく使うshebangってなんの略と思ったら、
そういう単語がまさかあるとは。

<hr align="left" width="40%">
<div>
<a name="20010327F1" href="200103c.html#20010327F1"><small>*1</small></a>:
Cygwinの場合システムコールじゃないから(2)というのも変だな。
online manualにもman2がないし。
</div>
<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103273" title="200103273" href="200103c.html#200103273">■</a> 
<a href="http://signup.biglobe.ne.jp/tsutaya/entry/campaign.html">BIGLOBE and TSUTAYA</a></h3>
ADSLに完全に移行しちゃった人なんかには便利かも。
mobileとかdialupしたいときはたまにあるだろうし。
月4時間まで無料。3月末までは入会金も無料。
あ、freecomの代わりにこれ使ってみようかな。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103274" title="200103274" href="200103c.html#200103274">■</a> 
JARH</h3>
print 'Just another Ruby hacker,'[0..-1]
<!-- section end -->
</div>
<!-- 2001/03/27 end -->



<hr class="hide">
<!-- 2001/03/28 start -->
<h2><a name="20010328" href="200103c.html#20010328">2001-03-28 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200103281" title="200103281" href="200103c.html#200103281">■</a> 
<a href="http://homepage2.nifty.com/zn/nnikki/200103.html#28_t5">[Cygwin] shebang</a></h3>
うーむ。再現しません。
<pre>
% echo '#!/bin/echo ok' &gt;ok
% chmod +x ok
% sh -c ./ok
ok ./ok
% bash -c ./ok
ok ./ok
% zsh -c ./ok
ok ./ok
% tcsh -c ./ok                          
ok ./ok
% ksh -c ./ok
ok ./ok
</pre>
とりあえず、つい最近ashも更新されてるので、
ash-20010326をインストールしてみては？

<h4><a name="200103281S1" href="200103c.html#200103281S1">_</a> <strong>snapshot</strong>: </h4>
<div class="sub">
あ、そういえば新しいsymlinkを試したくて、
その時にsnapshotを入れたんだった。
<pre>
% uname -a
CYGWIN_98-4.10 JARH 1.3.0(0.35/3/2) 2001-02-25 15:01 i586 unknown
</pre>
とするとCygwin 1.1.8-2のバグかもしれないなあ。

</div>
<h4><a name="200103281S2" href="200103c.html#200103281S2">_</a> <strong>w3m</strong>: </h4>
<div class="sub">
そこでまた気づいたけど、
会社のWinNTのほうは1.1.8-2のままだから、
w3mがSEGVるのもこれが原因か？
明日は出張だから明後日試そう。

</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103282" title="200103282" href="200103c.html#200103282">■</a> 
<a href="http://cgi.NetLaputa.ne.jp/~kose/diary/index.cgi?200103c&amp;to=200103241S1#200103241S1">[Cygwin] zsh</a></h3>
今は*.batもNTなら*.cmdも実行できますね。
B19頃はできてたんだけど、
B20.1の途中からかできなくなったような感じで、
その時の苦労がトラウマになっているのかも。
それともhoge.cmdがhogeで呼べなくなったことと勘違いしてたのかなあ。<br>
いずれにせよ気づかせてくれてありがとうございます。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103283" title="200103283" href="200103c.html#200103283">■</a> 
JARH</h3>
print 'Just another Ruby hacker,'.instance_eval{self}
<!-- section end -->
</div>
<!-- 2001/03/28 end -->



<hr class="hide">
<!-- 2001/03/29 start -->
<h2><a name="20010329" href="200103c.html#20010329">2001-03-29 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200103291" title="200103291" href="200103c.html#200103291">■</a> 
GNU Autoconf/Automake/Libtool</h3>
届いた。<br>
ちらっと見るとやけにCygwinの文字が目につく。
第24章は丸々Cygwinの章だし。

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103292" title="200103292" href="200103c.html#200103292">■</a> 
出張</h3>
久し振りにPerlでスクリプトを書く。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103293" title="200103293" href="200103c.html#200103293">■</a> 
JARH</h3>
class String; def +@() print self end; +'Just another Ruby hacker,' end
<!-- section end -->
</div>
<!-- 2001/03/29 end -->



<hr class="hide">
<!-- 2001/03/30 start -->
<h2><a name="20010330" href="200103c.html#20010330">2001-03-30 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200103301" title="200103301" href="200103c.html#200103301">■</a> 
[Cygwin] binary mount</h3>
Cygwinで何気なく
<pre>
% vi c:/tmp/hoge.txt
</pre>
なんてことはよくやってしまうと思うのだが
<a href="#20010330F1"><sup><small>*1</small></sup></a>、そのままセーブすると
<pre>
% od -c c:/tmp/hoge.txt 
0000000   h   o   g   e  \r  \n
0000006
</pre>
ととてもいやなことになってたりする。
ちゃんとbinary modeでopenするようにjvimを書き換えればいいんだけど、
redirectも同じだしねえ。
<pre>
% echo hoge &gt;c:/tmp/hoge.txt
% od -c c:/tmp/hoge.txt     
0000000   h   o   g   e  \r  \n
0000006
</pre>
で、いまごろ気づいたんだけど、これって
<pre>
% mkdir -p /mnt/c
% mount -b c: /mnt/c
</pre>
とか適当にmountしとけばいいようだ。
<pre>
% echo hoge &gt;c:/tmp/hoge.txt
% od -c c:/tmp/hoge.txt 
0000000   h   o   g   e  \n
0000005
</pre>
/cygdriveじゃ長過ぎて面倒なので
<pre>
% mount -b --change-cygdrive-prefix /
</pre>
として
<pre>
/c/tmp/hoge.txt
</pre>
でアクセスできるようにはしてたんだけど。<br>
じゃobsoleteな//cはどうかというと
<pre>
% echo hoge &gt;//c/tmp/hoge.txt
% od -c //c/tmp/hoge.txt 
0000000   h   o   g   e  \r  \n
0000006
</pre>
頑固一徹である。<br>

<hr align="left" width="40%">
<div>
<a name="20010330F1" href="200103c.html#20010330F1"><small>*1</small></a>:
MinGW関連をmakeしててCOPY&amp;PASTEしたときとか。
</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103302" title="200103302" href="200103c.html#200103302">■</a> 
期末</h3>
今週はなんやかんやで忙しかった。

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200103303" title="200103303" href="200103c.html#200103303">■</a> 
JARH</h3>
print '1J2u3s4t5 6a7n8o9t0h1e2r3 4R5u6b7y8 9h0a1c2k3e4r5,'.delete('0-9')
<!-- section end -->
</div>
<!-- 2001/03/30 end -->



<hr class="hide">
<!-- 2001/03/31 start -->
<h2><a name="20010331" href="200103c.html#20010331">2001-03-31 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200103311" title="200103311" href="200103c.html#200103311">■</a> 
[Cygwin] gcc-2.95.3-2</h3>
<h4><a name="200103311S1" href="200103c.html#200103311S1">_</a> <strong>make</strong>: </h4>
<div class="sub">
<pre>
% uname -a
Linux ruby 2.2.18 #2 Sat Dec 23 15:12:42 JST 2000 i586 unknown
% tar xfvz gcc-2.95.3-2-src.tar.gz
% cd gcc-2.95.3-2
% mkdir obj; cd obj
% CFLAGS=-Os CXXFLAGS=-Os \
  ../configure \
  --target=i686-pc-cygwin \
  --prefix=/usr/local/cygwin \
  --enable-languages=c,c++
% time make |&amp; tee make.log
&lt;途中略&gt;
2547.09s real  2354.09s user  154.67s sys  98% cpu
2547.09s real  0.08s user  0.22s sys  0% cpu
</pre>
できあがったgcc/specsを見ると%qが使われている。
ドキュメントにも反映されてない機能だ。てゆうかCygwinでの追加だな。
crt?.oがあるディレクトリを指定するために追加したようだ。

</div>
<h4><a name="200103311S2" href="200103c.html#200103311S2">_</a> <strong>-iwithprefixbefore</strong>: </h4>
<div class="sub">
最近なんでbmingw package更新してないかというと、
specsの*cpp:の中で-iwithprefixbeforeを使っているんだけど、
存在しないディレクトリを指定するとcppがSEGVってしまうというバグがあるからだ。
Cygwinが入れたバグだ。いや深くは調べてないんだけど、きっとそうに違いない。
2.95.2-9あたりからそうなってるので。
これのお蔭でnative, cross兼用のspecsが書けなくなってしまった。
兼用にするには必ず存在しないディレクトリを指定することになってしまうから。
まったくもって困ったあるよ。<br>
crossでは
<pre>
/usr/local/cygwin/include/{mingw,w32api}
</pre>
が存在しないし、nativeでは
<pre>
/usr/i686-pc-cygwin/include/{mingw,w32api}
</pre>
が存在しない。どうする？

</div>
<h4><a name="200103311S3" href="200103c.html#200103311S3">_</a> <strong>/usr/local/cygwin</strong>: </h4>
<div class="sub">
-idirafterを使えばよさそうけど、/usr/local/cygwinが出てくるのもなあ。
と思ったら-Lですでに/usr/local/cygwinを使ってるのであった。じゃいいや。

</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200103312" title="200103312" href="200103c.html#200103312">■</a> 
JARH</h3>
<pre>
'Jaubsctd eafngohtihjekrl mRnuobpyq rhsatcukvewrx,y'.
gsub(/(.)./,'\1').display
</pre>
<!-- section end -->
</div>
<!-- 2001/03/31 end -->

<hr>
<div>
<a href="200103b.html">&lt;Prev(,)</a> | 
<a href="200104a.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="https://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="https://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
