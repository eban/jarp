<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2005-7-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200506c.html">
<link rel="next" href="200507b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2005年7月上旬〜</p>
<hr>
<div>
<a href="200506c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200507b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2005/07/01 start -->
<h2><a name="20050701" href="200507a.html#20050701">2005-07-01 (Fri)</a></h2>
<!-- 2005-07-02 03:49:28 -->

<div class="entry1">
<h3><a name="200507011" title="200507011" href="200507a.html#200507011">■</a> 
6月のspam</h3>
<p>
214通。Gmailには過去30日で4700スレッドほど。
最小は4500スレッドほどだった。微増傾向。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507012" title="200507012" href="200507a.html#200507012">■</a> 
<a href="http://bazaar.canonical.com/ReleaseNotes1.4">[Soft] Bazaar Revision Control System 1.4.2</a></h3>
<p>

<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/5298">ruby-core</a>で出てきたArch互換の分散システムSCMらしい。
</p><blockquote><p>
About:
The Bazaar Revision Control System is a changeset-oriented revision
control system based on Arch that makes it possible to retain previous
changes to projects and coordinate development with other
developers. Its goal is to speed development of an upwards- compatible
version of Arch.
</p></blockquote><p>
日本語モードで
<a href="http://bazaar.canonical.com/">http://bazaar.canonical.com/</a>にアクセスするとWikiのフロントページが出てきてなんか使いづらいな。
英語版 
<a href="http://bazaar.canonical.com/FrontPage">http://bazaar.canonical.com/FrontPage</a>を直接見るのがよさそうだ。
</p>

<p>
Archといえば、
<a href="200410a.html#200410033">あの冗長なパス名</a>がいやなんだよねえ。
かなり損してると思う。
</p>
<!-- section end -->
</div>
<!-- 2005/07/01 end -->



<hr class="hide">
<!-- 2005/07/02 start -->
<h2><a name="20050702" href="200507a.html#20050702">2005-07-02 (Sat)</a></h2>
<!-- 2005-07-03 01:53:41 -->

<div class="entry1">
<h3><a name="200507021" title="200507021" href="200507a.html#200507021">■</a> 
[CVS] Rubyのversion.hを自動更新</h3>
<p>
CVS 1.12になったのでcvs ciの中でcvs ciしてもブロックしなくなるはずで、Rubyのversion.hを自動更新にしてみた。
さてどうなるか。subversionなら簡単にできるのかな？
</p>
<!-- section end -->
</div>
<!-- 2005/07/02 end -->



<hr class="hide">
<!-- 2005/07/03 start -->
<h2><a name="20050703" href="200507a.html#20050703">2005-07-03 (Sun)</a></h2>
<!-- 2005-07-04 01:00:09 -->

<div class="entry1">
<h3><a name="200507031" title="200507031" href="200507a.html#200507031">■</a> 
<a href="http://cygwin.com/ml/cygwin-announce/2005-07/msg00001.html">[Cygwin] Updated: cygwin-1.5.18-1</a></h3>
<blockquote><dl>
<dt>
Changes:
<dd>
This release fixes problems with running 16-bit applications on
Windows 9x, using a //share as a home directory, and CTRL-C
inappropriately killing background processes. It also now provides some
new math functions and has a minor speedup for some pthread functions. 
</dl></blockquote>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507032" title="200507032" href="200507a.html#200507032">■</a> 
<a href="http://posren.livedoor.com/">[DVD] ぽすれん</a></h3>
<p>
というわけで、ぽすれんを試す。
夜中の2時頃登録して昼に起きたら、発送完了メールがもう来てた。
明日には届くか？なんかDISCASより速いかも。
</p>

<p>
休会を調べてみたらお試し期間中はできないようだ。
さらに年会費も発生するらしい。休会してもあまり利点はない。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200507033" title="200507033" href="200507a.html#200507033">■</a> 
[CVS] loginfoのDEFAULTの罠</h3>
<p>
昨日のRubyのversion.h自動更新はCVSROOTのloginfoに
</p>
<pre>
ruby $CVSROOT/CVSROOT/loginfo_version.rb %p %s
</pre>
<p>
を追加したわけだが、なぜかcommit mailのほうが来なくなった。
そもそもその処理するスクリプトが呼ばれない感じ。
そうか
<a href="http://www.cyber.sccs.chukyo-u.ac.jp/~kin/help/cvs-jp/cvs-jp_138.html">DEFAULT</a>
は
</p><blockquote><p>
第一項が `DEFAULT' である行の記述は、リポジトリ名がファイル中のどの正
規表現にも合致しない場合に適用されます。
</p></blockquote><p>
ってことなんだな。ここでcommit mailの処理を指定してるから起動されない。
というわけで、ALLで対応。スクリプトの中で判断することにした。
</p>
<!-- section end -->
</div>
<!-- 2005/07/03 end -->



<hr class="hide">
<!-- 2005/07/04 start -->
<h2><a name="20050704" href="200507a.html#20050704">2005-07-04 (Mon)</a></h2>
<!-- 2005-07-05 02:52:40 -->

<div class="entry1">
<h3><a name="200507041" title="200507041" href="200507a.html#200507041">■</a> 
<a href="http://www.kadokawa.co.jp/dis/bookcover/">[Book] 発見。ブックカバー</a></h3>
<p>
角川もやってるね。
この
<a href="http://www.kadokawa.co.jp/dis/100/">100冊</a>から2冊買えば必ずもらえるらしい。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507042" title="200507042" href="200507a.html#200507042">■</a> 
[CVS] CIA bot</h3>
<p>
なぜかCIA botのlogがversion.hのlogに置き換わってしまう。
とりあえずversion.hを更新するスクリプトを最後に実行するようにloginfoを変更して様子見。
</p>
<!-- section end -->
</div>
<!-- 2005/07/04 end -->



<hr class="hide">
<!-- 2005/07/05 start -->
<h2><a name="20050705" href="200507a.html#20050705">2005-07-05 (Tue)</a></h2>
<!-- 2005-07-07 00:23:10 -->

<div class="entry1">
<h3><a name="200507051" title="200507051" href="200507a.html#200507051">■</a> 
[CVS] version.hの自動更新</h3>
<p>
とりあえず
<a href="http://cia.navi.cx/stats/project/ruby">CIA botのlog</a>もうまくいってるようだ。
残るはimportぐらいか？ってこっちは1.12になってからまだimportされてないので、
commit mail自体に不安がある。どうせならその前にsubversionに移行しないかなあ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507052" title="200507052" href="200507a.html#200507052">■</a> 
<a href="http://subversion.tigris.org/">[Linux] Subversion 1.2.0</a></h3>
<p>
perlはprefixを/usr/localにして自前でインストールしてるので、subversionも1.2.0にして自前でインストールすることにした。
subversion/bindings/swig/INSTALLを見て
</p>
<pre>
% ./configure
% make all install swig-pl swig-pl-lib install-swig-pl install-swig-pl-lib
% cd subversion/bindings/swig/perl/native
% perl Makefile.PL EXTRAOPTIONSHERE
% make install
</pre>
<p>
と実行。swig関係はsvkへの布石。
</p>
<!-- section end -->
</div>
<!-- 2005/07/05 end -->



<hr class="hide">
<!-- 2005/07/06 start -->
<h2><a name="20050706" href="200507a.html#20050706">2005-07-06 (Wed)</a></h2>
<!-- 2006-02-01 01:14:24 -->

<div class="entry1">
<h3><a name="200507061" title="200507061" href="200507a.html#200507061">■</a> 
<a href="http://subversion.tigris.org/">[Linux] Subversion 1.2.1</a></h3>
<p>
昨日そろそろ1.2.0にするかーと思って上げたのに。とか書くととても日記らしい。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507062" title="200507062" href="200507a.html#200507062">■</a> 
<a href="http://posren.livedoor.com/">[DVD] ぽすれんだと中2日</a></h3>
<p>
日曜日に借りて、月曜日に届いて、火曜日の朝にポストに投函、今日水曜日に返却完了メール、続いてまた借りる、発送完了メール。
というわけで、明日木曜日には届きそう。つまり中2日のペースだ。

<a href="http://www.discas.net/">discas</a>のMプランのほうは当日の発送がないから中3日。
Aプランで中2日になっても1ヶ月8枚の制限があるんじゃほとんど意味なし。
というわけでいっぱい借りたい場合、年会費1050円ぐらいの差だったらぽすれんのほうがよさげだ。
</p>
<!-- section end -->
</div>
<!-- 2005/07/06 end -->



<hr class="hide">
<!-- 2005/07/07 start -->
<h2><a name="20050707" href="200507a.html#20050707">2005-07-07 (Thu)</a></h2>
<!-- 2005-07-08 02:54:18 -->

<div class="entry1">
<h3><a name="200507071" title="200507071" href="200507a.html#200507071">■</a> 
<a href="http://www.ntv.co.jp/jyoou/">[TV] 女王の教室</a></h3>
<p>
録っといたビデオを今頃見た。いやすごいなこりゃ。笑った。
しかしjyoouという表記に違和感。このyはいったい？
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507072" title="200507072" href="200507a.html#200507072">■</a> 
[cmail] Freshmeat Newsletter: 次のエントリへジャンプ</h3>
<p>
Freasmeat Newsletterで次のエントリにジャンプする機能が欲しくなった。
cmail-summary-isearch-articleを参考に作る。というかぱくる。
結構便利だ。
</p>
<pre>
(defvar cmail-fm-sep-regex
	&quot;\\(- %  - %  - % - % -\\|::: R E L E A S E   D E T A I L S :::\\)&quot;)

(defun cmail-summary-fm-article (dir)
  &quot;goto dir on the freshmeat letter.&quot;
  (interactive)
  (let ((page (cmail-get-page-number-from-summary)))
    (or (get-buffer-window *cmail-mail-buffer)
	(string= cmail-current-folder *cmail-current-folder)
	(= page *cmail-current-page)
	(cmail-show-contents page)))
  (let ((w (selected-window)))
    (unwind-protect
	(progn
	  (pop-to-buffer *cmail-mail-buffer)
	  (widen)
	  (if (&lt; 0 dir)
	      (re-search-forward cmail-fm-sep-regex nil t)
	    (re-search-backward cmail-fm-sep-regex nil t))
	  (recenter 0))
      (select-window w))))

(defun cmail-summary-fm-next ()
  &quot;go next entry on the freshmeat newsletter.&quot;
  (interactive)
  (cmail-summary-fm-article 1))

(defun cmail-summary-fm-prev ()
  &quot;go previous entry on the freshmeat newsletter.&quot;
  (interactive)
  (cmail-summary-fm-article -1))

(add-hook 'cmail-summary-mode-hook
	    (lambda ()
	      (define-key cmail-summary-mode-map &quot;;&quot; 'cmail-summary-fm-next)
	      (define-key cmail-summary-mode-map &quot;:&quot; 'cmail-summary-fm-prev)))
</pre>

<!-- section end -->
</div>
<!-- 2005/07/07 end -->



<hr class="hide">
<!-- 2005/07/08 start -->
<h2><a name="20050708" href="200507a.html#20050708">2005-07-08 (Fri)</a></h2>
<!-- 2005-07-09 02:31:19 -->

<div class="entry1">
<h3><a name="200507081" title="200507081" href="200507a.html#200507081">■</a> 
[Net] ブロードバンドルータ</h3>
<p>
どうにも調子が悪いルータを買い換えた。今回のポイントは内蔵マグネット。
PCの筐体にぺたっとくっつけられてすっきり。
ソフマップで
<a href="http://www.iodata.jp/prod/network/bbrouter/2004/np-bbrm/index.htm">I-O DATAのNP-BBRM</a>

を週末特価500円引き3980円で買った。
</p>

<p>
今のところ調子いい。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200507082" title="200507082" href="200507a.html#200507082">■</a> 
<a href="http://www.nikkei.co.jp/news/main/20050704AT1D0406V04072005.html">[TV] 日テレ氏家議長、巨人戦の放送時間延長見直しも検討</a></h3>
<p>
いやもう中継自体やめたほうがいいよ。
</p>
<!-- section end -->
</div>
<!-- 2005/07/08 end -->



<hr class="hide">
<!-- 2005/07/09 start -->
<h2><a name="20050709" href="200507a.html#20050709">2005-07-09 (Sat)</a></h2>
<!-- 2005-07-10 01:25:36 -->

<div class="entry1">
<h3><a name="200507091" title="200507091" href="200507a.html#200507091">■</a> 
[Ruby] kmyaccをrubyで試す</h3>
<p>

<a href="http://d.hatena.ne.jp/kmori58/20050708#1120853133">%pure_parser</a>が入ったということなのでRuby 1.9で試してみる。
しかしsrc/Makefileでいきなりエラーになる。
どうもcc -Mで作った依存関係がそのまま入っているようだ。
</p><blockquote><p>
make[1]: *** `yacc.o' に必要なターゲット `/usr/lib/gcc-lib/i386-linux/2.95.4/include/stddef.h' を make するルールがありません。中止。
</p></blockquote><p>
ここはcc -MMで作って欲しいところ。こっちなら#include &lt;file&gt;が含まれない。
とりあえず依存関係は全部削除してmakeを通すことにした。
</p>

<p>
つづいてrubyで試す。
</p>
<pre>
% kmyacc parse.y
% mv y.tab.c parse.c
% make parse.o
</pre>
<p>
と手動で作りmakeしてみるとエラーになる。
</p><blockquote><p>
/usr/local/lib/kmyacc.c.parser:80: error: 文法エラー が '(' トークンの前にあります
</p></blockquote><p>
うーむ。なんだろう？gcc -Eしてcpp実行後の結果を見てみると
</p>
<pre>
# 75 &quot;/usr/local/lib/kmyacc.c.parser&quot;
int ruby_yydebug;


int yylex();
int parser_yyparse();
int parser_yyerror(((struct parser_params*)parser_v), );
</pre>
<p>
となってた。parse.yの
</p>
<pre>
#define yyerror(msg) parser_yyerror(parser, msg)

#define parser ((struct parser_params*)parser_v)
</pre>
<p>
が原因らしい。もともとkmyacc.c.parserの宣言には
</p>
<pre>
int yyerror();
</pre>
<p>
のように引数がないので、msgがなくなるんだろうな。実験してみる。
</p>
<pre>
% cat x.c      
#define foo(a) bar(b, a)
int foo();
% gcc -E -P x.c
int bar(b, );
</pre>
<p>
やっぱそうか。どうしたもんかな。なんか他にもありそうだ。
</p>
<!-- section end -->
</div>
<!-- 2005/07/09 end -->



<hr class="hide">
<!-- 2005/07/10 start -->
<h2><a name="20050710" href="200507a.html#20050710">2005-07-10 (Sun)</a></h2>
<!-- 2005-07-11 01:36:06 -->

<div class="entry1">
<h3><a name="200507101" title="200507101" href="200507a.html#200507101">■</a> 
<a href="http://fedoraproject.org/wiki/YumUpgradeFaq">[FC4] Yum Upgrade FAQ</a></h3>
<p>
FC3からFC4へyumでアップグレードする方法を探してたら、そのものずばりが見つかった。
fedora-releaseというパッケージを使えばいいようだ。
やろうかと思ったんだけど、ぽすれんからDVDが届いたので中断。
3連休には上げよう。しかしProblemsがちょっと気になる。
もうちょっとぐぐってみるか。
</p>
<!-- section end -->
</div>
<!-- 2005/07/10 end -->

<hr>
<div>
<a href="200506c.html">&lt;Prev(,)</a> | 
<a href="200507b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
