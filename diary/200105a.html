<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "https://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2001-5-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200104c.html">
<link rel="next" href="200105b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2001年5月上旬〜</p>
<hr>
<div>
<a href="200104c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200105b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2001/05/01 start -->
<h2><a name="20010501" href="200105a.html#20010501">2001-05-01 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200105011" title="200105011" href="200105a.html#200105011">■</a> 
さいたま市</h3>
<p>
今日からさいたま市民だ。
大宮区とか作るのかと思ったら、
特別区名は政令指定都市にならないと作れない。
2年後にはなる予定で、
その時に大宮、与野、浦和という名前は区として復活するらしい。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105012" title="200105012" href="200105a.html#200105012">■</a> 
[Cygwin] gtk-0.24</h3>
<p>
andyさんから催促されたので作る。
DLLはそのままWin32版を使うことにしたのでその

<a href="../files/rbgtk.c.diff">変更</a> 。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105013" title="200105013" href="200105a.html#200105013">■</a> 
YARPC 19100</h3>
<p>
整理番号23だったけど、そんなに少ないの？<br>
しまった。今年は19101だった。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105014" title="200105014" href="200105a.html#200105014">■</a> 
中国茶の愉しみ</h3>
<p>
なぜか夜中に教育テレビを見る。
いろんな用語を覚えた。蓋碗とか明前西湖龍井茶とか。
<!-- 明前とは二十四節気の清明節の前の時期にあたる。 -->
<!-- 清明節は今の暦の4/5あたり。ってどうでもいいじゃん。 -->
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105015" title="200105015" href="200105a.html#200105015">■</a> 
心美</h3>
<p>
ここみねえ。読めないな。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105016" title="200105016" href="200105a.html#200105016">■</a> 
JARH</h3>
<pre>
print [[0,'Just another Ruby hacker,'],1].first.last
</pre>
<!-- section end -->
</div>
<!-- 2001/05/01 end -->



<hr class="hide">
<!-- 2001/05/02 start -->
<h2><a name="20010502" href="200105a.html#20010502">2001-05-02 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200105021" title="200105021" href="200105a.html#200105021">■</a> 
寒い</h3>
<p>
まじで5月？
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105022" title="200105022" href="200105a.html#200105022">■</a> 
[MinGW] gtk-0.24</h3>
<p>
ついでにi386-mingw32版のほうも。
そういえばGIMP for Windowsって最近変化がないね。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105023" title="200105023" href="200105a.html#200105023">■</a> 
[Cygwin] opengl-1.1.0-4</h3>
<p>
GL_VERSION_1_2がちゃんとなくなってる。てゆうかそもそも誰が足したんだ？
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105024" title="200105024" href="200105a.html#200105024">■</a> 
JARH</h3>
<pre>
{''=&gt;'JARH'}.update(''=&gt;'Just another Ruby hacker,').display
</pre>
<!-- section end -->
</div>
<!-- 2001/05/02 end -->



<hr class="hide">
<!-- 2001/05/03 start -->
<h2><a name="20010503" href="200105a.html#20010503">2001-05-03 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200105031" title="200105031" href="200105a.html#200105031">■</a> 
中国語講座</h3>
<p>
なぜか古畑任三郎のまねをするおやじが出てきた。結構似てる。
そのあと結局中国茶の話を聞くことになる。今日で終わりか。
<!-- 青茶(あおちゃ、凍頂烏龍)、緑茶(龍井)、紅茶、 -->
<!-- 黒茶(ぷーあーる、まず洗う、洗茶)、 -->
<!-- 白茶、黄茶(君山銀針)、 -->
<!-- 古茶(こちゃ、老茶ともいう、陳年熟凍頂烏龍(ちんねんじゅく)、焙煎してある) -->
<!-- 聞香杯、茶海 -->
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105032" title="200105032" href="200105a.html#200105032">■</a> 
rdtool 0.6.8</h3>
<pre>
% i386-cygwin-ruby rdtoolconf.rb 
creating Makefile
% make
racc  rd/rdblockparser.ry
racc  rd/rdinlineparser.ry
ruby -I. rd2 -r rd/rd2html-lib.rb README.rd &gt; README.html
./rd/rdinlineparser.tab.rb:5:in `require': No such file to load \
  -- forwardable (LoadError)
</pre>
<p>
お？

<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=forwardable">forwardable</a>
が必要になったんだ。README.rdにも書いてある。<br>
それはそれとしてなんかとても遅くなった気がする。
</p>
<pre>
% time gzip -dc ruby-refm.rd.gz| rd2 -r rd/rd2man-lib -o rubyrefm
/usr/local/bin/rd2: output to rubyrefm.1...
2.74s real  0.13s user  0.02s sys  5% cpu
866.53s real  865.55s user  0.63s sys  99% cpu
</pre>
<p>
14分もかかってる。0.6.7に戻すとこんなもん。
</p>
<pre>
% time gzip -dc ruby-refm.rd.gz| rd2 -r rd/rd2man-lib -o rubyrefm
/usr/local/bin/rd2: output to rubyrefm.1...
2.49s real  0.16s user  0.03s sys  7% cpu
149.17s real  148.54s user  0.44s sys  99% cpu
</pre>
<p>
とりあえずuploadは見送ることにした。
やっぱPCを買い換えろってことか。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105033" title="200105033" href="200105a.html#200105033">■</a> 
鈴木あみ</h3>
<p>
最近これでもかってくらい鈴木あみのCMが目立つ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105034" title="200105034" href="200105a.html#200105034">■</a> 
<a href="http://polinky.com">ポリンキー </a></h3>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105035" title="200105035" href="200105a.html#200105035">■</a> 
JARH</h3>
<pre>
{:JARH=&gt;'Just another Ruby hacker,'}.values.display
</pre>
<!-- section end -->
</div>
<!-- 2001/05/03 end -->



<hr class="hide">
<!-- 2001/05/04 start -->
<h2><a name="20010504" href="200105a.html#20010504">2001-05-04 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200105041" title="200105041" href="200105a.html#200105041">■</a> 
<a href="http://www3.ocn.ne.jp/~takeyan/diary/200105a.html#200105042">さいたま市 </a></h3>
<p>
10年前から大宮、与野、浦和は市内扱いだったのだ。
それぞれ市内局番は0486,0487,0488から048にそのときに変更になった
(与野の市内局番は違ったかも)。
</p>

<h4><a name="200105041S1" href="200105a.html#200105041S1">_</a> <strong>住所変更</strong>: </h4>
<div class="sub">
<p>
4/27に注文した「頭文字D」が今日届いたが、「大宮市」のままだった。
そりゃ合併前だから当然か。
まさか住所変更してまわらなきゃいけないなんてことはないよね？
</p>

</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105042" title="200105042" href="200105a.html#200105042">■</a> 
拡張ライブラリ</h3>
<p>
最近さぼってたから何が最新なんだかわからなくなってきた。
とりあえずrubyunitを0.3.7aに更新。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105043" title="200105043" href="200105a.html#200105043">■</a> 
JARH</h3>
<pre>
{'Just another Ruby hacker,'=&gt;:JARH}.invert[:JARH].display
</pre>
<!-- section end -->
</div>
<!-- 2001/05/04 end -->



<hr class="hide">
<!-- 2001/05/05 start -->
<h2><a name="20010505" href="200105a.html#20010505">2001-05-05 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200105051" title="200105051" href="200105a.html#200105051">■</a> 
メール</h3>
<p>
休み中はビデオを借りまくって個人宛てメール以外はほとんど読んでなかった。
これから読むことにする。読むというより眺めるだけだが。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105052" title="200105052" href="200105a.html#200105052">■</a> 
Cygwin 1.3.1</h3>
<p>
遅いとか不安定とか、上げても何もいいことはない。
1.1から1.2じゃなくて1.3になったってことは、
Cygwinにstableなんてないってことか。納得。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105053" title="200105053" href="200105a.html#200105053">■</a> 
JARH</h3>
<pre>
print ['Just another Ruby hacker,'=&gt;:JARH][0].keys
</pre>
<!-- section end -->
</div>
<!-- 2001/05/05 end -->



<hr class="hide">
<!-- 2001/05/06 start -->
<h2><a name="20010506" href="200105a.html#20010506">2001-05-06 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200105061" title="200105061" href="200105a.html#200105061">■</a> 
気温</h3>
<p>
寒かったり暖かったり(というか今日なんか暑いくらい)で、体調悪し。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105062" title="200105062" href="200105a.html#200105062">■</a> 
rim.or.jp</h3>
<p>
未だにFreeBSD 3.3だけどバージョンアップする気はないんだろうか？
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105063" title="200105063" href="200105a.html#200105063">■</a> 
rdtool</h3>
<p>
profileを取ってみた。<br>
0.6.7:
</p>
<pre>
 %   cumulative   self              self     total
time   seconds   seconds    calls  ms/call  ms/call  name
12.57     6.64      6.64     2662     2.49     4.00  RD::RDInlineParser#next_token
10.40    12.13      5.49     2192     2.51     4.33  RD::RDParser#next_token
 7.97    16.34      4.21     7317     0.57     7.27  Array#each
 6.71    19.88      3.54    33672     0.11     0.11  StringScanner_C#scan
 5.64    22.86      2.98      619     4.81    85.24  Racc::Parser#_racc_do_parse_c
 4.59    25.29      2.42    12206     0.20     2.46  Kernel.catch
 2.78    26.76      1.47    16671     0.09     0.09  Regexp#===
 2.30    27.97      1.21     1329     0.91     3.16  RD::TextBlock#each_element
 &lt;後略&gt;
</pre>
<p>
0.6.8:
</p>
<pre>
 %   cumulative   self              self     total
time   seconds   seconds    calls  ms/call  ms/call  name
33.56    65.03     65.03    55307     1.18    11.21  Array#each
10.59    85.54     20.51    24656     0.83     2.46  RD::DescListItem::Term#to_label
 7.56   100.19     14.65    22244     0.66     1.73  RD::Headline#to_label
 5.76   111.35     11.16    49671     0.22     0.22  RD::StringElement#to_label
 3.44   118.01      6.66    50432     0.13     0.13  String#==
 3.36   124.52      6.51     2662     2.44     3.93  RD::RDInlineParser#next_token
 2.85   130.04      5.53     2192     2.52     4.29  RD::RDParser#next_token
 &lt;後略&gt;
</pre>

<p>
各#to_labelの処理時間が増えてるのが原因か？
</p>

<p>
<!-- * 名前 -->
<!-- The d.e.p - The Doggy Eels Project. ウナギ犬。 -->
<!-- TinaはLuv Tinaに改名。 -->
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105064" title="200105064" href="200105a.html#200105064">■</a> 
JARH</h3>
<pre>
print [{}].slice(0..0)[0].store '', 'Just another Ruby hacker,'
</pre>
<!-- section end -->
</div>
<!-- 2001/05/06 end -->



<hr class="hide">
<!-- 2001/05/07 start -->
<h2><a name="20010507" href="200105a.html#20010507">2001-05-07 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200105071" title="200105071" href="200105a.html#200105071">■</a> 
眠い</h3>
<p>
一日中眠かった。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105072" title="200105072" href="200105a.html#200105072">■</a> 
Ruby 1.6.4</h3>
<p>
もうそろそろリリースかな？
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105073" title="200105073" href="200105a.html#200105073">■</a> 
[Cygwin][MinGW]tcltklibの作りかた</h3>
<p>
そういえばtcltklibの作りかたを書いてない気がする。<br>
準備としては、まずどこかにtcl83.exeとかtcl84xx.exeをインストールする

<a href="#20010507F1"><sup><small>*1</small></sup></a>。
このままバージョンに依存した、つまりtcl83.dll, tk83.dllという名前に依
存したtcltklib.soを作ってもいいんだけど、Tcl/tk 8.11からはStubsという
機構が使えるようになっている。これを使うと8.11以降ならどれでもokという
便利な拡張ライブラリになる。そのときにはtcl83.lib, tk83.libではなく
tclstub83.lib, tkstub83.libを代わりにリンクする。<br>
たとえばTcl/Tk 8.3を/some/where/tcl83へインストールしたときは
</p>
<pre>
% ./configure \
  ...
  --enable-tcltk_stubs \
  --with-tcl-dir=/some/where/tcl83 \
  --with-tk-dir=/some/where/tcl83 \
  --with-tcllib=tclstub83 \
  --with-tklib=tkstub83
</pre>
<p>
という感じで。CygwinのGNU ldは-lfooでfoo.libも探すからこれでいい。<br>
クロスの環境に持ってくるときも一度どこかのWindowsにインストールしたも
のをコピーする。ものはincludeのした全部とlib/{tcl,tk}stub83.libだけ。
うちの場合は/usr/local/mingw/{include,lib}に置いてる。
NTFSなりFATなりmountしてるならコピーしなくても直接そこを指定してもいい。
</p>

<hr align="left" width="40%">
<div>
<a name="20010507F1" href="200105a.html#20010507F1"><small>*1</small></a>:

<a href="http://www.scriptics.com/">ここ</a> に行けばたぶんインストーラがある。
</div>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105074" title="200105074" href="200105a.html#200105074">■</a> 
JARH</h3>
<pre>
print 'Just another Ruby hacker,'.split.join ' '
</pre>
<!-- section end -->
</div>
<!-- 2001/05/07 end -->



<hr class="hide">
<!-- 2001/05/08 start -->
<h2><a name="20010508" href="200105a.html#20010508">2001-05-08 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200105081" title="200105081" href="200105a.html#200105081">■</a> 
<a href="http://www.cbook24.com">cbook24 </a></h3>
<p>
なぜquoted-printableでメールを送ってくる？あ、こいつのせいか。
</p>
<pre>
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3612.1700
</pre>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105082" title="200105082" href="200105a.html#200105082">■</a> 
cross-gcc</h3>
<p>
そういえばdjgppもcygwinも解決してなかった。まずいね。
djgppのほうは
<a href="ftp://ftp.iij.ad.jp/pub/simtelnet/gnu/djgpp/v2gnu/gcc2953s2.zip">gcc2953s2.zip</a>を使えってことかな？これって差分だらけでよくわからん。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200105083" title="200105083" href="200105a.html#200105083">■</a> 
JARH</h3>
<pre>
trace_var(:$KCODE){print 'Just another Ruby hacker,'}
$KCODE=$KCODE
</pre>
<!-- section end -->
</div>
<!-- 2001/05/08 end -->



<hr class="hide">
<!-- 2001/05/09 start -->
<h2><a name="20010509" href="200105a.html#20010509">2001-05-09 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200105091" title="200105091" href="200105a.html#200105091">■</a> 
水樹和佳子</h3>
<p>
ハヤカワ文庫で「月虹 -セレス還元-」を見つけて、
いつのまにか「子」がついていることに気づく。<br>
検索エンジンは便利だね。こういう疑問もすぐ氷解。
1999年に改名してたのか。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105092" title="200105092" href="200105a.html#200105092">■</a> 
JARH</h3>
<pre>
begin print 'Just another Ruby hacker,' end while false
</pre>
<!-- section end -->
</div>
<!-- 2001/05/09 end -->



<hr class="hide">
<!-- 2001/05/10 start -->
<h2><a name="20010510" href="200105a.html#20010510">2001-05-10 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200105101" title="200105101" href="200105a.html#200105101">■</a> 
Pragmatic ProgrammerなAndyさんからのmail</h3>

</p><ol>
<li>ruby.hとかがないじゃん？<br><br>

<li>rubywinがRAAよりも古い<br><br>

<li>CygwinがRetHatのより古い<br><br>

</ol><p>
<p>
という指摘を受けた。
いや実際に受けたのはWindowsのパッケージを作ってるAndyさん自身だと思うんだが。<br>
1.は拡張ライブラリを作る人には必要だが、
そういう人はgccもインストールしてるわけだし、
自分で作ればいいかなと思って外した。
でも、このパッケージに合った拡張ライブラリを作るときは、
やっぱ同じものを使いたいかな？<br>
んじゃ用意しよう。<br>
2.はよくわからん。0.0.3.1だよね？<br>
3.に関しては逆になぜCygwin Projectは早くCygwin 1.3.2を出さないんだってことなんだよね。
あんなにバグバグで遅いのに。
だから待ち状態。<br>
ってな感じで返事を送ってみた。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200105102" title="200105102" href="200105a.html#200105102">■</a> 
JARH</h3>
<pre>
begin rescue then else print 'Just another Ruby hacker,' end
</pre>
<!-- section end -->
</div>
<!-- 2001/05/10 end -->

<hr>
<div>
<a href="200104c.html">&lt;Prev(,)</a> | 
<a href="200105b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="https://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="https://validator.w3.org/check?uri=referer"><img
          src="https://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="https://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
