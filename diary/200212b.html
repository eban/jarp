<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2002-12-b</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eban.github.io/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200212a.html">
<link rel="next" href="200212c.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2002年12月中旬〜</p>
<hr>
<div>
<a href="200212a.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200212c.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2002/12/11 start -->
<h2><a name="20021211" href="200212b.html#20021211">2002-12-11 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200212111" title="200212111" href="200212b.html#200212111">■</a> 
<a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">[Linux] Dnsmasq 1.10</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212112" title="200212112" href="200212b.html#200212112">■</a> 
<a href="http://www.openssl.org/">[Linux] OpenSSL 0.9.6h</a></h3>
<p>
0.9.7 Beta5とどっちにしようかと一瞬迷ったが、0.9.6hにした。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212113" title="200212113" href="200212b.html#200212113">■</a> 
[Linux] bc 1.0.6</h3>
<p>
OpenSSL 0.9.6hでmake testするとbcがないと言われた。
え？本当にないのか？インストールしとこう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212114" title="200212114" href="200212b.html#200212114">■</a> 
[PC] マウス</h3>
<p>
左利きというわけではないんだけど、ここ5年ほど左手でマウスを操っている。
カーソルもボタン配列もそのまま。
ダブルクリックも慣れれば中指でも問題ない。
というかカーソルが左に傾いていることすら気づかなかった。
ふだんはunclutterで消えてるし、ほとんどキー操作でやってしまうしなあ。
</p>


<!-- section end -->
</div>
<!-- 2002/12/11 end -->



<hr class="hide">
<!-- 2002/12/12 start -->
<h2><a name="20021212" href="200212b.html#20021212">2002-12-12 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200212121" title="200212121" href="200212b.html#200212121">■</a> 
<a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">[Linux] Dnsmasq 1.10</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212122" title="200212122" href="200212b.html#200212122">■</a> 
<a href="http://www.openoffice.org/dev_docs/source/643c/release_notes_643c.html">OpenOffice.org 643C</a></h3>
<p>
OpenOffice.org 643Cのrelease noteを見ると、Export as PDFとある。
これはよさげだ。早速Windows版をダウンロードしてインストールしてみた。
OpenOffice643というディレクトリにインストールされるので1.0.1との共存も可能。
メニュー等は英語になってしまうが、既存の日本語の文書も問題なく表示できる。
でも、フォント名が□に化けてしまうとなんだかわらかないので、
まずはこれだけでもなんとかしよう。
</p>
<pre>
Tools - Options... - OpenOffice.org/Fonts
</pre>
<p>
でApply repacement tableをチェックし、フォントを置換する。
このあたりは1.0.1の日本語版を扱ったことがあれば容易に推測可能。
あとはAndale sans UIという名前のフォントを適当に置き換える。
ただこの時点ではReplace with側のフォント名が□になってしまってわからない。
が、最後の4つは順に
</p>
<pre>
ＭＳ ゴシック
ＭＳ 明朝
ＭＳ Ｐゴシック
ＭＳ Ｐ明朝
</pre>
<p>
なので手探りでも設定できる。
たとえばＭＳ ゴシックを選べば次回からの起動でフォント名は化けなくなる。
</p>

<p>
お約束の
</p>
<pre>
Tools - Options... - OpenOffice.org/Lanuage Setteins/Languages
</pre>
<p>
でLocale SettingをJapaneseにするだけで後はok。
フォントの置換をしなきゃいけない文書もあまりないようだ。
かなりいけてる。
</p>

<p>
お目当てのExport as PDFもなかなかいい出来栄えだ。
一部イタリック体が出ないとこがあったりするが、日本語も問題ないし、
*.pptなプレゼン資料もPDFにできる。
</p>
<!-- section end -->
</div>
<!-- 2002/12/12 end -->



<hr class="hide">
<!-- 2002/12/13 start -->
<h2><a name="20021213" href="200212b.html#20021213">2002-12-13 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200212131" title="200212131" href="200212b.html#200212131">■</a> 
<a href="http://www.gnu.org/software/gdbm/">[GNU] GDBM 1.8.3</a></h3>
<p>
いつのまにかNDBM互換インタフェースは-lgdbm_compatへと分割されてるようだ。
ということはRubyもそのあたりを対応しないといけないか。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212132" title="200212132" href="200212b.html#200212132">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/58918">[Ruby] ruby-talkの教えて君</a></h3>
<p>
<a href="200212a.html#200212018">例の脊髄反射型教えて君</a>に耐え切れなくなり、苦情を言う人も出てきたようだ。
</p>


<!-- section end -->
</div>
<!-- 2002/12/13 end -->



<hr class="hide">
<!-- 2002/12/14 start -->
<h2><a name="20021214" href="200212b.html#20021214">2002-12-14 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200212141" title="200212141" href="200212b.html#200212141">■</a> 
<a href="http://www.tuxedo.org/~esr/fetchmail/">[Linux] fetchmail 6.2.0</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212142" title="200212142" href="200212b.html#200212142">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/58929">[Ruby] capture IRB session</a></h3>
<p>
話はちょっと違うが、irbの引数にスクリプトを指定する使い方はあまり知られてないようだ。
</p>
<pre>
% cat foo.rb
a = 1
b = 2
c = a + b
d = c * 5
% irb foo.rb &gt; foo.log
% cat foo.log
foo.rb(main):001:0&gt; a = 1
=&gt; 1
foo.rb(main):002:0&gt; b = 2
=&gt; 2
foo.rb(main):003:0&gt; c = a + b
=&gt; 3
foo.rb(main):004:0&gt; d = c * 5
=&gt; 15
foo.rb(main):005:0&gt; 
</pre>
<p>
irbという名前のスクリプトで実行すればプロンプトもirbになるので、
メールに貼り付けるときも気づかれない。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212143" title="200212143" href="200212b.html#200212143">■</a> 
[Linux] Out of Memory</h3>
<p>
<a href="http://devtodo.sourceforge.net/">Developer Todo</a>というソフトをmakeしていたら急に一時停止中のxmmsが消えた。
そのうちg++も
</p>
<pre>
g++: Internal error: Killed (program cc1plus)
</pre>
<p>
など言われてしまった。/var/log/syslogを見ると
</p>
<pre>
Dec 14 20:56:23 ruby kernel: Out of Memory: Killed process 6964 (xmms).
&lt;...&gt;
Dec 14 21:05:39 ruby kernel: Out of Memory: Killed process 13590 (cc1plus).
</pre>
<p>
とkernelに殺されてる。freeしてみると、なんとswapが0だ。
</p>
<pre>
% free
             total       used       free     shared    buffers     cached
Mem:        127976     121672       6304          0      10028      28320
-/+ buffers/cache:      83324      44652
Swap:            0          0          0
</pre>
<p>
/etc/fstabを確認してみると確かにswapの記述がない。
2週間もswapなしで使ってたのか、おいらは。
というかメモリが128MBでほとんど不自由しない生活を送ってるらしい。
/etc/fstabに
</p>
<pre>
/dev/hdc3 none swap defaults 0 0
</pre>
<p>
を追加して、sudo swapon -aした。
</p>
<pre>
% free
             total       used       free     shared    buffers     cached
Mem:        127976     118760       9216          0      10204      25196
-/+ buffers/cache:      83360      44616
Swap:       168672          0     168672
</pre>
<p>
これでちゃんとmakeできたが、メモリがなくなると勝手に殺すとは思わなかったよ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212144" title="200212144" href="200212b.html#200212144">■</a> 
スポーツえらい人グランプリ</h3>
<p>
ハイジャンプ魔球には笑った。
</p>


<!-- section end -->
</div>
<!-- 2002/12/14 end -->



<hr class="hide">
<!-- 2002/12/15 start -->
<h2><a name="20021215" href="200212b.html#20021215">2002-12-15 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200212151" title="200212151" href="200212b.html#200212151">■</a> 
[Ruby] gdbm 1.8.3対応</h3>
<p>
単にgdbm_compatをext/dbm/extconf.rbの$dbm_conf_headersに加えればいいかと思ったが、
-lgdbmもリンクする必要があることに気づく。
というわけで、db_checkのcase dbに
</p>
<pre>
when &quot;gdbm_compat&quot;
  $dbm_conf_have_gdbm = true
  have_library(&quot;gdbm&quot;) or return false
end
</pre>
<p>
を追加した。のは実は昨日のことだが。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212152" title="200212152" href="200212b.html#200212152">■</a> 
[Ruby] djgpp</h3>
<p>
久し振りにRuby 1.7をdjgppでmakeしてみると、
dbm, gdbm, readlineのようなtry_fooする拡張ライブラリが軒並エラーで作られてないことに気づいた。
ext/dbm/mkmf.logを見ると-lruby-staticが見つからないと言ってる。
やばいなあ。まじめに考え直そう。
</p>

<p>
-L$(topdir)が必要なのはlink_commandの中だけなので、ここの頭で
</p>
<pre>
libpath += ['$(topdir)'] if $extmk and $static
</pre>
<p>
としよう。と思ったが、init_mkmfの
</p>
<pre>
$LIBPATH = [&quot;$(topdir)&quot;]
</pre>
<p>
はまずいな。mkmf.rb単独のときには、これは不要だ。
ということは、両方をまとめる必要がある。
それと$(archlib)も$LIBPATHに加える必要はないはず。
</p>
<pre>
$LIBPATH = []
</pre>
<p>
を
</p>
<pre>
$LIBPATH = $extmk ? [&quot;$(topdir)&quot;] : []
</pre>
<p>
とすればよさそうだ。
</p>
<pre>
$LIBPATH = [&quot;$(topdir)&quot;]
</pre>
<p>
と
</p>
<pre>
$LIBPATH &lt;&lt; &quot;$(archdir)&quot;
</pre>
<p>
は削除。
</p>


<!-- section end -->
</div>
<!-- 2002/12/15 end -->



<hr class="hide">
<!-- 2002/12/16 start -->
<h2><a name="20021216" href="200212b.html#20021216">2002-12-16 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200212161" title="200212161" href="200212b.html#200212161">■</a> 
<a href="http://www.gnu.org/software/autoconf/">[Linux] autoconf 2.57</a></h3>
<p>
いつの間にか出てたようだ。
Rubyの場合、mkconfig.rbがconfig.statusに依存しているので、
autconfが新しくなるたびにチェックしないとまずいのだ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212162" title="200212162" href="200212b.html#200212162">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/59220">[Ruby] Re: help -- persuade my boss to adopt ruby</a></h3>
<p>
なんでこんな話になってるんだっけ？
なんか最近典型的な人が多いな。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212163" title="200212163" href="200212b.html#200212163">■</a> 
[Ruby] RHG</h3>
<p>
寝る前に読んでるとちっとも進まないので(すぐ眠くなる)、
先週末あたりから
<a href="http://sho.tdiary.net/20021213.html#p01">たださんのように</a>持って歩いているが、やはり重い。
電車の中で開くと奇異な目で見られる。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212164" title="200212164" href="200212b.html#200212164">■</a> 
[文庫本] グイン・サーガ  87巻「ヤーンの時の時」</h3>
<p>
typoじゃないよなあ、時の時。いつものようにあとがきから読もうかと思ったら、
ねたばらしになるから読むなと書いてある。余白を作ってまで隠してる。
ああ、読みたいなあ。でもRHGも進めたいし。うーむ。
といいつつ少年ジャンプもスピリッツも読んでしまうのだった。だめじゃん。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212165" title="200212165" href="200212b.html#200212165">■</a> 
<a href="http://dev.ruby-lang.org/">[Ruby] dev.ruby-lang.org</a></h3>
<p>
tDiaryはやっぱRubyのキラーアプリだよね。
<!-- ジャンプどころか少年サンデーも少年マガジンもヤンジャンもモーニングも -->
<!-- イブニングも読んでる。半年前までは少年チャンピオンも読んでたが、 -->
<!-- 読むとこがなくなってしまったのでやめた。 -->
</p>
<!-- section end -->
</div>
<!-- 2002/12/16 end -->



<hr class="hide">
<!-- 2002/12/17 start -->
<h2><a name="20021217" href="200212b.html#20021217">2002-12-17 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200212171" title="200212171" href="200212b.html#200212171">■</a> 
<a href="http://homepage1.nifty.com/markey/memo/200212.html#121601">[Cygwin] lftp</a></h3>
<p>
<a href="http://cygwin.com/ml/cygwin/2002-12/msg00863.html">Cygwin ML</a>でも話題になってます。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212172" title="200212172" href="200212b.html#200212172">■</a> 
[Windows] OpenOffice.orgでemacs mode</h3>
<p>
<a href="http://mayu.sourceforge.net/ja/index.html">窓使いの憂鬱</a>で
</p>
<pre>
window OpenOffice /soffice\.exe:SALFRAME/ : EmacsEdit
</pre>
<p>
をdefault.mayuに加えてみる。おぉ、ナイス。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212173" title="200212173" href="200212b.html#200212173">■</a> 
[本] OpenOffice.org</h3>
<p>
本屋に行ってみるとOpenOffice.orgに関する本が4, 5冊もある。
ちょっとびっくりした。
電話帳のように分厚いのもあるが、あれは持って歩けそうもない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212174" title="200212174" href="200212b.html#200212174">■</a> 
<a href="200212b.html#200212164">[文庫本] グイン・サーガ 87巻</a></h3>
<p>
気になってしかたないので、結局読んでしまった。
20数年読み続けているが、ついにここまで来たか。
</p>
<!-- section end -->
</div>
<!-- 2002/12/17 end -->



<hr class="hide">
<!-- 2002/12/18 start -->
<h2><a name="20021218" href="200212b.html#20021218">2002-12-18 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200212181" title="200212181" href="200212b.html#200212181">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/19104">[Ruby] -DDBM_HDR=&lt;ndbm.h&gt;</a></h3>
<p>
考えてみたらmingw32でも同じはずで、ext/dbm/mkmf.logを見ると
</p>
<pre>
have_header: checking for cdefs.h... 
gcc -mno-cygwin -E -IC:/cygwin/home/watanabe/ruby/mingw \
  -IC:/cygwin/home/watanabe/ruby/ruby -D__NO_ISOCEXT -Os \
  -DDBM_HDR=&lt;ndbm.h&gt; -o conftest.i conftest.c
指定されたファイルが見つかりません。
checked program was:
/* begin */
#include &lt;cdefs.h&gt;
/* end */
</pre>
<p>
とやはり起きていた。クロスの環境だと気づかないんだよねえ。
</p>
<!-- section end -->
</div>
<!-- 2002/12/18 end -->



<hr class="hide">
<!-- 2002/12/19 start -->
<h2><a name="20021219" href="200212b.html#20021219">2002-12-19 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200212191" title="200212191" href="200212b.html#200212191">■</a> 
冬休み</h3>
<p>
今日から思い切りだらけた生活を送ることを決意した。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212192" title="200212192" href="200212b.html#200212192">■</a> 
[Linux] Linux 2.5.52</h3>
<p>
久し振りにLinux 2.5を試してみてたらyaccが文句言ってることに気づいた。
</p>
<pre>
yacc -d aicasm_gram.y
/usr/bin/yacc: !#/bin/sh: No such file or directory
mv y.tab.c aicasm_gram.c
</pre>
<p>
Plamo 3.0ではyaccはシェルスクリプトになっているのか。
</p>
<pre>
% cat /usr/bin/yacc
!#/bin/sh
/usr/bin/bison -y $*
</pre>
<p>
だめじゃん。
引数はちゃんとbisonに渡るので動作に支障はないからいいんだけど。
</p>

<p>
でも、キー入力を受け付けないのは相変わらずだ。
一度真っ新な状態からconfigしてみるか。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212193" title="200212193" href="200212b.html#200212193">■</a> 
<a href="http://www.ruby-lang.org/raa/list.rhtml?name=testunit">[Ruby] Test::Unit 0.1.5</a></h3>
<p>
更新。
</p>
<!-- section end -->
</div>
<!-- 2002/12/19 end -->



<hr class="hide">
<!-- 2002/12/20 start -->
<h2><a name="20021220" href="200212b.html#20021220">2002-12-20 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200212201" title="200212201" href="200212b.html#200212201">■</a> 
<a href="http://www.ruby-lang.org/raa/list.rhtml?name=bz2">[Ruby] BZ2 0.1.4</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212202" title="200212202" href="200212b.html#200212202">■</a> 
<a href="http://www.ruby-lang.org/raa/list.rhtml?name=bdb">[Ruby] bdb 0.3.7</a></h3>
<p>
BZ2を取りに行ったらbdbの新しいのがあったので、ついでに更新。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200212203" title="200212203" href="200212b.html#200212203">■</a> 
[Ruby] -lcrypt on MinGW</h3>
<p>
-mno-cygwinだとCygwinの-lcryptを見つけてしまうので、
</p>
<pre>
ac_cv_lib_crypt_crypt=no
</pre>
<p>
としよう。
単純計算だからCygwinの-lcryptがリンクされても問題ないんだけど。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200212204" title="200212204" href="200212b.html#200212204">■</a> 
[Linux] byacc 1.9.1</h3>
<p>
yaccはyaccじゃないと気分が出ないのでbyacc 1.9.1をインストール。
例によってCygwinでパッケージになってるソースを使った。
</p>
<!-- section end -->
</div>
<!-- 2002/12/20 end -->

<hr>
<div>
<a href="200212a.html">&lt;Prev(,)</a> | 
<a href="200212c.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
