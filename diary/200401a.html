<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2004-1-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200312c.html">
<link rel="next" href="200401b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2004年1月上旬〜</p>
<hr>
<div>
<a href="200312c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200401b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2004/01/01 start -->
<h2><a name="20040101" href="200401a.html#20040101">2004-01-01 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200401011" title="200401011" href="200401a.html#200401011">■</a> 
12月のspam</h3>
<p>
3231通。クリスマス以降の追い上げが効いてやはり1日あたり100通以上を突破。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401012" title="200401012" href="200401a.html#200401012">■</a> 
[Ruby] bdb 0.5.0のテスト</h3>
<p>
btreeのテストだけがSEGVになってしまうことに気づいた。うーむ。
</p>
<pre>
% ruby-1.8 tests/btree.rb 

VERSION of BDB is Sleepycat Software: Berkeley DB 4.2.52: (December  3, 2003)
Loaded suite tests/btree
Started
..................tests/btree.rb:402: [BUG] Segmentation fault
ruby 1.8.1 (2003-12-31) [i386-cygwin]
</pre>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200401013" title="200401013" href="200401a.html#200401013">■</a> 
[Ruby] rdoc --ri</h3>
<p>
Rubyのtopdirでrdoc --riとだけ実行すると結構時間がかかった挙句
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/88931">[ruby-talk:88931]</a>のようにsyckでSEGVになる。
</p>
<!-- section end -->
</div>
<!-- 2004/01/01 end -->



<hr class="hide">
<!-- 2004/01/02 start -->
<h2><a name="20040102" href="200401a.html#20040102">2004-01-02 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200401021" title="200401021" href="200401a.html#200401021">■</a> 
[Windows] Yamaha Legacy YMF 724とWindows XPとUSBスピーカ</h3>
<p>
なぜかWindows 2000で自動的にデバイスを検出する最中にOSがハングアップしてしまう。
Windows 2000だからかと思い、
正月だしWindows XP Pro.でも買うかと豪気な気分になったのはいいが、
Windows XPでもハングだよ。まいったねえ。
サウンドカードを抜いたら進んだ。
まじか？こんなもんが影響するとは夢にも思わなかったよ。
豪気ついでにUSBスピーカを買ってきたら簡単に認識した。
1980円だからあまり豪気じゃないよ！
音はまあこの程度だろうなあ。AC電源が要らないのは便利だ。
そうかノートPCにつなげるのもよさそうだ。
</p>

<p>
てゆか、今更ながらWindows XPにする必要は全然ないということに気づいた。
ぐはぁ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401022" title="200401022" href="200401a.html#200401022">■</a> 
[Linux] USBスピーカ(シグマ APO USPBK)</h3>
<p>
で、このUSBスピーカをLinuxで使うにはどうすればいいのか？
今まで/etc/modules.confに書いてあったsound関係の記述を全部コメントアウトして、
</p>
<pre>
% sudo modprobe audio
% sudo modprobe uhci
</pre>
<p>
であっさり使えるようになった。
CONFIG_USB_UHCI=m, CONFIG_USB_AUDIO=mあたりが必要かな。
スピーカに音量調節のつまみはないが、xmmsやxaumix等で調節可能。
</p>
<!-- section end -->
</div>
<!-- 2004/01/02 end -->



<hr class="hide">
<!-- 2004/01/03 start -->
<h2><a name="20040103" href="200401a.html#20040103">2004-01-03 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200401031" title="200401031" href="200401a.html#200401031">■</a> 
[Linux] usbスピーカ</h3>
<p>
とりあえず/etc/modules.confは
</p>
<pre>
alias sound-slot-0 audio
post-install sound-slot-0 /sbin/modprobe uhci
</pre>
<p>
とした。post-installがちょっとださいね。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401032" title="200401032" href="200401a.html#200401032">■</a> 
三が日</h3>
<p>
なんだかんだでメールを全然読んでないなあ。テレビばかり見てる。
</p>
<!-- section end -->
</div>
<!-- 2004/01/03 end -->



<hr class="hide">
<!-- 2004/01/04 start -->
<h2><a name="20040104" href="200401a.html#20040104">2004-01-04 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200401041" title="200401041" href="200401a.html#200401041">■</a> 
<a href="http://rsync.samba.org/">[Soft] Rsync 2.6.0</a></h3>
<pre>
Two important things to note in the new release:
 1. The default remote shell is now &quot;ssh&quot; unless you tell configure
    you want to make something else the default.
 2. Some bug fixes in the include/exclude code, while making things
    work properly, have resulted in some user-visible changes for
    certain wildcard strings. Read the BUG FIXES below to see if any
    of these changes apply to you. (Most people should be
    unaffected.)
</pre>
<p>
defaultがsshになった。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401042" title="200401042" href="200401a.html#200401042">■</a> 
<a href="http://www.uclibc.org/">[Soft] uClibc 0.9.26</a></h3>
<p>
0.9.25をダウンロードしようと思ったら、すでに0.9.26になっていた。
0.9.25にはpthread関連にバグがあったようだ。
</p>
<!-- section end -->
</div>
<!-- 2004/01/04 end -->



<hr class="hide">
<!-- 2004/01/05 start -->
<h2><a name="20040105" href="200401a.html#20040105">2004-01-05 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200401051" title="200401051" href="200401a.html#200401051">■</a> 
<a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">[Soft] Dnsmasq 2.0rc1</a></h3>
<pre>
Changes: The DHCP lease-file reader function of 1.x has been
replaced by an integrated DHCP daemon. This provides easier and
better configuration, and is much smaller than the combination of
dnsmasq and ISC dhcpd, which is a big advantage for small router
distros. This release candidate has been tested under Linux and
FreeBSD, glibc and uclibc. It has interoperated successfully with
pump, dhclient, udhcpc, dhcpcd, and the DHCP clients in Windows 98
and Win2k.
</pre>
<p>
ISC dhcpdが要らなくなるわけね。
dnsmasq.conf.sampleを参考にすればいいようだ。でも
</p>
<pre>
# Override the default route (which is normally automagically set
# to be the machine running dnsmasq
#dhcp-option=2,192,168.4.4
</pre>
<p>
という感じなので、RFC 2132を見てコード番号を調べないといけないなあ。
2.0リリース時にはもうちょっとましな指定ができるようになるといいんだけど。
</p>

<p>
とりあえずどのくらいautomagicallyなのかdhcp-rangeだけ指定してみた。
</p>
<pre>
dhcp-range=192.168.11.10,192.168.11.100,24h
</pre>
<p>
LEASEFILEは/var/lib/misc/dnsmasq.leasesなので、
あらかじめ/var/lib/misc/を作っておく必要がある。
あ、やっぱこれだけじゃだめだなあ。
default gatewayがそのままdhcp serverのアドレスになってしまうようだ。
考えてみると2じゃないよなあ。
</p>

<p>
もともとルータだったのでこれでも使えないわけではないが、ちょっと無駄だ。
</p>
<!-- section end -->
</div>
<!-- 2004/01/05 end -->



<hr class="hide">
<!-- 2004/01/06 start -->
<h2><a name="20040106" href="200401a.html#20040106">2004-01-06 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200401061" title="200401061" href="200401a.html#200401061">■</a> 
<a href="http://kernel.org/">[Linux] Linux 2.4.24</a></h3>
<p>
更新。結局2.6だとVMwareが面倒なことになるので、2.4を使い続けている。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401062" title="200401062" href="200401a.html#200401062">■</a> 
仕事始め</h3>
<p>
2週間以上も休んでると、もう何もかも忘れちまってるというかなんというか。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200401063" title="200401063" href="200401a.html#200401063">■</a> 
<a href="200401a.html#200401051">[Soft] Dnsmasq 2.0rc1</a></h3>
<p>
<a href="http://www.rfc-editor.org/rfc/rfc2132.txt">RFC 2132</a>を見ると2じゃなくて3だよね。というわけで、
</p>
<pre>
dhcp-option=3,192.168.11.1  # default gateway
dhcp-option=1,255.255.255.0 # subnet mask
</pre>
<p>
としてみたが、dhcp-optionの処理は
</p>
<pre>
if (!comma || (*comma = 0) ||
    (new-&gt;opt = atoi(optarg)) == 0 ||
    (in.s_addr = inet_addr(comma+1)) == (in_addr_t)-1)
  {
    option = '?';
    break;
  }

/* note that the datastructure allows for all types
   of options. We currently only parse address ones. */
new-&gt;len = INADDRSZ;
new-&gt;val = safe_malloc(INADDRSZ);
memcpy(new-&gt;val, &amp;in, INADDRSZ);
</pre>
<p>
てな感じで、inet_addrが受け付けるような形式のものしか扱えない。
指定できるものが限られてしまう。
まあ、これぐらい指定できればほとんど問題ないか。
</p>
<!-- section end -->
</div>
<!-- 2004/01/06 end -->



<hr class="hide">
<!-- 2004/01/07 start -->
<h2><a name="20040107" href="200401a.html#20040107">2004-01-07 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200401071" title="200401071" href="200401a.html#200401071">■</a> 
<a href="http://bogofilter.sf.net/">[Soft] Bogofilter 0.16.0</a></h3>
<p>
いつのまにか出ていた。
</p>
<!-- section end -->
</div>
<!-- 2004/01/07 end -->



<hr class="hide">
<!-- 2004/01/08 start -->
<h2><a name="20040108" href="200401a.html#20040108">2004-01-08 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200401081" title="200401081" href="200401a.html#200401081">■</a> 
[Ruby] --enable-install-doc</h3>
<p>
ビルドディレクトリを別にした場合に、
make installがrdocのところでこける問題を放置し続けるのもあれなので、
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/02175">[ruby-core:02175]</a>をベースにcommit。defaultはdisableなので、make installで
ri用のrdoc documentationをインストールしたいときは
--enable-install-docとする。もしくは明示的にmake install install-docとする。
</p>

<p>
まだDESTDIRには対応してない。
</p>
<!-- section end -->
</div>
<!-- 2004/01/08 end -->



<hr class="hide">
<!-- 2004/01/09 start -->
<h2><a name="20040109" href="200401a.html#20040109">2004-01-09 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200401091" title="200401091" href="200401a.html#200401091">■</a> 
研修</h3>
<p>
疲れた。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200401092" title="200401092" href="200401a.html#200401092">■</a> 
<a href="ftp://ftp.astron.com/pub/file/">[Soft] File 4.07</a></h3>
<pre>
Changes: This release fixes the -k flag, includes updated Python
bindings, tries to give more info on corrupted ELF files, and
handles a build issue.
</pre>

<!-- section end -->
</div>
<!-- 2004/01/09 end -->



<hr class="hide">
<!-- 2004/01/10 start -->
<h2><a name="20040110" href="200401a.html#20040110">2004-01-10 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200401101" title="200401101" href="200401a.html#200401101">■</a> 
[Ruby][CVS] commitinfo</h3>
<p>
自動でversion.hをcvs ciさせようと実験。
cvs ciで自動的に何かコマンドを実行させるには
CVSROOT/commitinfoに登録すればいい。
</p>
<pre>
DEFAULT $CVSROOT/CVSROOT/ci-version.h.sh
</pre>
<p>
実際にやってみるとcvs co ruby/version.hでlockしてしまった。
cvs ci中だしねえ。commitinfoを使った方法では無理だと判明。
</p>
<!-- section end -->
</div>
<!-- 2004/01/10 end -->

<hr>
<div>
<a href="200312c.html">&lt;Prev(,)</a> | 
<a href="200401b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
