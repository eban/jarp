<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2003-9-c</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eban.github.io/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200309b.html">
<link rel="next" href="200310a.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2003年9月下旬〜</p>
<hr>
<div>
<a href="200309b.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200310a.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2003/09/21 start -->
<h2><a name="20030921" href="200309c.html#20030921">2003-09-21 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200309211" title="200309211" href="200309c.html#200309211">■</a> 
<a href="http://cygwin.com/ml/cygwin-announce/2003-09/msg00100.html">[Cygwin] Updated: cygwin-1.5.5-1</a></h3>
<p>
suspendもok。
</p>
<pre>
- Make CTRL-Z operable again.  (Christopher Faylor)
</pre>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309212" title="200309212" href="200309c.html#200309212">■</a> 
<a href="http://cygwin.com/ml/cygwin-announce/2003-09/msg00101.html">[Cygwin] Updated: gcc 3.3.3-1, gcc-mingw-20030911-2</a></h3>
<p>
もちろん3.3.1-1の間違い。そのままtestがcurrentになった。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200309213" title="200309213" href="200309c.html#200309213">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/82592">[Ruby] POP3Filter for SoBig.F Virus:</a></h3>
<p>
長いこと続いてるけど、なんで今頃Sobig.Fなんだ？
<a href="http://www.rubygarden.org/ruby?SoBigPopper">見に行ってみると</a>Swenだった。ま、名前なんかどうでもいいか。
swen_killerとして使えるでしょう、たぶん。
</p>
<!-- section end -->
</div>
<!-- 2003/09/21 end -->



<hr class="hide">
<!-- 2003/09/22 start -->
<h2><a name="20030922" href="200309c.html#20030922">2003-09-22 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200309221" title="200309221" href="200309c.html#200309221">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/82702">[Ruby] Trouble with binary files?</a></h3>
<p>
ここまで言い切る自信は一体どこから？
</p>
<!-- section end -->
</div>
<!-- 2003/09/22 end -->



<hr class="hide">
<!-- 2003/09/23 start -->
<h2><a name="20030923" href="200309c.html#20030923">2003-09-23 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200309231" title="200309231" href="200309c.html#200309231">■</a> 
連休</h3>
<p>
Swenだらけ。しかも寒い。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309232" title="200309232" href="200309c.html#200309232">■</a> 
<a href="http://www.spamassassin.org/">[Mail] SpamAssassin 2.60</a></h3>
<pre>
Changes: The Bayes system was overhauled. The DB storage
format was changed, and the journal/expire and
tokenization algorithms were improved. spamd now supports
UNIX-domain sockets. Better HTML parsing, detection of
&quot;invisible text&quot;, and other obfuscation techniques. DNS
Blacklists were also overhauled with the addition of lots
of new lists, removal of defunct lists, better timeout
handling, and better header parsing. More flexible header
and report rewriting options were implemented. Perl taint
mode is now enabled by default for increased security.
</pre>
<p>
データベースのフォーマットが変わったのか。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200309233" title="200309233" href="200309c.html#200309233">■</a> 
伊東家の食卓</h3>
<p>
紹介される裏技は「主婦と生活社」の
<a href="http://www.shufu.co.jp/lips/idea/main.html">暮らしの便利帳スペシャル</a>に書いてあるものばかりだということがわかった。
たとえばマンガで廃油処理は2002年2月号。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309234" title="200309234" href="200309c.html#200309234">■</a> 
<a href="http://www.openssh.org/">[Linux] OpenSSH 3.7.1p2</a></h3>
<p>
それにしても
<a href="http://cygwin.com/ml/cygwin-announce/2003-09/msg00106.html">Cygwinはやっ！</a></p>
<!-- section end -->
</div>
<!-- 2003/09/23 end -->



<hr class="hide">
<!-- 2003/09/24 start -->
<h2><a name="20030924" href="200309c.html#20030924">2003-09-24 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200309241" title="200309241" href="200309c.html#200309241">■</a> 
<a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">[Linux] Dnsmasq 1.16</a></h3>
<pre>
Changes: This release tidies up the loose ends from
version 1.15. Support for blocking multiple &quot;wildcard A
record&quot; addresses was added, and a stupid bug which
stopped the last release from building without
getopt-long support was fixed. The &quot;bogus-nxdomain&quot;
option is better documented. This release also adds
support for controlling the source address in packets
sent to upstream servers.
</pre>
<p>
そういえばbogus-nxdomainの設定をしてなかった。今は
</p>
<pre>
% host hogehoge-hogehoge.com
hogehoge-hogehoge.com has address 64.94.110.11
</pre>
<p>
のように存在しないホスト名でも例のアドレスが返ってくるが、
--bougs-nxdomain=64.94.110.11を指定してdnsmasqを立ち上げれば
</p>
<pre>
% host hogehoge-hogehoge.com
Host hogehoge-hogehoge.com not found: 3(NXDOMAIN)
</pre>
<p>
となる。/etc/dnsmasq.confへ追加しとこう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309242" title="200309242" href="200309c.html#200309242">■</a> 
<a href="http://freshmeat.net/">freshmeat</a></h3>
<p>
Newsletterが2日来ない。
<a href="http://lists.freshmeat.net/mailman/private/freshmeat-news/2003-September/date.html">アーカイブ(members only)</a>を見ても21日が最後だった。なにかあったか？
</p>
<!-- section end -->
</div>
<!-- 2003/09/24 end -->



<hr class="hide">
<!-- 2003/09/25 start -->
<h2><a name="20030925" href="200309c.html#20030925">2003-09-25 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200309251" title="200309251" href="200309c.html#200309251">■</a> 
<a href="http://www.spamassassin.org/">[Mail] SpamAssassin</a></h3>
<p>
spamd, spamcを試してみるとやはり効果がある。
これなら使えるかな。
</p>

<p>
spamc -Rが便利だ。
spamassassinコマンドにはなぜこれに相当する機能がないのか不思議だ。
</p>
<pre>
Content analysis details:   (34.1 points, 7.0 required)

 pts rule name              description
---- ---------------------- --------------------------------------------------
 0.5 X_PRIORITY_HIGH        Sent with 'X-Priority' set to high
 4.3 RCVD_AM_PM             Received headers forged (AM/PM)
 3.5 TRACKER_ID             BODY: Incorporates a tracking ID number
 0.0 HTML_MESSAGE           BODY: HTML included in message
 1.0 HTML_70_80             BODY: Message is 70% to 80% HTML
 4.0 MIME_HTML_ONLY         BODY: Message only has text/html MIME parts
 1.5 HTML_IMAGE_ONLY_04     BODY: HTML: images with 200-400 bytes of words
 3.1 USERPASS               URI: URL contains username and (optional) password
 4.3 FORGED_AOL_RCVD        Received forged, contains fake AOL relays
 3.0 FORGED_RCVD_NET_HELO   Host HELO'd using the wrong IP network
 1.1 FORGED_OUTLOOK_HTML    Outlook can't send HTML message only
 1.1 FORGED_OUTLOOK_TAGS    Outlook can't send HTML in this format
 1.6 FORGED_MUA_OUTLOOK     Forged mail pretending to be from MS Outlook
 4.3 CONFIRMED_FORGED       Received headers are forged
 0.8 MSGID_FROM_MTA_HEADER  Message-Id was added by a relay
</pre>

<!-- section end -->
</div>
<!-- 2003/09/25 end -->



<hr class="hide">
<!-- 2003/09/26 start -->
<h2><a name="20030926" href="200309c.html#20030926">2003-09-26 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200309261" title="200309261" href="200309c.html#200309261">■</a> 
<a href="http://www.samba.org/samba/whatsnew/samba-3.0.0.html">[Soft] Samba 3.0.0</a></h3>
<p>
netコマンドが追加された。HELPMSGはさすがになかった。当たり前だ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309262" title="200309262" href="200309c.html#200309262">■</a> 
freshmeat Newsletter</h3>
<p>
途中のサーバでつまっていたようで、3日分来た。でも昨日のがまだ来ないな。
</p>
<!-- section end -->
</div>
<!-- 2003/09/26 end -->



<hr class="hide">
<!-- 2003/09/27 start -->
<h2><a name="20030927" href="200309c.html#20030927">2003-09-27 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200309271" title="200309271" href="200309c.html#200309271">■</a> 
[Cygwin][Linux] Linux上にCygwin 1.5.5-1のクロス環境を作る</h3>
<p>
<a href="http://cygwin.com/mirrors.html">ミラーサイト</a>から以下のファイルをダウンロード。
</p>
<pre>
binutils-20030901-1-src.tar.bz2
cygwin-1.5.5-1.tar.bz2
gcc-3.3.1-2-src.tar.bz2
gcc-mingw-20030911-3.tar.bz2
mingw-runtime-3.1-1.tar.bz2
w32api-2.4-1.tar.bz2
</pre>
<p>
あとはいつもの手順
</p>
<pre>
% prefix=/usr/local/cygwin
% tar xfv cygwin-1.5.5-1.tar.bz2 --bz usr/{include,lib}
% tar xfv mingw-runtime-3.1-1.tar.bz2 --bz usr/{include,lib}
% tar xfv w32api-2.4-1.tar.bz2 --bz usr/{include,lib}
% mv usr $prefix/i686-pc-cygwin
% tar xfv binutils-20030901-1-src.tar.bz2 --bz
% cd binutils-20030901-1
% CFLAGS=-Os ./configure --prefix=$prefix --target=i686-pc-cygwin
% make all install; cd -
% tar xfv gcc-3.3.1-2-src.tar.bz2 --bz
% mkdir gcc-3.3.1-2/cygwin; cd gcc-3.3.1-2/cygwin
% CFLAGS=-Os CXXFLAGS=-Os ../configure \
  --enable-languages=c,c++ --enable-libgcj \
  --enable-threads=posix --with-system-zlib --enable-nls \
  --without-included-gettext --enable-interpreter \
  --disable-sjlj-exceptions \
  --disable-version-specific-runtime-libs --enable-shared \
  --target=i686-pc-cygwin --enable-haifa --prefix=$prefix
% make all install; cd -
% tar xfO gcc-mingw-20030911-3.tar.bz2 --bz \
  etc/postinstall/gcc-mingw\*.tar |tar xfv - -C $prefix
% cd $prefix/lib/gcc-lib/i686-pc-mingw32/3.3.1
% ln -s ../../i686-pc-cygwin/3.3.1/cc* .
% ln -s ../../i686-pc-cygwin/3.3.1/collect2 .
% rm *.exe
</pre>
<p>
後は簡単なチェック。
</p>
<pre>
% echo 'main(){}' &gt; main.c
% i686-pc-cygwin-gcc -v main.c
% i686-pc-cygwin-gcc -v -mno-cygwin main.c
</pre>
<p>
どちらもちゃんとa.exeができればok。
</p>
<!-- section end -->
</div>
<!-- 2003/09/27 end -->



<hr class="hide">
<!-- 2003/09/28 start -->
<h2><a name="20030928" href="200309c.html#20030928">2003-09-28 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200309281" title="200309281" href="200309c.html#200309281">■</a> 
<a href="http://use.perl.org/articles/03/09/26/2231256.shtml?tid=6">[Perl] Perl 5.8.1</a></h3>
<p>
make testが通ってしまった。
</p>
<pre>
All tests successful.
u=17.14  s=4.55  cu=3070.23  cs=232.96  scripts=765  tests=76546
</pre>
<p>
いや通るのが普通だけど、すんなり通ったことないしなあ。
そうかNDBM, ODBMが作られてないからだな。
</p>
<pre>
ext/NDBM_File/t/ndbm.................skipping test on this platform
ext/ODBM_File/t/odbm.................skipping test on this platform
</pre>
<p>
どうせ使わないから、このままにしとこう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309282" title="200309282" href="200309c.html#200309282">■</a> 
[BSD] OpenBSD 3.3, FreeBSD 5.1, NetBSD 1.6.1</h3>
<p>
というわけでVMWareにBSD三兄弟をインストールしたわけだが、
FreeBSDが一番面倒だった。なぜかだんだん遅くなるんだよね。
しまいには1.1KB/secじゃいつ終わるんだかわからん。
で、試しにsuspend, resumeするとなぜか速くなる。
そんな感じで騙し騙し2時間ぐらい格闘してインストール。
</p>

<p>
あれRubyをmakeしても遅くなるなあ。
psで見ると(swi7: tty:sio clock)がCPUを50%食ってる。
試しにsuspendしてresumeするとこいつが大人しくなる。
なぜに？
</p>
<!-- section end -->
</div>
<!-- 2003/09/28 end -->



<hr class="hide">
<!-- 2003/09/29 start -->
<h2><a name="20030929" href="200309c.html#20030929">2003-09-29 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200309291" title="200309291" href="200309c.html#200309291">■</a> 
<a href="http://ccache.samba.org/">[Soft] ccache 2.3</a></h3>
<pre>
The latest release is ccache 2.3.

 ・ Added CCACHE_UMASK option
 ・ Added support for compilation of .i files
 ・ Fixed bug with DEPENDENCIES_OUTPUT flag
 ・ Added support for more -Mx options
 ・ Added separate stderr channel for distcc
 ・ Improved test suite
</pre>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309292" title="200309292" href="200309c.html#200309292">■</a> 
<a href="200309c.html#200309282">VMWare 3.xのGuest OSとしてFreeBSD 5.xをインストールすると遅くなる問題</a></h3>
<p>
とある人からメールをいただきました。ありがとうございます。
既知の問題だそうで、折を見てカーネルをコンパイルしよう。<br>
<a href="http://home.jp.FreeBSD.ORG/cgi-bin/showmail/FreeBSD-users-jp/75018">http://home.jp.FreeBSD.ORG/cgi-bin/showmail/FreeBSD-users-jp/75018</a><br>
<a href="http://home.jp.FreeBSD.ORG/cgi-bin/showmail/FreeBSD-users-jp/75027">http://home.jp.FreeBSD.ORG/cgi-bin/showmail/FreeBSD-users-jp/75027</a><br>
<a href="http://www.matatabi.or.jp/~matusita/VMware/">http://www.matatabi.or.jp/~matusita/VMware/</a></p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200309293" title="200309293" href="200309c.html#200309293">■</a> 
<a href="http://www.artima.com/intv/ruby.html">[Ruby] The Philosophy of Ruby</a></h3>
<p>
<a href="http://www.rubyist.net/~matz/20030924.html#p03">例のまつもとさんへのインタビュー</a>が
<a href="http://www.artima.com/">artimaに</a>早速登場。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200309294" title="200309294" href="200309c.html#200309294">■</a> 
[Ruby][Linux] Slackware 9.0とwin32ole</h3>
<p>
Slackware 9.1も出てるそうだが、
<a href="http://www.ruby-lang.org/cgi-bin/ruby-bugs/incoming?id=1185">PR#1185</a>を確認するためにSlackware 9.0をインストール。
ftpでネットワークインストールできないのはつらい。
isoイメージを2時間かけてダウンロードし、
面倒なのでフルインストールしてみたが、
Wineとかole32関係のライブラリは見つからず。
かなりがっかり。
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/46637">Daveさんのとき</a>もそうだったけど、なんか変なライブラリが出回っているのか？
</p>

<p>
いずれにしてもどうせやることは同じなので、
win32oleもwindows.hをチェックするように変更した。
</p>
<!-- section end -->
</div>
<!-- 2003/09/29 end -->



<hr class="hide">
<!-- 2003/09/30 start -->
<h2><a name="20030930" href="200309c.html#20030930">2003-09-30 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200309301" title="200309301" href="200309c.html#200309301">■</a> 
<a href="http://httpd.apache.org/">[Cygwin] Apache 2.0.47</a></h3>
<p>
適当に
</p>
<pre>
% CFLAGS=-Os ./configure --enable-shared=max
</pre>
<p>
でmakeしてみるとすんなり最後まで通った。でもmake installが変だ。
</p>
<pre>
cp: `htpasswd' and `/usr/local/apache2/bin/#inst.324#' are the same file
chmod: getting attributes of `/usr/local/apache2/bin/#inst.324#': No such file or directory
mv: cannot stat `/usr/local/apache2/bin/#inst.324#': No such file or directory
</pre>
<p>
というのが延々と続く。htpasswdはインストールされない。
.exeがついてないあたりが怪しい。よくわからんが、
</p>
<pre>
% cp httpd.exe support/*.exe /usr/local/apache2/bin
</pre>
<p>
しとこう。
あとは適当にhttpd.confをいじってapachectl startすると動いた。
でも肝心の--enable-shared=maxが効いてないよ。
Cygwinのapache 1.3.24を調べるか。
</p>
<!-- section end -->
</div>
<!-- 2003/09/30 end -->

<hr>
<div>
<a href="200309b.html">&lt;Prev(,)</a> | 
<a href="200310a.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
