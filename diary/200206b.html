<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2002-6-b</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://jarp.does.notwork.org/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200206a.html">
<link rel="next" href="200206c.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2002年6月中旬〜</p>
<hr>
<div>
<a href="200206a.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200206c.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2002/06/11 start -->
<h2><a name="20020611" href="200206b.html#20020611">2002-06-11 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200206111" title="200206111" href="200206b.html#200206111">■</a> 
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=REXML">REXML 2.3.4</a></h3>
<p>
更新。2.2.3はなぜかNot foundだ。わかった。_stableが余計なんだ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206112" title="200206112" href="200206b.html#200206112">■</a> 
Borlandの環境</h3>
<p>
なんで同じものを動かしてこうも違う結果になるのか？
そういえばCygwinのbashとかzsh上でtdumpを動かすと、
どうしてもstdinからの入力になってしまい、
しかも指定したobj fileに結果を書くというとんでもないことになってるんだけどなぜ？
</p>


<!-- section end -->
</div>
<!-- 2002/06/11 end -->



<hr class="hide">
<!-- 2002/06/12 start -->
<h2><a name="20020612" href="200206b.html#20020612">2002-06-12 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200206121" title="200206121" href="200206b.html#200206121">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/42274">[Ruby] In terms of platforms, I'd most like to see effort put in to Ruby on:</a></h3>
<p>
Windowsはまあわかるとして、BSDがなぜこんなに高いんだろう？
BSD版rubyだけ使いにくいとも思えないし、ruby-talk MLでもそんな話題は一度もない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206122" title="200206122" href="200206b.html#200206122">■</a> 
[Ruby] ext/extmk.rb.inとlib/mkmf.rb</h3>
<p>
統合じゃなくて共通部分を追い出す作戦のほうがいいか？
1.7ではrbconfig.rbをrequireしてるので@FOO@は撲滅できそう。
</p>


<!-- section end -->
</div>
<!-- 2002/06/12 end -->



<hr class="hide">
<!-- 2002/06/13 start -->
<h2><a name="20020613" href="200206b.html#20020613">2002-06-13 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200206131" title="200206131" href="200206b.html#200206131">■</a> 
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=XML-RPC">[Ruby] XML-RPC 1.7.11</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206132" title="200206132" href="200206b.html#200206132">■</a> 
テレビ朝日</h3>
<p>
カウントダウンうざいよ。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200206133" title="200206133" href="200206b.html#200206133">■</a> 
[Ruby] &quot;#{&quot;a&quot;}&quot;</h3>
<p>
昨日の変更で&quot;#{&quot;a&quot;}&quot;はparse errorになるようになった。
つまり今までがバグっていたという認識なので注意しよう。
</p>


<!-- section end -->
</div>
<!-- 2002/06/13 end -->



<hr class="hide">
<!-- 2002/06/14 start -->
<h2><a name="20020614" href="200206b.html#20020614">2002-06-14 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200206141" title="200206141" href="200206b.html#200206141">■</a> 
curl 7.9.8</h3>
<p>
久し振りに更新。Ruby/libcurlも試してみようかな。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206142" title="200206142" href="200206b.html#200206142">■</a> 
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=Ruby%2Flibcurl">Ruby/libcurl 0.0.2a0</a></h3>
<p>
マクロ名が変更になっているので
<a href="../files/rbCurl-0.0.2a0.diff">その対応</a> 。
</p>


<!-- section end -->
</div>
<!-- 2002/06/14 end -->



<hr class="hide">
<!-- 2002/06/15 start -->
<h2><a name="20020615" href="200206b.html#20020615">2002-06-15 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200206151" title="200206151" href="200206b.html#200206151">■</a> 
<a href="http://plamo-linux.jp/">Plamo 3.0</a></h3>
<p>
いいかもしれない。
</p>
<pre>
□ Plamo 3.0 : kernel 2.4.18 + glibc-2.2.5 + XFree86 4.2.0 + perl
   5.6.1．インストーラは uClibc + BusyBox ベースに移行(インストーラ
   で vi や more が使える :-)．syslinux + lilo でグラフィカルなブー
   ト画面表示．
</pre>
<p>
このインストーラならそのままrescue diskとして使えそう。
</p>


<!-- section end -->
</div>
<!-- 2002/06/15 end -->



<hr class="hide">
<!-- 2002/06/16 start -->
<h2><a name="20020616" href="200206b.html#20020616">2002-06-16 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200206161" title="200206161" href="200206b.html#200206161">■</a> 
<a href="http://cygwin.com/ml/cygwin/2002-06/msg00772.html">[Cygwin] [ANNOUNCEMENT] Updated: w32api-1.5-1</a></h3>
<p>
更新しとこう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206162" title="200206162" href="200206b.html#200206162">■</a> 
<a href="http://expat.sourceforge.net/">expat 1.95.3</a></h3>
<p>
Cygwin上だとlibiconvのときと同じでWinMain@16がundefinedになる。
libtoolが原因だから当たり前ではあるが。
</p>


<!-- section end -->
</div>
<!-- 2002/06/16 end -->



<hr class="hide">
<!-- 2002/06/17 start -->
<h2><a name="20020617" href="200206b.html#20020617">2002-06-17 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200206171" title="200206171" href="200206b.html#200206171">■</a> 
<a href="http://www.splint.org/">Splint - Secure Programming Lint</a></h3>
<p>
LCLintはSplintという名前になったようだ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206172" title="200206172" href="200206b.html#200206172">■</a> 
<a href="../files/indent.xsl">indent.xsl</a></h3>
<p>

<a href="200205c.html#200205312">trとかsedとか使う</a> のは負けという気がするのでいろいろ調べた。
</p>
<pre>
&lt;xsl:strip-space elements=&quot;*&quot;&gt;
</pre>
<p>
で意味を持たない空白を削除とある。
これででたらめなindentのXMLファイルでもいけるね。
</p>
<pre>
% cat x.xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;1.0&quot;&gt;
  &lt;xsl:output method=&quot;xml&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;
&lt;xsl:strip-space elements=&quot;*&quot;/&gt;
  &lt;xsl:template match=&quot;@*|*|text()&quot;&gt;
&lt;xsl:copy&gt;
  &lt;xsl:apply-templates select=&quot;@*|*|text()&quot;/&gt;
  &lt;/xsl:copy&gt; &lt;/xsl:template&gt; &lt;/xsl:stylesheet&gt;
% xsltproc indent.xsl x.xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;1.0&quot;&gt;
  &lt;xsl:output method=&quot;xml&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;
  &lt;xsl:strip-space elements=&quot;*&quot;/&gt;
  &lt;xsl:template match=&quot;@*|*|text()&quot;&gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select=&quot;@*|*|text()&quot;/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</pre>
<p>
Sablotronだと
</p>
<pre>
Warning [code:86] [URI:file:/home/watanabe/0206/indent.xsl] [line:4] [node:element '&lt;xsl:strip-space&gt;'] 
  ignoring unsupported XSL instruction 'strip-space'
</pre>
<p>
のように使えない。ま、sabcmdは遅いし、とりあえずはいいや。
</p>


<!-- section end -->
</div>
<!-- 2002/06/17 end -->



<hr class="hide">
<!-- 2002/06/18 start -->
<h2><a name="20020618" href="200206b.html#20020618">2002-06-18 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200206181" title="200206181" href="200206b.html#200206181">■</a> 
<a href="http://znz.s1.xrea.com/t/?date=20020617#p02">[Linux] NFS</a></h3>
<p>
忘れてました。
<a href="200205a.html#200205052">$installを見る</a> んじゃなくて、
xsystemが最初に呼ばれた時点でopenするようにしよう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206182" title="200206182" href="200206b.html#200206182">■</a> 
Linux 2.5.22</h3>
<p>

<a href="http://www.kernel.org/pub/linux/kernel/v2.5/ChangeLog-2.5.22">ChangeLog</a>
を見るとかなりswsuspに手が入ってる模様。期待できるか？
</p>

<p>
また初歩的なミスが。
</p>
<pre>
constants.c: In function `print_sense_internal':
constants.c:997: `i' undeclared (first use in this function)
constants.c:997: (Each undeclared identifier is reported only once
constants.c:997: for each function it appears in.)
</pre>
<p>
それはそれとしてなんか、
</p>
<pre>
make dep clean bzImage modules
</pre>
<p>
じゃなくて単に
</p>
<pre>
make bzImage
</pre>
<p>
だけで全部やってくれてる気がする。
うーむ。
</p>
<pre>
gcc -Wp,-MD,./.dir.o.d ... -c -o dir.o dir.c
</pre>
<p>
というようにコンパイルするとともに依存関係のファイルを作ってる。
それじゃ遅いと思うんだけどなあ。
あ、そうか。1回目のmakeではヘッダの依存関係なんてなくてもいいんだ。
つまり.cと.oの推論規則があり、.oはまだ作ってないから絶対にコンパイルされる。
で、そのついでにヘッダの依存関係ファイルを作り、
Makefileで存在したらincludeするようにしとけばいい。
2回目からはちゃんとヘッダを含めた依存関係ができあがるわけだ。
これはうまいねえ。
でもconfigurationが固定化されれば各バージョンにつき1回しかmakeしないから、
要らないかもしれないなあ。
</p>

<p>
久し振りに最後までmakeが通ったけど、立ち上がらないのであった。ぐはぁ。
</p>


<!-- section end -->
</div>
<!-- 2002/06/18 end -->



<hr class="hide">
<!-- 2002/06/19 start -->
<h2><a name="20020619" href="200206b.html#20020619">2002-06-19 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200206191" title="200206191" href="200206b.html#200206191">■</a> 
Linux 2.5.23-dj1</h3>
<p>
久し振りに何も変更せずに通った。が、立ち上がらない。
</p>
<pre>
kernel BUG at sched.c:811!
</pre>
<p>
とレジスタダンプじゃよくわからんなあ。swsuspを外してみるか。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206192" title="200206192" href="200206b.html#200206192">■</a> 
[Ruby] extmk.log, mkmf.log</h3>
<p>
やはりCPPの結果が結構うるさい。
エラーはstderrに吐かれるからそのstdoutへ表示される結果は要らないんだよね。
-o conftest.iを足すのがいいかな。
Borlandは-oconftest.iでよさそう。

<a href="http://www.microsoft.com/japan/developer/library/vccore/_core_Compiler_Reference.htm">VC++</a>
だと-Pで勝手にbasename+&quot;.i&quot;というファイルに書かれるようだ。
</p>


<!-- section end -->
</div>
<!-- 2002/06/19 end -->



<hr class="hide">
<!-- 2002/06/20 start -->
<h2><a name="20020620" href="200206b.html#20020620">2002-06-20 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200206201" title="200206201" href="200206b.html#200206201">■</a> 
[Cygwin] cygwin 1.3.11</h3>
<p>
mirrorしてて気づいた。こっそりテストバージョンとして用意されてるようだ。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200206202" title="200206202" href="200206b.html#200206202">■</a> 
<a href="http://cygwin.com/ml/cygwin-announce/">[Cygwin] announce</a></h3>
<p>
そうか、4月からは月別になったのか。直接

<a href="http://cygwin.com/ml/cygwin-announce/2002/">2002年</a>
をbookmarkしていたのが敗因だ。
</p>


<!-- section end -->
</div>
<!-- 2002/06/20 end -->

<hr>
<div>
<a href="200206a.html">&lt;Prev(,)</a> | 
<a href="200206c.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
