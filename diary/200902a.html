<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2009-2-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://jarp.does.notwork.org/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200901c.html">
<link rel="next" href="200902b.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2009年2月上旬〜</p>
<hr>
<div>
<a href="200901c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200902b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2009/02/01 start -->
<h2><a name="20090201" href="200902a.html#20090201">2009-02-01 (Sun)</a></h2>
<!-- 2009-02-02 00:41:49 -->

<div class="entry1">
<h3><a name="200902011" title="200902011" href="200902a.html#200902011">■</a> 
1月のspam</h3>
<p>
13000通以上。なんかReply-Toがgmail.comになるspamが激増。<br>
いままでにない働き者だな。すこしは休め。
</p>

<p>
しかし今まで10000を越えたことはなかったような。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902012" title="200902012" href="200902a.html#200902012">■</a> 
[日記] 日記のサーバがUbuntuに？</h3>
<p>
ゆぞさんが頑張って修復中というか別マシンにインストール中。<br>
Ubuntuになるらしいよ。
</p>
<!-- section end -->
</div>
<!-- 2009/02/01 end -->



<hr class="hide">
<!-- 2009/02/02 start -->
<h2><a name="20090202" href="200902a.html#20090202">2009-02-02 (Mon)</a></h2>
<!-- 2009-02-03 01:30:53 -->

<div class="entry1">
<h3><a name="200902021" title="200902021" href="200902a.html#200902021">■</a> 
[日記] サーバ復活</h3>
<p>
rsync一発で復旧できるようにしてあるのはこういうときに便利だなと思った。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902022" title="200902022" href="200902a.html#200902022">■</a> 
<a href="http://tv.nikkansports.com/">[RSS] ＴＶニッカンスポーツ・コム</a></h3>
<p>
RSSを吐いてるのでFLDRで読んでみたが、<br>
なんか過去だらけというかリアルタイムなのかな。<br>
どんな使い方を意図しているのかよくわからない。
</p>
<!-- section end -->
</div>
<!-- 2009/02/02 end -->



<hr class="hide">
<!-- 2009/02/03 start -->
<h2><a name="20090203" href="200902a.html#20090203">2009-02-03 (Tue)</a></h2>
<!-- 2009-02-04 01:38:15 -->

<div class="entry1">
<h3><a name="200902031" title="200902031" href="200902a.html#200902031">■</a> 
[MinGW] Linux上でMinGWクロスコンパイラを作る</h3>
<p>
基本的には
<a href="200710b.html#200710151">前回</a>と同じなんだけど、<br>
gcc 4.3からはビルドディレクトリをソースとは別にしないと
</p>

<pre>
make[2]: *** No rule to make target `../.././gcc/libgcc.mvars'. Stop. 
</pre>
<p>
というエラーになってしまうので注意。
</p>

<pre>
mkdir -p mingw/i386-mingw32
mingw=$PWD/mingw
tar xfv mingwrt-3.15.2-mingw32-dev.tar.gz  -C $mingw/i386-mingw32
tar xfv w32api-3.13-mingw32-dev.tar.gz -C $mingw/i386-mingw32
tar xfv binutils-2.19.tar.bz2
mkdir binutils-2.19/mingw
cd binutils-2.19/mingw
CFLAGS=-Os ../configure --prefix=$mingw --target=i386-mingw32
make all install
cd ../..
tar xfv gcc-core-4.3.3.tar.bz2
tar xfv gcc-g++-4.3.3.tar.bz2
mkdir gcc-4.3.3/mingw
cd gcc-4.3.3/mingw
CFLAGS=-Os CXXFLAGS=-Os ../configure \
  --verbose --prefix=$mingw --enable-languages=c,c++ --disable-nls \
  --without-included-gettext --with-system-zlib --enable-interpreter \
  --enable-sjlj-exceptions --disable-version-specific-runtime-libs \
  --disable-win32-registry --target=i386-mingw32
make all install
</pre>

<p>
Fedora 10とUbuntu 8.04LTS, 8.10でいけた。
</p>
<!-- section end -->
</div>
<!-- 2009/02/03 end -->



<hr class="hide">
<!-- 2009/02/04 start -->
<h2><a name="20090204" href="200902a.html#20090204">2009-02-04 (Wed)</a></h2>
<!-- 2009-02-05 01:47:23 -->

<div class="entry1">
<h3><a name="200902041" title="200902041" href="200902a.html#200902041">■</a> 
[Linux] mlocatedbの更新が止まってる</h3>
<p>
locateしても出てこないファイルがあっておかしいなと調べてみると<br>
</p>

<pre>
% sudo ls -l /var/lib/mlocate/
合計 13132
-rw-r----- 1 root slocate 13424628 2009-01-25 12:01 mlocate.db
</pre>
<p>
たしかに更新されてない。なんで？<br>
uptimeしてみるとちょうどそのあたりで再起動してるんだけど、<br>
それが原因なのか？
</p>

<p>
よくわからんけど、再起動して様子見。
</p>
<!-- section end -->
</div>
<!-- 2009/02/04 end -->



<hr class="hide">
<!-- 2009/02/05 start -->
<h2><a name="20090205" href="200902a.html#20090205">2009-02-05 (Thu)</a></h2>
<!-- 2009-02-06 01:51:45 -->

<div class="entry1">
<h3><a name="200902051" title="200902051" href="200902a.html#200902051">■</a> 
[Linux] mlocatedbの更新復活</h3>
<p>
再起動で復活。結局何が原因だったのかわからんな。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902052" title="200902052" href="200902a.html#200902052">■</a> 
[Ruby] trunkのparse.cの-O2コンパイルが長い件</h3>
<p>
とりあえずどこが問題なのかを切り分けるために、<br>
yylex()以降をコメントアウトして時間を計ってみた。<br>
parser_yylex()のswitch/caseはどう見ても長すぎるので。<br>
でも、ここは問題じゃなかったのだよ。うーむ。<br>
しかし、残りは2割ぐらいなのでかなりしぼれたと言える。
</p>


<!-- section end -->
</div>
<!-- 2009/02/05 end -->



<hr class="hide">
<!-- 2009/02/06 start -->
<h2><a name="20090206" href="200902a.html#20090206">2009-02-06 (Fri)</a></h2>
<!-- 2009-02-07 21:14:30 -->

<div class="entry1">
<h3><a name="200902061" title="200902061" href="200902a.html#200902061">■</a> 
[DVD] ぽすれん値上げ</h3>
<p>
スタンダードの借り放題が
</p>

<pre>
ご利用料金：変更前　2,079円　（消費税込）→　変更後　2,877円（消費税込）
</pre>
<p>
ということらしい。他社はどうなのかと調べたらすでにそんなコースはないみたい。<br>
月に8枚で2000円前後が主流のようだ。たしかに今まで価格設定がちょっと変だよなあ。<br>
8枚月額1,953円なら2,079円の借り放題選ぶでしょう。
</p>

<p>
さて3月からということなんだけど、どうするかな。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902062" title="200902062" href="200902a.html#200902062">■</a> 
[Ruby] trunkのparse.cの-O2コンパイルが長い件のつづき</h3>
<p>
yylex()から後ろをコメントアウトしてコンパイル時間が短かくなるのは<br>
parser_yylex()が呼ばれなくなるので最適化で削られるのが原因だった。<br>
やっぱりparser_yylex()の長いswitch/caseが原因。<br>
ためしにcase部分をちょっとずつコメントアウトしてみたら、<br>
それに比例してコンパイル時間も短かくなった。
</p>

<p>
まあ、でもこれはgcc 4.3.2のバグで、gcc 4.3.3では解消されている。
</p>
<!-- section end -->
</div>
<!-- 2009/02/06 end -->



<hr class="hide">
<!-- 2009/02/07 start -->
<h2><a name="20090207" href="200902a.html#20090207">2009-02-07 (Sat)</a></h2>
<!-- 2009-02-08 02:21:04 -->

<div class="entry1">
<h3><a name="200902071" title="200902071" href="200902a.html#200902071">■</a> 
[Golf] るびまゴルフ</h3>
<p>
1問目は
<a href="200703a.html#200703071">以前ゴルフ場に出題した問題</a>。<br>
というわけで外部コマンドなしで12Bなのかな。<br>
2問目はそれの応用で19Bか？
</p>

<p>
Awkで書くと1問目は
</p>

<pre>
!a[$0]++
</pre>
<p>
となる。Perlだとこんな感じ。
</p>

<pre>
$$_||=print for&lt;&gt;
</pre>
<p>
末尾の改行は必須。<br>
一応順序も保存している。<br>
要はsort -uなんだけど、これだと順序が保存されない。
</p>
<!-- section end -->
</div>
<!-- 2009/02/07 end -->



<hr class="hide">
<!-- 2009/02/08 start -->
<h2><a name="20090208" href="200902a.html#20090208">2009-02-08 (Sun)</a></h2>
<!-- 2009-02-09 01:12:09 -->

<div class="entry1">
<h3><a name="200902081" title="200902081" href="200902a.html#200902081">■</a> 
[Firefox] データベースファイルのお掃除</h3>
<p>
Firefoxのprofileが置いてあるところで
</p>

<pre>
for i in *.sqlite;do cp -av $i $i.orig;sqlite3 $i vacuum;done
</pre>
<p>
と実行。念のため元のファイルは.origで残す。<br>
サイズは小さくなったが体感できるほど速くなったような気がしない。<br>
</p>


<!-- section end -->
</div>
<!-- 2009/02/08 end -->



<hr class="hide">
<!-- 2009/02/09 start -->
<h2><a name="20090209" href="200902a.html#20090209">2009-02-09 (Mon)</a></h2>
<!-- 2009-02-10 00:10:09 -->

<div class="entry1">
<h3><a name="200902091" title="200902091" href="200902a.html#200902091">■</a> 
[Epoch] 1234567890</h3>
<p>
各種取り揃えてみた。
</p>

<pre>
% ruby -e 'p Time.at 1234567890'
Sat Feb 14 08:31:30 +0900 2009
% perl -e 'print localtime(1234567890).$/'
Sat Feb 14 08:31:30 2009
% gawk 'BEGIN{print strftime(&quot;%c&quot;,1234567890)}'       
Sat Feb 14 08:31:30 2009
% date -d@1234567890 
Sat Feb 14 08:31:30 JST 2009
</pre>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902092" title="200902092" href="200902a.html#200902092">■</a> 
前田さんを囲んでの新年会</h3>
<p>
アキバでNaClを目指して歩いていたら偶然なひさんに出喰わした。<br>
実はまるで見当外れなとこを目指していたようで、<br>
このまま逢わなかったら確実に迷子になっていた。<br>
流石だ。またかよ。
</p>

<p>
例によって盛り上がった。で、結局Mongrelなの？
</p>


<!-- section end -->
</div>
<!-- 2009/02/09 end -->



<hr class="hide">
<!-- 2009/02/10 start -->
<h2><a name="20090210" href="200902a.html#20090210">2009-02-10 (Tue)</a></h2>
<!-- 2009-02-11 10:53:44 -->

<div class="entry1">
<h3><a name="200902101" title="200902101" href="200902a.html#200902101">■</a> 
[Fedora] smartd</h3>
<p>
/var/log/messagesに
</p>

<pre>
smartd[2282]: Device: /dev/hda, No such device, open() failed
smartd[2282]: Unable to register ATA device /dev/hda at line 32 of file /etc/smartd.conf
</pre>
<p>
ってのあった。まだhdaの記述が残っていたとは。何年前の話だよ。<br>
smartdは動いてなくてもそんなに困らないので致命的じゃないけど、<br>
/etc/smartd.conf.rmpnewを使うことにしよう。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200902102" title="200902102" href="200902a.html#200902102">■</a> 
[Epoch] zshで1234567890</h3>
<p>
意外とできるというかpluginだからなんでもありだな。
</p>

<pre>
% zmodload zsh/datetime   
% strftime &quot;%c&quot; 1234567890
Sat Feb 14 08:31:30 2009
</pre>

<!-- section end -->
</div>
<!-- 2009/02/10 end -->

<hr>
<div>
<a href="200901c.html">&lt;Prev(,)</a> | 
<a href="200902b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
