<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2003-8-c</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eban.github.io/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="200308b.html">
<link rel="next" href="200309a.html">

</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2003年8月下旬〜</p>
<hr>
<div>
<a href="200308b.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="200309a.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2003/08/21 start -->
<h2><a name="20030821" href="200308c.html#20030821">2003-08-21 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200308211" title="200308211" href="200308c.html#200308211">■</a> 
[Ruby] Standard Library</h3>
<p>
どうも、ruby-talk MLではlib/配下にあるライブラリを
Standard Libraryとかstdlibと呼ぶような暗黙の了解ができつつある。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308212" title="200308212" href="200308c.html#200308212">■</a> 
[Virus][Worm] Sobig.F</h3>
<p>
今日も50通ほど。30分に1通は来てる感じ。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200308213" title="200308213" href="200308c.html#200308213">■</a> 
短いURL</h3>
<p>
<a href="http://tinyurl.com/kqrg">早速試してみた。</a>って元々長くないURLで試しても意味なし。
kqrgと4ケタになっていて、succしてるだけのようだ。
kqrzはエラーになった。と書いてるうちに埋まった。なるほどねえ。
こんな感じでそのうちケタも増えるわけだね。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308214" title="200308214" href="200308c.html#200308214">■</a> 
<a href="http://www.tv-saitama.co.jp/pg/pgm1anew.html">ベストヒットUSA</a></h3>
<p>
ふと気づくとテレビ埼玉でベストヒットUSAをやってる。小林克也も老けたなあ。
</p>
<!-- section end -->
</div>
<!-- 2003/08/21 end -->



<hr class="hide">
<!-- 2003/08/22 start -->
<h2><a name="20030822" href="200308c.html#20030822">2003-08-22 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200308221" title="200308221" href="200308c.html#200308221">■</a> 
Sobig.Fのバグ</h3>
<p>
今日は32通。YOUR-W92P4BHLZGというホストからはのべ100通を越えた。
こいつが気づかない限り続くわけだよねえ。しかも
</p>
<pre>
Date: Fri, 22 Aug 2003 8:14:20 --0500
</pre>
<p>
のようにtimezoneが変だ。
他のホストからも--0400だの--0700だの変なのばかりだな。
って、Sobig.Fのバグなんかどーでもいいのだよ。
</p>

<p>
YOUR-W92P4BHLZGでぐぐってみるとMessage-Idで200件以上ヒットするが、
どうも特定できそうもない。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308222" title="200308222" href="200308c.html#200308222">■</a> 
<a href="http://www.icewm.org/">[Soft] IceWM 1.2.11</a></h3>
<p>
GCC 3.3.1でもコンパイルできた。
</p>
<!-- section end -->
</div>
<!-- 2003/08/22 end -->



<hr class="hide">
<!-- 2003/08/23 start -->
<h2><a name="20030823" href="200308c.html#20030823">2003-08-23 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200308231" title="200308231" href="200308c.html#200308231">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/80000">[Ruby] ruby-talk 80000</a></h3>
<p>
80000を越えた。70000から4ヶ月。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308232" title="200308232" href="200308c.html#200308232">■</a> 
<a href="http://raa.ruby-lang.org/project/rubyzip/">[Ruby] rubyzip 0.5.1</a></h3>
<p>
更新。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200308233" title="200308233" href="200308c.html#200308233">■</a> 
Sobig.F</h3>
<p>
今日も60通ほど。これだけ気づかないやつも珍しい。
1通が100KBぐらいだからダイアルアップのままだったら死んでるな。
</p>
<!-- section end -->
</div>
<!-- 2003/08/23 end -->



<hr class="hide">
<!-- 2003/08/24 start -->
<h2><a name="20030824" href="200308c.html#20030824">2003-08-24 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200308241" title="200308241" href="200308c.html#200308241">■</a> 
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/0596004990/250-0891947-2270667">[Perl] Perl 6 Essentials</a></h3>
<p>
買った。
</p>
<pre>
$arrayref = @array;
$hashref = %hash;
</pre>
<p>
がそれぞれの長さではなく参照になるのがちょっと驚き。
</p>
<pre>
while (@array) {
</pre>
<p>
はどうするのかと思ったら、
数値コンテキストやブーリアンコンテキストなんてので評価するらしい。
このあたりは
<a href="http://www.perl.com/lpt/a/2001/05/08/exegesis2.html">Exegesis 2</a><a href="http://bulknews.net/lib/doc-ja/exegesis2.ja.html">(日本語訳)</a>を参照。Exegesis 1は最初から存在しないので探さないように。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308242" title="200308242" href="200308c.html#200308242">■</a> 
Sobig.F</h3>
<p>
18時以降YOUR-W92P4BHLZGから来なくなった。あとはCHEF2だけだな。
</p>
<!-- section end -->
</div>
<!-- 2003/08/24 end -->



<hr class="hide">
<!-- 2003/08/25 start -->
<h2><a name="20030825" href="200308c.html#20030825">2003-08-25 (Mon)</a></h2>

<div class="entry1">
<h3><a name="200308251" title="200308251" href="200308c.html#200308251">■</a> 
[Cygwin] Cygwin 1.5.3</h3>
<p>
そろそろ出そうな雰囲気なので、snapshot 2003-08-23でRubyをmake。
問題なし。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308252" title="200308252" href="200308c.html#200308252">■</a> 
[Ruby] fake-mingw32</h3>
<p>
raccをbuildするときに、
ソースとは別のディレクトリでconfigするとfailしてしまう。
そうか。VPATHのドライブレター問題だ。
CONFIG['build_os']が'cygwin'とは限らないから決めうちにもできないしねえ。
Cygwinのmakeが動いているかどうかを動的に判断できればいいわけか。
難しい。
</p>

<!-- section end -->
</div>

<div class="entry1">
<h3><a name="200308253" title="200308253" href="200308c.html#200308253">■</a> 
Sobig.F</h3>
<p>
単にパソコンの電源を落としただけだったようだ。
それどころか、2台増えた。
</p>
<!-- section end -->
</div>
<!-- 2003/08/25 end -->



<hr class="hide">
<!-- 2003/08/26 start -->
<h2><a name="20030826" href="200308c.html#20030826">2003-08-26 (Tue)</a></h2>

<div class="entry1">
<h3><a name="200308261" title="200308261" href="200308c.html#200308261">■</a> 
<a href="http://kernel.org/">[Linux] Linux 2.4.22</a></h3>
<p>
ちょっと弱気にGCC 2.95.3でmake。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308262" title="200308262" href="200308c.html#200308262">■</a> 
[Ruby] -runでopen-uri</h3>
<p>
なにげなく
</p>
<pre>
% ruby -ropen-uri -run -e cp http://www.ruby-lang.org/ja/index.html .
</pre>
<p>
を実行してみるとErrno::ENOENTになった。該当する行を見るとFile.openしてるので
un.rbに
</p>
<pre>
require 'open-uri'
class File
  def self.open(*a, &amp;b)
    Kernel.open(*a, &amp;b)
  end
end
</pre>
<p>
を追加してみた。いけた。面白い。
</p>
<!-- section end -->
</div>
<!-- 2003/08/26 end -->



<hr class="hide">
<!-- 2003/08/27 start -->
<h2><a name="20030827" href="200308c.html#20030827">2003-08-27 (Wed)</a></h2>

<div class="entry1">
<h3><a name="200308271" title="200308271" href="200308c.html#200308271">■</a> 
[Ruby] -ropen-uri -run</h3>
<p>
<a href="200308c.html#200308262">昨日のように</a>常にopen-uriをrequireするとmake installが2倍以上時間がかかるようになってしまった。
というわけで-ropen-uriしたときだけFile.openの挙動を変えてみるか。
</p>
<pre>
if $&quot;.include? 'open-uri.rb'
  class File
    def self.open(*a, &amp;b)
      Kernel.open(*a, &amp;b)
    end
  end
end
</pre>
<!-- section end -->
</div>
<!-- 2003/08/27 end -->



<hr class="hide">
<!-- 2003/08/28 start -->
<h2><a name="20030828" href="200308c.html#20030828">2003-08-28 (Thu)</a></h2>

<div class="entry1">
<h3><a name="200308281" title="200308281" href="200308c.html#200308281">■</a> 
[Cygwin][MinGW] make</h3>
<pre>
VPATH=c:/
all:
</pre>
<p>
というMakefileを作りCygwin上でmake -p|grep -A1 '`VPATH'と実行すると
</p>
<pre>
# General (`VPATH' variable) search path:
# /
</pre>
<p>
と表示される。MSYSだと
</p>
<pre>
# General (`VPATH' variable) search path:
# /c
</pre>
<p>
となる。
これで違いがわかるけど、あらかじめmakeを実行しなきゃいけないあたりがちょっとださいね。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308282" title="200308282" href="200308c.html#200308282">■</a> 
Sobig.F</h3>
<p>
もう24時間以上YOUR-W92P4BHLZGから来てない。やっと気づいたか？
</p>
<!-- section end -->
</div>
<!-- 2003/08/28 end -->



<hr class="hide">
<!-- 2003/08/29 start -->
<h2><a name="20030829" href="200308c.html#20030829">2003-08-29 (Fri)</a></h2>

<div class="entry1">
<h3><a name="200308291" title="200308291" href="200308c.html#200308291">■</a> 
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/80533">[Win32] readlineとAltGr</a></h3>
<p>
うささんといろいろ調べた結果AltGrってのは結構難物だということがわかった。
cygwinのfhanlder_console.ccに
</p>
<pre>
/* Set the mask that determines if an input keystroke is modified by
   META.  We set this based on the keyboard layout language loaded
   for the current thread.  The left &lt;ALT&gt; key always generates
   META, but the right &lt;ALT&gt; key only generates META if we are using
   an English keyboard because many &quot;international&quot; keyboards
   replace common shell symbols ('[', '{', etc.) with accented
   language-specific characters (umlaut, accent grave, etc.).  On
   these keyboards right &lt;ALT&gt; (called AltGr) is used to produce the
   shell symbols and should not be interpreted as META. */
if (PRIMARYLANGID (LOWORD (GetKeyboardLayout (0))) == LANG_ENGLISH)
  dev_state-&gt;meta_mask |= RIGHT_ALT_PRESSED;
</pre>
<p>
という記述を見つけたが、これだとLANG_ENGLISH以外はあまり嬉しくない。
</p>
<!-- section end -->
</div>
<!-- 2003/08/29 end -->



<hr class="hide">
<!-- 2003/08/30 start -->
<h2><a name="20030830" href="200308c.html#20030830">2003-08-30 (Sat)</a></h2>

<div class="entry1">
<h3><a name="200308301" title="200308301" href="200308c.html#200308301">■</a> 
[Win32] readlineとAltGr</h3>
<p>
Cygwinのfhanlder_console.ccの続きを読むと
</p>
<pre>
if (wincap.altgr_is_ctrl_alt ())
  /* WinNT: AltGr is reported as Ctrl+Alt, and Ctrl+Alt is
     treated just like AltGr.  However, if Ctrl+Alt+key generates
     an ASCII control character, interpret is as META. */
  meta = (control_key_state &amp; ALT_PRESSED) != 0
         &amp;&amp; ((control_key_state &amp; CTRL_PRESSED) == 0
             || (ich &gt;= 0 &amp;&amp; ich &lt;= 0x1f || ich == 0x7f));
else
  /* Win9x: there's no way to distinguish Alt from AltGr, so rely
     on dev_state-&gt;meta_mask heuristic (see fhandler_console constructor). */
  meta = (control_key_state &amp; dev_state-&gt;meta_mask) != 0;
</pre>
<p>
となっていた。WinNT系はCtrl+Altかどうかで判断できるらしい。
もうちょっと他のアプリケーションも調べてみよう。
</p>
<!-- section end -->
</div>
<!-- 2003/08/30 end -->



<hr class="hide">
<!-- 2003/08/31 start -->
<h2><a name="20030831" href="200308c.html#20030831">2003-08-31 (Sun)</a></h2>

<div class="entry1">
<h3><a name="200308311" title="200308311" href="200308c.html#200308311">■</a> 
<a href="http://www.is.kyusan-u.ac.jp/~nakano/misc.htm">Nakano's miscellaneous</a></h3>
<p>
あまりに面白くて読み耽る。
</p>

<!-- section end -->
</div>

<div class="entry0">
<h3><a name="200308312" title="200308312" href="200308c.html#200308312">■</a> 
[Win32] AltGr</h3>
<p>
Emacsではw32-recognize-altgrという変数があるようだ。
なるほど。独自の設定項目を用意する方法もあるわけか。
</p>
<!-- section end -->
</div>
<!-- 2003/08/31 end -->

<hr>
<div>
<a href="200308b.html">&lt;Prev(,)</a> | 
<a href="200309a.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
