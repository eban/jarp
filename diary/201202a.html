<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<title>Just another Ruby porter, 2012-2-a</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="nsmm v0.6.3.2(2005/08/18)">
<meta name="author" content="わたなべひろふみ">
<meta http-equiv="Content-Style-Type" content="text/css">
<META http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="../css/basic.css" type="text/css" media="all">
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<link rel="icon" type="image/png" href="../favicon.png">
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eban.github.io/jarp/diary/index.rdf">
<link rev="made" href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">
<link rel="index" href="./">
<link rel="prev" href="201201c.html">
<link rel="next" href="201202b.html">

<link rel="stylesheet" type="text/css" href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css">
<script type="text/javascript" src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
<script type="text/javascript">
<!--       
$(document).ready(function() {
  prettyPrint();
});
-->
</script>
</head>
<body>
<div><h1><span>Just another Ruby porter,</span></h1></div>

<p>〜2012年2月上旬〜</p>
<hr>
<div>
<a href="201201c.html" accesskey=",">&lt;Prev(,)</a> | 
<a href="201202b.html" accesskey=".">Next(.)&gt;</a> | 
<a href="index.html" accesskey="/">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>

<!-- 2012/02/01 start -->
<h2><a name="20120201" href="201202a.html#20120201">2012-02-01 (Wed)</a></h2>

<div class="entry1">
<h3><a name="201202011" title="201202011" href="201202a.html#201202011">■</a> 
Firefox 10.0</h3>
<p>
インスペクタが復活した。8のころとは若干違うが。<br>
Tab Utitlities 1.1.2だとなぜかロケーションバーにURLを入力しても開けない。<br>
1.2pre17に上げないとだめみたいだ。<br>
わかりにくいが、開発バージョンや古いバージョンは
<a href="https://addons.mozilla.org/ja/firefox/addon/tab-utilities/versions/">Versions</a>にある。
</p>
<p>
小細工しなくても拡張は動くといういことだけど、SQLite Optimizerは互換性がないと言われた。<br>
これはそんなに使ってないし別の最適化アドオンにしよう。<br>
とりあえずAdd-on Compatibility Reporterは無効化してみる。
</p>
<!-- section end -->
</div>
<!-- 2012/02/01 end -->



<hr class="hide">
<!-- 2012/02/02 start -->
<h2><a name="20120202" href="201202a.html#20120202">2012-02-02 (Thu)</a></h2>

<div class="entry1">
<h3><a name="201202021" title="201202021" href="201202a.html#201202021">■</a> 
dovecotでまたはまる</h3>
<p>
久し振りにFedora 16でyum updateしたらimap serverにつながらなくなった。<br>
telnet localhost 143するとつながるので、外からアクセスできないだけのようだ。<br>
firewallの設定かと確認してみると、そもそもfirewallはdisableにしてたんだった。<br>
で、dovecotの設定をいろいろ見てみると、<br>
conf.d/10-master.confのタイムスタンプが新しくなっていて、<br>
address = localhostが非常にあやしい。<br>
これをコメントアウトしたらいけた。
</p>
<p>
なんかdovecotには毎回やられる印象があるな。
</p>
<!-- section end -->
</div>
<!-- 2012/02/02 end -->



<hr class="hide">
<!-- 2012/02/03 start -->
<h2><a name="20120203" href="201202a.html#20120203">2012-02-03 (Fri)</a></h2>

<div class="entry1">
<h3><a name="201202031" title="201202031" href="201202a.html#201202031">■</a> 
<a href="http://www.rubeque.com/">rubeque</a></h3>
<p>
穴埋め問題ってとこが新しいね。
<a href="http://www.rubeque.com/problems/pigs-fly-semicol---wait-comma--no-they-don-quo-t-period-">この問題</a>はなかなかいい。<br>
return trueがすでにあるのに、どうやってその後でfalseを返すのか？<br>
問題が解けると他の人の解答も見られる。意外な答えがあったりで結構面白い。
</p>
<p>
ただmethodを作れっていう丸投げ問題はcase/whenでいけちゃうのがちょっと惜しい。
</p>
<!-- section end -->
</div>
<!-- 2012/02/03 end -->



<hr class="hide">
<!-- 2012/02/04 start -->
<h2><a name="20120204" href="201202a.html#20120204">2012-02-04 (Sat)</a></h2>

<div class="entry1">
<h3><a name="201202041" title="201202041" href="201202a.html#201202041">■</a> 
<a href="http://diary.overlasting.net/2012-01-21-1.html">Re: [O] テキストファイルをソートするときに頻繁に使うUnixコマンド</a></h3>
<p>
cut, paste, perlを使わなくてもsortだけでok。-kは複数指定可能。
</p>
<pre>
% sort -k4,4 -k2,2n test_imput.txt 
ウーロン茶	270	A	A
ミルク	300	F	A
抹茶	350	C	A
コーヒー	270	E	B
オレンジジュース	300	B	B
ココア	350	D	B
</pre>
<p>
あとこれ本当にsortされてるのかわかりにくいので、column -tを使うといいでしょう。
</p>
<pre>
% sort -k4,4 -k2,2n test_imput.txt | column -t
ウーロン茶        270  A  A
ミルク            300  F  A
抹茶              350  C  A
コーヒー          270  E  B
オレンジジュース  300  B  B
ココア            350  D  B
</pre>
<p>
いい感じに整形してくれる。

</p>
<!-- section end -->
</div>

<div class="entry0">
<h3><a name="201202042" title="201202042" href="201202a.html#201202042">■</a> 
rubequeでズル</h3>
<p>
コピペとかいろいろブラウザ上では禁止してるわりには、<br>
まあなんというかズルが簡単にできてしまう。<br>
特に丸投げ問題は。<br>
逆に本当の穴埋めはそれができないので、良問になっている。
</p>
<!-- section end -->
</div>
<!-- 2012/02/04 end -->



<hr class="hide">
<!-- 2012/02/05 start -->
<h2><a name="20120205" href="201202a.html#20120205">2012-02-05 (Sun)</a></h2>

<div class="entry1">
<h3><a name="201202051" title="201202051" href="201202a.html#201202051">■</a> 
InstapaperでるびまをePub化</h3>
<p>
まず、
<a href="http://www.instapaper.com/u">Unreadのページ</a>で右側のAdd folderしてrubima-0037とか作る(後からでも名前は変更可能)。<br>
Save directly to this folder: rubima-0037というリンクがbookmarkletになってるので、それをbookmarkする。<br>
これでるびま専用のInstapaperができたので、<br>
るびまの0037号に行ってePub化したい記事をInstapaperする。<br>
ただし、ePub化すると逆順になるのでそこは注意。<br>
まあ、他にフォルダ作れば移動して並び換えることもできるので、あまり気にしなくてもいい。<br>
あとはInstapaperのrubima-0037フォルダの右側の下にePubというリンクがあるので、<br>
これでダウンロードする。Instapaper-rubima-0038-2012-02-05.epubというような名前になる。<br>
残念ながら画像はなくなってしまう。<br>
</p>
<p>
ebook-viewerなら問題なく表示できる。Sony Reader T1じゃ全然だめなところがあれだが。
</p>
<p>
Calibreの「本を変換」するときに「検索&amp;置換」で
</p>
<pre>
\&lt;html xmlns=&quot;http:\/\/www.w3.org\/1999\/xhtml&quot;\&gt;
</pre>
<p>
を
</p>
<pre>
\&lt;html xmlns=&quot;http:\/\/www.w3.org\/1999\/xhtml&quot; xml:lang=&quot;ja&quot; lang=&quot;ja&quot;\&gt;
</pre>
<p>
に、
</p>
<pre>
&quot;en.*?&quot;
</pre>
<p>
を
</p>
<pre>
&quot;ja&quot;
</pre>
<p>
に、ぐらいで一応T1でも読めるようにはなった。
</p>
<p>
直接T1でダウンロードできるわけだし、Instapaperだけでいければ最高なんだが。
</p>
<!-- section end -->
</div>
<!-- 2012/02/05 end -->



<hr class="hide">
<!-- 2012/02/06 start -->
<h2><a name="20120206" href="201202a.html#20120206">2012-02-06 (Mon)</a></h2>

<div class="entry1">
<h3><a name="201202061" title="201202061" href="201202a.html#201202061">■</a> 
最長の回文を探す</h3>
<p>
/(.)(.)(.).?\3\2\1/ というような正規表現を文字列の長さをもとに生成すればいいとやってみたら、<br>
rubequeのやつは&quot;\\&quot;がまともに扱えないことがわかった。<br>
しかたないから8進数で&quot;\134&quot;としてみたら、\1と34とわかれてしまってだめ。<br>
最終的には&quot;\x5c&quot;と16進数にしてなんとか通った。<br>
あ、&quot;\\\\&quot;でもいいようだって、そりゃだめだめだろ。
</p>
<p>
あとsubで$1とかが使えないとか、while/untilもだめとか制約が多いよ。
</p>
<!-- section end -->
</div>
<!-- 2012/02/06 end -->



<hr class="hide">
<!-- 2012/02/07 start -->
<h2><a name="20120207" href="201202a.html#20120207">2012-02-07 (Tue)</a></h2>

<div class="entry1">
<h3><a name="201202071" title="201202071" href="201202a.html#201202071">■</a> 
1000までの素数</h3>
<p>
ものすごく無駄な方法。時間もかかる。けどいわゆるエラトステネスの篩。
</p>
<pre>
(a=[*2..1000])-a.product(a).map{|x,y|x*y}
</pre>
<p>
もうちょっとまともな方法。
</p>
<pre>
(2..1000).select{|x|(2...x).all?{|y|x%y!=0}}
</pre>
<p>
Bignumの限界に挑戦。
</p>
<pre>
[s=2]+(2..1000).select{|x|0&lt;s%x*s*=x}
</pre>
<p>
しかしwhile使えないのは結構痛いな。
</p>
<!-- section end -->
</div>
<!-- 2012/02/07 end -->



<hr class="hide">
<!-- 2012/02/08 start -->
<h2><a name="20120208" href="201202a.html#20120208">2012-02-08 (Wed)</a></h2>

<div class="entry1">
<h3><a name="201202081" title="201202081" href="201202a.html#201202081">■</a> 
いろんな表現</h3>
<p>
昨日の再掲。割り切れない数値を列挙。
</p>
<pre>
(2..1000).select{|x|(2...x).all?{|y|x%y!=0}}
</pre>
<p>
ド・モルガンの法則により!any?に変換できる。
</p>
<pre>
(2..1000).select{|x|!(2...x).any?{|y|x%y==0}}
</pre>
<p>
!any?ってのはnone?と同じ。
<pre>
(2..1000).select{|x|(2...x).none?{|y|x%y==0}}
</pre>
</p>
<p>
否定ということならselectのほうをrejectにしてもいい。
</p>
<pre>
(2..1000).reject{|x|(2...x).any?{|y|x%y==0}}
</pre>
<p>
返す値がこの場合むだではあるが、any?はfindと同じとも言える。
<pre>
(2..1000).reject{|x|(2...x).find{|y|x%y==0}}
</pre>
</p>
<p>
つまり割り切れる数値を除外。
</p>
<!-- section end -->
</div>
<!-- 2012/02/08 end -->



<hr class="hide">
<!-- 2012/02/09 start -->
<h2><a name="20120209" href="201202a.html#20120209">2012-02-09 (Thu)</a></h2>

<div class="entry1">
<h3><a name="201202091" title="201202091" href="201202a.html#201202091">■</a> 
<a href="http://www.commandlinefu.com/commands/view/10216/shell-function-which-allows-you-to-tag-files-by-creating-symbolic-links-directories-in-a-tags-folder.">shell function which allows you to tag files by creating symbolic links directories in a 'tags' folder.</a></h3>
<p>
なかなかいいアイデアだと思うんだけど、コメントにもあるように絶対パスになってないので、<br>
タグ付けしても元のファイルに辿りつけない。
</p>
<pre>
tag() { local t=&quot;$HOME/tags/$1&quot;; [ -d $t ] || mkdir -p $t; shift; ln $* $t;}
</pre>
<p>
これがzshだと簡単に絶対パスに変換できる。$*を$*:aにするだけ。
</p>
<pre>
% pwd
/home/eban/tmp/foo
% set a b c
% echo $*
a b c
% echo $*:a
/home/eban/tmp/foo/a /home/eban/tmp/foo/b /home/eban/tmp/foo/c
</pre>
<p>
さすがzshだ。
</p>
<!-- section end -->
</div>
<!-- 2012/02/09 end -->



<hr class="hide">
<!-- 2012/02/10 start -->
<h2><a name="20120210" href="201202a.html#20120210">2012-02-10 (Fri)</a></h2>

<div class="entry1">
<h3><a name="201202101" title="201202101" href="201202a.html#201202101">■</a> 
Operation System not found</h3>
<p>
久し振りにノートPCの電源入れてみたら立ち上がらなくなっていた。<br>
Operation System not foundと言われてもなあ。<br>
とりあえず中身を確認してみる。<br>
メモリも256MBしかないけどUbuntu 11.04のライブDVDが手元にあったので試してみたら、<br>
なんと立ち上がった。結構無理が利くんだな。<br>
でも「ようこそ」の「Ubuntuを試す」ボタンを押したら返ってこない。<br>
やっぱ無理かと思ったが、Alt-F4で終了させてみたら起動のチャイムが鳴った。<br>
その後10分ぐらい待ったがやはり返ってこない。<br>
あきらめようしたらいきなりDVDにアクセスしだした。<br>
ログイン画面に到達した!<br>
でも入れない。<br>
rootもguestもパスワードがわからない。<br>
ああ、ubuntuでいいんだ。入れた。<br>
また10分経過。真っ暗になる。スクリーンセーバーだった。
さらに10分後。静かになった。<br>
「サンプル」と「Ubuntu 11.04のインストール」だけ出てる。<br>
Alt-F2も効かないし、いろいろメモリ不足で起動してないっぽい。<br>
panelもだめだ。でも「サンプル」をダブルクリックしたら一応nautiusが立ち上がったようで。<br>
これでようやくWindowsのHDDが見れるのか？
</p>
<p>
ハングした。マウスカーソルも動かない。終了。
</p>
<p>
再起動したらWindows XPが復活した!<br>
わらうしかない。<br>
たぶんバッテリーの充電が完了してCMOSの内容が読めるようになったとかそんなとこか。
</p>
<!-- section end -->
</div>
<!-- 2012/02/10 end -->

<hr>
<div>
<a href="201201c.html">&lt;Prev(,)</a> | 
<a href="201202b.html">Next(.)&gt;</a> | 
<a href="index.html">Recent(/)&gt;&gt;</a>
| <a href="index.rdf">RDF</a>
</div>

<hr>
<!-- SiteSearch Google -->
<form method=GET action="http://www.google.co.jp/search">
<p>
<input type=text name=q size=31 maxlength=255 value="">
<input type=hidden name=hl value="ja">
<input type=hidden name=ie value="UTF-8">
<input type=submit name=btnG value="Google 検索">
<input type=hidden name=domains value="jarp.does.notwork.org"><br>
<input type=radio name=sitesearch value=""> WWW を検索
<input type=radio name=sitesearch value="jarp.does.notwork.org" checked> jarp.does.notwork.org を検索 <br>
</form>

<!-- nsmm v0.6.3.2(2005/08/18) -->

<address><a href="&#109;&#x61;&#x69;&#108;&#116;&#111;&#x3A;&#101;&#98;&#x61;&#110;&#64;&#x6F;&#x73;&#x2E;&#x72;&#105;&#109;&#46;&#x6F;&#x72;&#x2E;&#106;&#x70;">わたなべひろふみ</a><br>
Key fingerprint = C456 1350 085F A320 C6C8  8A36 0F15 9B2E EB12 3885<br>
      <a href="http://validator.w3.org/check?uri=referer"><img
          src="http://www.w3.org/Icons/valid-html401"
          alt="Valid HTML 4.01!" height="16" width="88"></a>

<script type="text/javascript" src="http://trackfeed.com/usr/aa7471e560.js"></script>
</address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
_uacct = "UA-101613-1";
urchinTracker();
// -->
</script>
<script src="title.js" type="text/javascript">
</script>
</body>
</html>
